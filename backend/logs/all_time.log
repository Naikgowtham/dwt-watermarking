

========== New Session: 2025-06-29 14:37:01 ==========


========== New Session: 2025-06-29 14:37:01 ==========


========== New Session: 2025-06-29 14:37:01 ==========


========== New Session: 2025-06-29 14:37:01 ==========


========== New Session: 2025-06-29 14:37:01 ==========
[2025-06-29 14:37:01,303] [INFO] [__main__] Launching Flask server...
[2025-06-29 14:37:01,304] [INFO] [__main__] Creating Flask app...
[2025-06-29 14:37:01,304] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 14:38:42 ==========


========== New Session: 2025-06-29 14:38:42 ==========


========== New Session: 2025-06-29 14:38:42 ==========


========== New Session: 2025-06-29 14:38:42 ==========


========== New Session: 2025-06-29 14:38:42 ==========
[2025-06-29 14:38:42,519] [INFO] [__main__] Launching Flask server...
[2025-06-29 14:38:42,519] [INFO] [__main__] Creating Flask app...
[2025-06-29 14:38:42,520] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 14:38:42 ==========


========== New Session: 2025-06-29 14:38:42 ==========


========== New Session: 2025-06-29 14:38:42 ==========


========== New Session: 2025-06-29 14:38:42 ==========


========== New Session: 2025-06-29 14:38:42 ==========
[2025-06-29 14:38:42,716] [INFO] [__main__] Launching Flask server...
[2025-06-29 14:38:42,716] [INFO] [__main__] Creating Flask app...
[2025-06-29 14:38:42,717] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 14:41:26,669] [DEBUG] [__main__] Received a new request.
[2025-06-29 14:41:26,669] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 14:43:48 ==========


========== New Session: 2025-06-29 14:43:48 ==========


========== New Session: 2025-06-29 14:43:48 ==========


========== New Session: 2025-06-29 14:43:48 ==========


========== New Session: 2025-06-29 14:43:48 ==========
[2025-06-29 14:43:48,997] [INFO] [__main__] Launching Flask server...
[2025-06-29 14:43:48,997] [INFO] [__main__] Creating Flask app...
[2025-06-29 14:43:48,998] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 14:43:49 ==========


========== New Session: 2025-06-29 14:43:49 ==========


========== New Session: 2025-06-29 14:43:49 ==========


========== New Session: 2025-06-29 14:43:49 ==========


========== New Session: 2025-06-29 14:43:49 ==========
[2025-06-29 14:43:49,191] [INFO] [__main__] Launching Flask server...
[2025-06-29 14:43:49,191] [INFO] [__main__] Creating Flask app...
[2025-06-29 14:43:49,193] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 14:44:03,017] [DEBUG] [__main__] Received a new request.
[2025-06-29 14:44:03,017] [INFO] [__main__] App context teardown complete.
[2025-06-29 14:46:01,892] [DEBUG] [__main__] Received a new request.
[2025-06-29 14:46:01,892] [INFO] [__main__] App context teardown complete.
[2025-06-29 14:46:44,745] [DEBUG] [__main__] Received a new request.
[2025-06-29 14:46:44,745] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 14:46:44,746] [ERROR] [routes.watermark_routes] No message provided for embedding.
[2025-06-29 14:46:44,746] [INFO] [__main__] App context teardown complete.
[2025-06-29 14:47:15,067] [DEBUG] [__main__] Received a new request.
[2025-06-29 14:47:15,067] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 14:47:15,068] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 14:47:15,068] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 14:47:15,075] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (670, 791, 3)
[2025-06-29 14:47:15,075] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 14:47:15,075] [DEBUG] [utils.bit_utils] Converting string to bits: 'hello'
[2025-06-29 14:47:15,075] [DEBUG] [utils.bit_utils] String converted to 40 bits.
[2025-06-29 14:47:15,075] [DEBUG] [utils.bit_utils] Adding header for message length: 40 bits
[2025-06-29 14:47:15,075] [DEBUG] [utils.bit_utils] Converted integer 40 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0]
[2025-06-29 14:47:15,075] [DEBUG] [utils.bit_utils] Total bitstream length after header = 56
[2025-06-29 14:47:15,075] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 14:47:15,075] [INFO] [core.dwt_engine] Starting DWT watermark embedding
[2025-06-29 14:47:15,077] [DEBUG] [core.dwt_engine] Image shape for DWT: (670, 791)
[2025-06-29 14:47:15,084] [DEBUG] [core.dwt_engine] Embedding into band: LH, shape = (335, 396), coefficients = 132660
[2025-06-29 14:47:15,090] [INFO] [core.dwt_engine] Watermark embedding complete.
[2025-06-29 14:47:15,091] [DEBUG] [routes.watermark_routes] Saving original image to: backend/uploads/original/44aa08c9-8962-4258-a7a5-c8338f6e9216_original.png
[2025-06-29 14:47:15,092] [DEBUG] [utils.image_utils] Attempting to save image to path: backend/uploads/original/44aa08c9-8962-4258-a7a5-c8338f6e9216_original.png
[2025-06-29 14:47:15,097] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 14:47:15,097] [DEBUG] [routes.watermark_routes] Saving watermarked image to: backend/uploads/watermarked/44aa08c9-8962-4258-a7a5-c8338f6e9216_watermarked.png
[2025-06-29 14:47:15,097] [DEBUG] [utils.image_utils] Attempting to save image to path: backend/uploads/watermarked/44aa08c9-8962-4258-a7a5-c8338f6e9216_watermarked.png
[2025-06-29 14:47:15,099] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 14:47:15,099] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 14:47:15,099] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: backend/uploads/watermarked/44aa08c9-8962-4258-a7a5-c8338f6e9216_watermarked.png
[2025-06-29 14:47:15,099] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 14:47:15,099] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 14:47:15,099] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 14:54:01 ==========


========== New Session: 2025-06-29 14:54:01 ==========


========== New Session: 2025-06-29 14:54:01 ==========


========== New Session: 2025-06-29 14:54:01 ==========


========== New Session: 2025-06-29 14:54:01 ==========
[2025-06-29 14:54:01,824] [INFO] [__main__] Launching Flask server...
[2025-06-29 14:54:01,824] [INFO] [__main__] Creating Flask app...
[2025-06-29 14:54:01,825] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 14:54:15,921] [DEBUG] [__main__] Received a new request.
[2025-06-29 14:54:15,922] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 14:54:15,922] [ERROR] [routes.watermark_routes] No image file provided for extraction.
[2025-06-29 14:54:15,923] [INFO] [__main__] App context teardown complete.
[2025-06-29 14:54:36,876] [DEBUG] [__main__] Received a new request.
[2025-06-29 14:54:36,876] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 14:54:36,884] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 14:54:36,884] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 14:54:36,886] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (166, 484, 3)
[2025-06-29 14:54:36,886] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 14:54:36,886] [INFO] [core.dwt_engine] Starting DWT watermark extraction
[2025-06-29 14:54:36,887] [DEBUG] [core.dwt_engine] Extracting from band: LH, shape = (83, 242), total coefficients = 20086
[2025-06-29 14:54:36,887] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 14:54:36,887] [DEBUG] [core.dwt_engine] Extracted message length from header: 0
[2025-06-29 14:54:36,887] [INFO] [core.dwt_engine] Watermark extraction complete.
[2025-06-29 14:54:36,887] [DEBUG] [routes.watermark_routes] Converting extracted bits back to string...
[2025-06-29 14:54:36,888] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 0
[2025-06-29 14:54:36,888] [DEBUG] [utils.bit_utils] Bits successfully converted to string: ''
[2025-06-29 14:54:36,888] [INFO] [routes.watermark_routes] Watermark extraction successful.
[2025-06-29 14:54:36,888] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 14:59:40 ==========


========== New Session: 2025-06-29 14:59:40 ==========


========== New Session: 2025-06-29 14:59:40 ==========


========== New Session: 2025-06-29 14:59:40 ==========


========== New Session: 2025-06-29 14:59:40 ==========
[2025-06-29 14:59:40,807] [INFO] [__main__] Launching Flask server...
[2025-06-29 14:59:40,807] [INFO] [__main__] Creating Flask app...
[2025-06-29 14:59:40,808] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 14:59:40 ==========


========== New Session: 2025-06-29 14:59:40 ==========


========== New Session: 2025-06-29 14:59:41 ==========


========== New Session: 2025-06-29 14:59:41 ==========


========== New Session: 2025-06-29 14:59:41 ==========
[2025-06-29 14:59:41,004] [INFO] [__main__] Launching Flask server...
[2025-06-29 14:59:41,004] [INFO] [__main__] Creating Flask app...
[2025-06-29 14:59:41,005] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 15:00:14,231] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:00:14,231] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 15:00:14,232] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 15:00:14,232] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:00:14,234] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (166, 484, 3)
[2025-06-29 15:00:14,234] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 15:00:14,234] [DEBUG] [utils.bit_utils] Converting string to bits: 'hello'
[2025-06-29 15:00:14,234] [DEBUG] [utils.bit_utils] String converted to 40 bits.
[2025-06-29 15:00:14,234] [DEBUG] [utils.bit_utils] Adding header for message length: 40 bits
[2025-06-29 15:00:14,234] [DEBUG] [utils.bit_utils] Converted integer 40 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0]
[2025-06-29 15:00:14,234] [DEBUG] [utils.bit_utils] Total bitstream length after header = 56
[2025-06-29 15:00:14,234] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 15:00:14,234] [INFO] [core.dwt_engine] Starting DWT watermark embedding
[2025-06-29 15:00:14,234] [DEBUG] [core.dwt_engine] Image shape for DWT: (166, 484)
[2025-06-29 15:00:14,235] [DEBUG] [core.dwt_engine] Embedding into band: LH, shape = (83, 242), coefficients = 20086
[2025-06-29 15:00:14,236] [INFO] [core.dwt_engine] Watermark embedding complete.
[2025-06-29 15:00:14,237] [DEBUG] [routes.watermark_routes] Saving original image to: /home/gowtham/dwt-watermarking/backend/uploads/original/48427169-ffa6-49ec-88c3-52cb42a7b257_original.png
[2025-06-29 15:00:14,237] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/48427169-ffa6-49ec-88c3-52cb42a7b257_original.png
[2025-06-29 15:00:14,238] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:00:14,238] [DEBUG] [routes.watermark_routes] Saving watermarked image to: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/48427169-ffa6-49ec-88c3-52cb42a7b257_watermarked.png
[2025-06-29 15:00:14,238] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/48427169-ffa6-49ec-88c3-52cb42a7b257_watermarked.png
[2025-06-29 15:00:14,238] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:00:14,238] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 15:00:14,238] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/48427169-ffa6-49ec-88c3-52cb42a7b257_watermarked.png
[2025-06-29 15:00:14,238] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 15:00:14,239] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 15:00:14,239] [INFO] [__main__] App context teardown complete.
[2025-06-29 15:02:48,066] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:02:48,066] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 15:02:48,068] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 15:02:48,068] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:02:48,068] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (166, 484, 3)
[2025-06-29 15:02:48,068] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 15:02:48,068] [INFO] [core.dwt_engine] Starting DWT watermark extraction
[2025-06-29 15:02:48,069] [DEBUG] [core.dwt_engine] Extracting from band: LH, shape = (83, 242), total coefficients = 20086
[2025-06-29 15:02:48,069] [DEBUG] [utils.bit_utils] Converted bits to integer: 40
[2025-06-29 15:02:48,069] [DEBUG] [core.dwt_engine] Extracted message length from header: 40
[2025-06-29 15:02:48,069] [INFO] [core.dwt_engine] Watermark extraction complete.
[2025-06-29 15:02:48,069] [DEBUG] [routes.watermark_routes] Converting extracted bits back to string...
[2025-06-29 15:02:48,069] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 40
[2025-06-29 15:02:48,069] [DEBUG] [utils.bit_utils] Bits successfully converted to string: 'hello'
[2025-06-29 15:02:48,070] [INFO] [routes.watermark_routes] Watermark extraction successful.
[2025-06-29 15:02:48,070] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 15:06:09 ==========


========== New Session: 2025-06-29 15:06:09 ==========


========== New Session: 2025-06-29 15:06:09 ==========


========== New Session: 2025-06-29 15:06:09 ==========


========== New Session: 2025-06-29 15:06:09 ==========
[2025-06-29 15:06:09,147] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:06:09,147] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:06:09,148] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:06:09 ==========


========== New Session: 2025-06-29 15:06:09 ==========


========== New Session: 2025-06-29 15:06:09 ==========


========== New Session: 2025-06-29 15:06:09 ==========


========== New Session: 2025-06-29 15:06:09 ==========
[2025-06-29 15:06:09,329] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:06:09,330] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:06:09,331] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 15:06:29,090] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:06:29,091] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 15:06:29,092] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 15:06:29,092] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:06:29,097] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (368, 507, 3)
[2025-06-29 15:06:29,097] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 15:06:29,097] [DEBUG] [utils.bit_utils] Converting string to bits: 'gddddd'
[2025-06-29 15:06:29,097] [DEBUG] [utils.bit_utils] String converted to 48 bits.
[2025-06-29 15:06:29,097] [DEBUG] [utils.bit_utils] Adding header for message length: 48 bits
[2025-06-29 15:06:29,097] [DEBUG] [utils.bit_utils] Converted integer 48 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-06-29 15:06:29,097] [DEBUG] [utils.bit_utils] Total bitstream length after header = 64
[2025-06-29 15:06:29,097] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 15:06:29,097] [INFO] [core.dwt_engine] Starting DWT watermark embedding
[2025-06-29 15:06:29,099] [DEBUG] [core.dwt_engine] Image shape for DWT: (368, 507)
[2025-06-29 15:06:29,103] [DEBUG] [core.dwt_engine] Embedding into band: LH, shape = (184, 254), coefficients = 46736
[2025-06-29 15:06:29,107] [INFO] [core.dwt_engine] Watermark embedding complete.
[2025-06-29 15:06:29,107] [DEBUG] [routes.watermark_routes] Saving original image to: /home/gowtham/dwt-watermarking/backend/uploads/original/4a5bcda6-02d4-432c-91f7-a25fea8aa107_original.png
[2025-06-29 15:06:29,107] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/4a5bcda6-02d4-432c-91f7-a25fea8aa107_original.png
[2025-06-29 15:06:29,109] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:06:29,109] [DEBUG] [routes.watermark_routes] Saving watermarked image to: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/4a5bcda6-02d4-432c-91f7-a25fea8aa107_watermarked.png
[2025-06-29 15:06:29,109] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/4a5bcda6-02d4-432c-91f7-a25fea8aa107_watermarked.png
[2025-06-29 15:06:29,110] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:06:29,110] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 15:06:29,110] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/4a5bcda6-02d4-432c-91f7-a25fea8aa107_watermarked.png
[2025-06-29 15:06:29,110] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 15:06:29,110] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 15:06:29,111] [INFO] [__main__] App context teardown complete.
[2025-06-29 15:06:48,039] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:06:48,039] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 15:06:48,040] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 15:06:48,041] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:06:48,042] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (368, 508, 3)
[2025-06-29 15:06:48,042] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 15:06:48,042] [INFO] [core.dwt_engine] Starting DWT watermark extraction
[2025-06-29 15:06:48,044] [DEBUG] [core.dwt_engine] Extracting from band: LH, shape = (184, 254), total coefficients = 46736
[2025-06-29 15:06:48,044] [DEBUG] [utils.bit_utils] Converted bits to integer: 48
[2025-06-29 15:06:48,044] [DEBUG] [core.dwt_engine] Extracted message length from header: 48
[2025-06-29 15:06:48,044] [INFO] [core.dwt_engine] Watermark extraction complete.
[2025-06-29 15:06:48,044] [DEBUG] [routes.watermark_routes] Converting extracted bits back to string...
[2025-06-29 15:06:48,044] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 48
[2025-06-29 15:06:48,044] [DEBUG] [utils.bit_utils] Bits successfully converted to string: 'fdDddd'
[2025-06-29 15:06:48,044] [INFO] [routes.watermark_routes] Watermark extraction successful.
[2025-06-29 15:06:48,045] [INFO] [__main__] App context teardown complete.
[2025-06-29 15:07:35,938] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:07:35,939] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 15:07:35,940] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 15:07:35,940] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:07:35,944] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (368, 507, 3)
[2025-06-29 15:07:35,944] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 15:07:35,944] [DEBUG] [utils.bit_utils] Converting string to bits: 'fgh'
[2025-06-29 15:07:35,944] [DEBUG] [utils.bit_utils] String converted to 24 bits.
[2025-06-29 15:07:35,944] [DEBUG] [utils.bit_utils] Adding header for message length: 24 bits
[2025-06-29 15:07:35,944] [DEBUG] [utils.bit_utils] Converted integer 24 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-06-29 15:07:35,944] [DEBUG] [utils.bit_utils] Total bitstream length after header = 40
[2025-06-29 15:07:35,944] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 15:07:35,944] [INFO] [core.dwt_engine] Starting DWT watermark embedding
[2025-06-29 15:07:35,945] [DEBUG] [core.dwt_engine] Image shape for DWT: (368, 507)
[2025-06-29 15:07:35,946] [DEBUG] [core.dwt_engine] Embedding into band: LH, shape = (184, 254), coefficients = 46736
[2025-06-29 15:07:35,949] [INFO] [core.dwt_engine] Watermark embedding complete.
[2025-06-29 15:07:35,949] [DEBUG] [routes.watermark_routes] Saving original image to: /home/gowtham/dwt-watermarking/backend/uploads/original/ed301130-629c-448d-aaa8-e9f2a431291f_original.png
[2025-06-29 15:07:35,949] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/ed301130-629c-448d-aaa8-e9f2a431291f_original.png
[2025-06-29 15:07:35,951] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:07:35,951] [DEBUG] [routes.watermark_routes] Saving watermarked image to: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ed301130-629c-448d-aaa8-e9f2a431291f_watermarked.png
[2025-06-29 15:07:35,951] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ed301130-629c-448d-aaa8-e9f2a431291f_watermarked.png
[2025-06-29 15:07:35,952] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:07:35,952] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 15:07:35,952] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ed301130-629c-448d-aaa8-e9f2a431291f_watermarked.png
[2025-06-29 15:07:35,952] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 15:07:35,952] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 15:07:35,953] [INFO] [__main__] App context teardown complete.
[2025-06-29 15:07:46,617] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:07:46,617] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 15:07:46,618] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 15:07:46,618] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:07:46,620] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (368, 508, 3)
[2025-06-29 15:07:46,620] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 15:07:46,620] [INFO] [core.dwt_engine] Starting DWT watermark extraction
[2025-06-29 15:07:46,622] [DEBUG] [core.dwt_engine] Extracting from band: LH, shape = (184, 254), total coefficients = 46736
[2025-06-29 15:07:46,622] [DEBUG] [utils.bit_utils] Converted bits to integer: 24
[2025-06-29 15:07:46,622] [DEBUG] [core.dwt_engine] Extracted message length from header: 24
[2025-06-29 15:07:46,622] [INFO] [core.dwt_engine] Watermark extraction complete.
[2025-06-29 15:07:46,623] [DEBUG] [routes.watermark_routes] Converting extracted bits back to string...
[2025-06-29 15:07:46,623] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 24
[2025-06-29 15:07:46,623] [DEBUG] [utils.bit_utils] Bits successfully converted to string: 'fgH'
[2025-06-29 15:07:46,623] [INFO] [routes.watermark_routes] Watermark extraction successful.
[2025-06-29 15:07:46,623] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 15:38:31 ==========


========== New Session: 2025-06-29 15:38:31 ==========


========== New Session: 2025-06-29 15:38:31 ==========


========== New Session: 2025-06-29 15:38:31 ==========


========== New Session: 2025-06-29 15:38:31 ==========
[2025-06-29 15:38:31,694] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:38:31,695] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:38:31,696] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:38:38 ==========


========== New Session: 2025-06-29 15:38:38 ==========


========== New Session: 2025-06-29 15:38:38 ==========


========== New Session: 2025-06-29 15:38:38 ==========


========== New Session: 2025-06-29 15:38:38 ==========
[2025-06-29 15:38:38,442] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:38:38,442] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:38:38,443] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:38:38 ==========


========== New Session: 2025-06-29 15:38:38 ==========


========== New Session: 2025-06-29 15:38:38 ==========


========== New Session: 2025-06-29 15:38:38 ==========


========== New Session: 2025-06-29 15:38:38 ==========
[2025-06-29 15:38:38,626] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:38:38,626] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:38:38,627] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 15:38:57,520] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:38:57,520] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 15:38:57,530] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 15:38:57,530] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:38:57,570] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-06-29 15:38:57,570] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 15:38:57,570] [DEBUG] [utils.bit_utils] Converting string to bits: 'hoil'
[2025-06-29 15:38:57,570] [DEBUG] [utils.bit_utils] String converted to 32 bits.
[2025-06-29 15:38:57,570] [DEBUG] [utils.bit_utils] Adding header for message length: 32 bits
[2025-06-29 15:38:57,570] [DEBUG] [utils.bit_utils] Converted integer 32 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-06-29 15:38:57,570] [DEBUG] [utils.bit_utils] Total bitstream length after header = 48
[2025-06-29 15:38:57,570] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 15:38:57,570] [INFO] [core.dwt_engine] Starting DWT watermark embedding
[2025-06-29 15:38:57,570] [DEBUG] [core.dwt_engine] Image shape for DWT: (1080, 1920, 3)
[2025-06-29 15:38:57,612] [DEBUG] [core.dwt_engine] Embedding into band: LH, shape = (540, 960), coefficients = 518400
[2025-06-29 15:38:57,643] [INFO] [core.dwt_engine] Watermark embedding complete.
[2025-06-29 15:38:57,643] [DEBUG] [routes.watermark_routes] Saving original image to: /home/gowtham/dwt-watermarking/backend/uploads/original/bef12ac5-8dd7-4d76-92fc-cc860594a519_original.png
[2025-06-29 15:38:57,643] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/bef12ac5-8dd7-4d76-92fc-cc860594a519_original.png
[2025-06-29 15:38:57,687] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:38:57,687] [DEBUG] [routes.watermark_routes] Saving watermarked image to: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bef12ac5-8dd7-4d76-92fc-cc860594a519_watermarked.png
[2025-06-29 15:38:57,688] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bef12ac5-8dd7-4d76-92fc-cc860594a519_watermarked.png
[2025-06-29 15:38:57,731] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:38:57,731] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 15:38:57,731] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bef12ac5-8dd7-4d76-92fc-cc860594a519_watermarked.png
[2025-06-29 15:38:57,733] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 15:38:57,733] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 15:38:57,740] [INFO] [__main__] App context teardown complete.
[2025-06-29 15:39:11,644] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:39:11,644] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 15:39:11,652] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 15:39:11,652] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:39:11,679] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-06-29 15:39:11,679] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 15:39:11,679] [INFO] [core.dwt_engine] Starting DWT watermark extraction
[2025-06-29 15:39:11,715] [DEBUG] [core.dwt_engine] Extracting from band: LH, shape = (540, 960), total coefficients = 518400
[2025-06-29 15:39:11,715] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 15:39:11,715] [DEBUG] [core.dwt_engine] Extracted message length from header: 0
[2025-06-29 15:39:11,715] [INFO] [core.dwt_engine] Watermark extraction complete.
[2025-06-29 15:39:11,715] [DEBUG] [routes.watermark_routes] Converting extracted bits back to string...
[2025-06-29 15:39:11,715] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 0
[2025-06-29 15:39:11,715] [DEBUG] [utils.bit_utils] Bits successfully converted to string: ''
[2025-06-29 15:39:11,715] [INFO] [routes.watermark_routes] Watermark extraction successful.
[2025-06-29 15:39:11,718] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 15:47:04 ==========


========== New Session: 2025-06-29 15:47:04 ==========


========== New Session: 2025-06-29 15:47:04 ==========


========== New Session: 2025-06-29 15:47:04 ==========
[2025-06-29 15:47:04,586] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:47:04,586] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:47:04,587] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:47:04 ==========


========== New Session: 2025-06-29 15:47:04 ==========


========== New Session: 2025-06-29 15:47:04 ==========


========== New Session: 2025-06-29 15:47:04 ==========
[2025-06-29 15:47:04,771] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:47:04,771] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:47:04,772] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 15:47:39,319] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:47:39,319] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 15:47:39,324] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 15:47:39,324] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:47:39,341] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 15:47:39,341] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 15:47:39,341] [DEBUG] [utils.bit_utils] Converting string to bits: 'helllo'
[2025-06-29 15:47:39,341] [DEBUG] [utils.bit_utils] String converted to 48 bits.
[2025-06-29 15:47:39,341] [DEBUG] [utils.bit_utils] Adding header for message length: 48 bits
[2025-06-29 15:47:39,342] [DEBUG] [utils.bit_utils] Converted integer 48 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-06-29 15:47:39,342] [DEBUG] [utils.bit_utils] Total bitstream length after header = 64
[2025-06-29 15:47:39,342] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 15:47:39,362] [DEBUG] [routes.watermark_routes] Saving original image to: /home/gowtham/dwt-watermarking/backend/uploads/original/bfc2c6bc-fb5a-41fa-a424-15162ec0b0f8_original.png
[2025-06-29 15:47:39,362] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/bfc2c6bc-fb5a-41fa-a424-15162ec0b0f8_original.png
[2025-06-29 15:47:39,382] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:47:39,382] [DEBUG] [routes.watermark_routes] Saving watermarked image to: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bfc2c6bc-fb5a-41fa-a424-15162ec0b0f8_watermarked.png
[2025-06-29 15:47:39,382] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bfc2c6bc-fb5a-41fa-a424-15162ec0b0f8_watermarked.png
[2025-06-29 15:47:39,401] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:47:39,401] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 15:47:39,401] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bfc2c6bc-fb5a-41fa-a424-15162ec0b0f8_watermarked.png
[2025-06-29 15:47:39,402] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 15:47:39,402] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 15:47:39,406] [INFO] [__main__] App context teardown complete.
[2025-06-29 15:47:55,559] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:47:55,560] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 15:47:55,564] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 15:47:55,564] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:47:55,575] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 15:47:55,575] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 15:47:55,575] [ERROR] [routes.watermark_routes] Watermark extraction failed due to an internal error.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 91, in extract_watermark
    message_bits = extract_bits_from_dwt(image, band='LH')
TypeError: extract_bits_from_dwt() missing 1 required positional argument: 'bit_count'
[2025-06-29 15:47:55,576] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 15:50:30 ==========


========== New Session: 2025-06-29 15:50:30 ==========


========== New Session: 2025-06-29 15:50:30 ==========


========== New Session: 2025-06-29 15:50:30 ==========
[2025-06-29 15:50:30,083] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:50:30,084] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:50:30,085] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:50:39 ==========


========== New Session: 2025-06-29 15:50:39 ==========


========== New Session: 2025-06-29 15:50:39 ==========


========== New Session: 2025-06-29 15:50:39 ==========
[2025-06-29 15:50:39,583] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:50:39,584] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:50:39,585] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:50:39 ==========


========== New Session: 2025-06-29 15:50:39 ==========


========== New Session: 2025-06-29 15:50:39 ==========


========== New Session: 2025-06-29 15:50:39 ==========
[2025-06-29 15:50:39,768] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:50:39,768] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:50:39,770] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 15:50:46,167] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:50:46,168] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 15:50:46,172] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 15:50:46,172] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:50:46,184] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 15:50:46,184] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 15:50:46,184] [ERROR] [routes.watermark_routes] Watermark extraction failed due to an internal error.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 91, in extract_watermark
    message_bits = extract_bits_from_dwt(image, band='LH')
TypeError: extract_bits_from_dwt() missing 1 required positional argument: 'bit_count'
[2025-06-29 15:50:46,186] [INFO] [__main__] App context teardown complete.
[2025-06-29 15:51:11,565] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:51:11,565] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 15:51:11,570] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 15:51:11,570] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:51:11,582] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 15:51:11,582] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 15:51:11,582] [ERROR] [routes.watermark_routes] Watermark extraction failed due to an internal error.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 91, in extract_watermark
    message_bits = extract_bits_from_dwt(image, band='LH')
TypeError: extract_bits_from_dwt() missing 1 required positional argument: 'bit_count'
[2025-06-29 15:51:11,583] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 15:53:33 ==========


========== New Session: 2025-06-29 15:53:33 ==========


========== New Session: 2025-06-29 15:53:33 ==========


========== New Session: 2025-06-29 15:53:33 ==========
[2025-06-29 15:53:33,897] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:53:33,898] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:53:33,899] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 15:53:38,570] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:53:38,571] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 15:53:38,575] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 15:53:38,575] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:53:38,587] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 15:53:38,587] [DEBUG] [routes.watermark_routes] Extracting header from DWT band...
[2025-06-29 15:53:38,601] [DEBUG] [utils.bit_utils] Converted bits to integer: 48
[2025-06-29 15:53:38,601] [DEBUG] [routes.watermark_routes] Extracted message length from header: 48
[2025-06-29 15:53:38,601] [DEBUG] [routes.watermark_routes] Total bits to extract (header + message): 64
[2025-06-29 15:53:38,609] [DEBUG] [routes.watermark_routes] Converting extracted bits back to string...
[2025-06-29 15:53:38,609] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 48
[2025-06-29 15:53:38,610] [DEBUG] [utils.bit_utils] Bits successfully converted to string: 'helllo'
[2025-06-29 15:53:38,610] [INFO] [routes.watermark_routes] Watermark extraction successful.
[2025-06-29 15:53:38,610] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 15:53:56 ==========


========== New Session: 2025-06-29 15:53:56 ==========


========== New Session: 2025-06-29 15:53:56 ==========


========== New Session: 2025-06-29 15:53:56 ==========
[2025-06-29 15:53:56,857] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:53:56,858] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:53:56,859] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:53:57 ==========


========== New Session: 2025-06-29 15:53:57 ==========


========== New Session: 2025-06-29 15:53:57 ==========


========== New Session: 2025-06-29 15:53:57 ==========
[2025-06-29 15:53:57,043] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:53:57,043] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:53:57,044] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 15:54:15,435] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:54:15,435] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 15:54:15,437] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 15:54:15,437] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:54:15,465] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (909, 1788, 3)
[2025-06-29 15:54:15,465] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 15:54:15,465] [DEBUG] [utils.bit_utils] Converting string to bits: 'gdhdrfgfgthgrth'
[2025-06-29 15:54:15,465] [DEBUG] [utils.bit_utils] String converted to 120 bits.
[2025-06-29 15:54:15,465] [DEBUG] [utils.bit_utils] Adding header for message length: 120 bits
[2025-06-29 15:54:15,465] [DEBUG] [utils.bit_utils] Converted integer 120 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0]
[2025-06-29 15:54:15,465] [DEBUG] [utils.bit_utils] Total bitstream length after header = 136
[2025-06-29 15:54:15,465] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 15:54:15,520] [ERROR] [routes.watermark_routes] Watermark embedding failed due to an internal error.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 47, in embed_watermark
    watermarked_image = embed_bits_in_dwt(image, full_bitstream, band='LH')
  File "/home/gowtham/dwt-watermarking/backend/core/dwt_engine.py", line 50, in embed_bits_in_dwt
    watermarked_ycrcb = cv2.merge([watermarked_Y, Cr, Cb])
cv2.error: OpenCV(4.11.0) /io/opencv/modules/core/src/merge.dispatch.cpp:130: error: (-215:Assertion failed) mv[i].size == mv[0].size && mv[i].depth() == depth in function 'merge'

[2025-06-29 15:54:15,524] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 15:56:01 ==========


========== New Session: 2025-06-29 15:56:01 ==========


========== New Session: 2025-06-29 15:56:01 ==========


========== New Session: 2025-06-29 15:56:01 ==========
[2025-06-29 15:56:01,982] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:56:01,982] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:56:01,982] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:56:54 ==========


========== New Session: 2025-06-29 15:56:54 ==========


========== New Session: 2025-06-29 15:56:54 ==========


========== New Session: 2025-06-29 15:56:54 ==========
[2025-06-29 15:56:54,473] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:56:54,473] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:56:54,475] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:57:05 ==========


========== New Session: 2025-06-29 15:57:05 ==========


========== New Session: 2025-06-29 15:57:05 ==========


========== New Session: 2025-06-29 15:57:05 ==========
[2025-06-29 15:57:05,760] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:57:05,760] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:57:05,761] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:57:54 ==========


========== New Session: 2025-06-29 15:57:54 ==========


========== New Session: 2025-06-29 15:57:54 ==========


========== New Session: 2025-06-29 15:57:54 ==========
[2025-06-29 15:57:54,218] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:57:54,218] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:57:54,219] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:58:06 ==========


========== New Session: 2025-06-29 15:58:06 ==========


========== New Session: 2025-06-29 15:58:06 ==========


========== New Session: 2025-06-29 15:58:06 ==========
[2025-06-29 15:58:06,508] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:58:06,508] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:58:06,509] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:58:07 ==========


========== New Session: 2025-06-29 15:58:07 ==========


========== New Session: 2025-06-29 15:58:07 ==========


========== New Session: 2025-06-29 15:58:07 ==========
[2025-06-29 15:58:07,736] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:58:07,736] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:58:07,738] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:58:30 ==========


========== New Session: 2025-06-29 15:58:30 ==========


========== New Session: 2025-06-29 15:58:30 ==========


========== New Session: 2025-06-29 15:58:30 ==========
[2025-06-29 15:58:30,482] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:58:30,482] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:58:30,483] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 15:58:30 ==========


========== New Session: 2025-06-29 15:58:30 ==========


========== New Session: 2025-06-29 15:58:30 ==========


========== New Session: 2025-06-29 15:58:30 ==========
[2025-06-29 15:58:30,680] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:58:30,680] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:58:30,681] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 15:58:47,055] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:58:47,055] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 15:58:47,060] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 15:58:47,060] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:58:47,080] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (687, 996, 3)
[2025-06-29 15:58:47,080] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 15:58:47,080] [DEBUG] [utils.bit_utils] Converting string to bits: 'ghftt'
[2025-06-29 15:58:47,080] [DEBUG] [utils.bit_utils] String converted to 40 bits.
[2025-06-29 15:58:47,080] [DEBUG] [utils.bit_utils] Adding header for message length: 40 bits
[2025-06-29 15:58:47,080] [DEBUG] [utils.bit_utils] Converted integer 40 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0]
[2025-06-29 15:58:47,081] [DEBUG] [utils.bit_utils] Total bitstream length after header = 56
[2025-06-29 15:58:47,081] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 15:58:47,105] [ERROR] [routes.watermark_routes] Watermark embedding failed due to an internal error.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 47, in embed_watermark
    watermarked_image = embed_bits_in_dwt(image, full_bitstream, band='LH')
  File "/home/gowtham/dwt-watermarking/backend/core/dwt_engine.py", line 58, in embed_bits_in_dwt
    watermarked_ycrcb = cv2.merge([watermarked_Y, Cr, Cb])
cv2.error: OpenCV(4.11.0) /io/opencv/modules/core/src/merge.dispatch.cpp:130: error: (-215:Assertion failed) mv[i].size == mv[0].size && mv[i].depth() == depth in function 'merge'

[2025-06-29 15:58:47,108] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 16:00:05 ==========


========== New Session: 2025-06-29 16:00:05 ==========


========== New Session: 2025-06-29 16:00:05 ==========


========== New Session: 2025-06-29 16:00:05 ==========
[2025-06-29 16:00:05,372] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:00:05,372] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:00:05,374] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:00:08 ==========


========== New Session: 2025-06-29 16:00:08 ==========


========== New Session: 2025-06-29 16:00:08 ==========


========== New Session: 2025-06-29 16:00:08 ==========
[2025-06-29 16:00:08,437] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:00:08,437] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:00:08,438] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:00:08 ==========


========== New Session: 2025-06-29 16:00:08 ==========


========== New Session: 2025-06-29 16:00:08 ==========


========== New Session: 2025-06-29 16:00:08 ==========
[2025-06-29 16:00:08,623] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:00:08,623] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:00:08,624] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 16:00:28,625] [DEBUG] [__main__] Received a new request.
[2025-06-29 16:00:28,625] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 16:00:28,630] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 16:00:28,630] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 16:00:28,647] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 16:00:28,647] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 16:00:28,647] [DEBUG] [utils.bit_utils] Converting string to bits: 'gfsdfs'
[2025-06-29 16:00:28,647] [DEBUG] [utils.bit_utils] String converted to 48 bits.
[2025-06-29 16:00:28,647] [DEBUG] [utils.bit_utils] Adding header for message length: 48 bits
[2025-06-29 16:00:28,647] [DEBUG] [utils.bit_utils] Converted integer 48 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-06-29 16:00:28,647] [DEBUG] [utils.bit_utils] Total bitstream length after header = 64
[2025-06-29 16:00:28,647] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 16:00:28,668] [DEBUG] [routes.watermark_routes] Saving original image to: /home/gowtham/dwt-watermarking/backend/uploads/original/1a80f19b-5b07-4fd9-81a7-b750f7f91c60_original.png
[2025-06-29 16:00:28,668] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/1a80f19b-5b07-4fd9-81a7-b750f7f91c60_original.png
[2025-06-29 16:00:28,688] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 16:00:28,689] [DEBUG] [routes.watermark_routes] Saving watermarked image to: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/1a80f19b-5b07-4fd9-81a7-b750f7f91c60_watermarked.png
[2025-06-29 16:00:28,689] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/1a80f19b-5b07-4fd9-81a7-b750f7f91c60_watermarked.png
[2025-06-29 16:00:28,709] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 16:00:28,710] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 16:00:28,710] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/1a80f19b-5b07-4fd9-81a7-b750f7f91c60_watermarked.png
[2025-06-29 16:00:28,711] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 16:00:28,711] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 16:00:28,715] [INFO] [__main__] App context teardown complete.
[2025-06-29 16:00:40,278] [DEBUG] [__main__] Received a new request.
[2025-06-29 16:00:40,278] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 16:00:40,284] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 16:00:40,284] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 16:00:40,296] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 16:00:40,296] [DEBUG] [routes.watermark_routes] Extracting header from DWT band...
[2025-06-29 16:00:40,296] [ERROR] [routes.watermark_routes] Watermark extraction failed due to an internal error.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 91, in extract_watermark
    header_bits = extract_bits_from_dwt(image, bit_count=16, band='LH')  # ✅ Step 1
TypeError: extract_bits_from_dwt() got an unexpected keyword argument 'bit_count'
[2025-06-29 16:00:40,297] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 16:02:16 ==========


========== New Session: 2025-06-29 16:02:16 ==========


========== New Session: 2025-06-29 16:02:16 ==========


========== New Session: 2025-06-29 16:02:16 ==========
[2025-06-29 16:02:16,497] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:02:16,497] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:02:16,498] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:02:17 ==========


========== New Session: 2025-06-29 16:02:17 ==========


========== New Session: 2025-06-29 16:02:17 ==========


========== New Session: 2025-06-29 16:02:17 ==========
[2025-06-29 16:02:17,721] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:02:17,721] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:02:17,722] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:02:18 ==========


========== New Session: 2025-06-29 16:02:18 ==========


========== New Session: 2025-06-29 16:02:18 ==========


========== New Session: 2025-06-29 16:02:18 ==========
[2025-06-29 16:02:18,978] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:02:18,978] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:02:18,979] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:02:33 ==========


========== New Session: 2025-06-29 16:02:33 ==========


========== New Session: 2025-06-29 16:02:33 ==========


========== New Session: 2025-06-29 16:02:33 ==========
[2025-06-29 16:02:33,256] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:02:33,256] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:02:33,257] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:02:36 ==========


========== New Session: 2025-06-29 16:02:36 ==========


========== New Session: 2025-06-29 16:02:36 ==========


========== New Session: 2025-06-29 16:02:36 ==========
[2025-06-29 16:02:36,520] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:02:36,520] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:02:36,522] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:03:02 ==========


========== New Session: 2025-06-29 16:03:02 ==========


========== New Session: 2025-06-29 16:03:02 ==========


========== New Session: 2025-06-29 16:03:02 ==========
[2025-06-29 16:03:02,892] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:03:02,892] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:03:02,893] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:03:22 ==========


========== New Session: 2025-06-29 16:03:22 ==========


========== New Session: 2025-06-29 16:03:22 ==========


========== New Session: 2025-06-29 16:03:22 ==========
[2025-06-29 16:03:22,087] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:03:22,087] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:03:22,088] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:03:22 ==========


========== New Session: 2025-06-29 16:03:22 ==========


========== New Session: 2025-06-29 16:03:22 ==========


========== New Session: 2025-06-29 16:03:22 ==========
[2025-06-29 16:03:22,273] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:03:22,273] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:03:22,274] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 16:03:38,308] [DEBUG] [__main__] Received a new request.
[2025-06-29 16:03:38,308] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 16:03:38,314] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 16:03:38,314] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 16:03:38,331] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 16:03:38,332] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 16:03:38,332] [DEBUG] [utils.bit_utils] Converting string to bits: 'sdfasf'
[2025-06-29 16:03:38,332] [DEBUG] [utils.bit_utils] String converted to 48 bits.
[2025-06-29 16:03:38,332] [DEBUG] [utils.bit_utils] Adding header for message length: 48 bits
[2025-06-29 16:03:38,332] [DEBUG] [utils.bit_utils] Converted integer 48 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-06-29 16:03:38,332] [DEBUG] [utils.bit_utils] Total bitstream length after header = 64
[2025-06-29 16:03:38,332] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 16:03:38,354] [DEBUG] [routes.watermark_routes] Saving original image to: /home/gowtham/dwt-watermarking/backend/uploads/original/87aa7837-8d32-4600-b30c-ee84b35b1e65_original.png
[2025-06-29 16:03:38,354] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/87aa7837-8d32-4600-b30c-ee84b35b1e65_original.png
[2025-06-29 16:03:38,374] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 16:03:38,374] [DEBUG] [routes.watermark_routes] Saving watermarked image to: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/87aa7837-8d32-4600-b30c-ee84b35b1e65_watermarked.png
[2025-06-29 16:03:38,374] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/87aa7837-8d32-4600-b30c-ee84b35b1e65_watermarked.png
[2025-06-29 16:03:38,395] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 16:03:38,395] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 16:03:38,395] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/87aa7837-8d32-4600-b30c-ee84b35b1e65_watermarked.png
[2025-06-29 16:03:38,397] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 16:03:38,397] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 16:03:38,401] [INFO] [__main__] App context teardown complete.
[2025-06-29 16:03:49,970] [DEBUG] [__main__] Received a new request.
[2025-06-29 16:03:49,970] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 16:03:49,975] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 16:03:49,975] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 16:03:49,986] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 16:03:49,986] [DEBUG] [routes.watermark_routes] Image loaded. Shape = (840, 700, 3)
[2025-06-29 16:03:49,986] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 16:03:49,998] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 16:03:49,998] [DEBUG] [routes.watermark_routes] Bitstream length (message only): 0 bits
[2025-06-29 16:03:49,998] [DEBUG] [routes.watermark_routes] Converting extracted bits back to string...
[2025-06-29 16:03:49,998] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 0
[2025-06-29 16:03:49,998] [DEBUG] [utils.bit_utils] Bits successfully converted to string: ''
[2025-06-29 16:03:49,998] [DEBUG] [routes.watermark_routes] Extracted message: ''
[2025-06-29 16:03:49,998] [INFO] [routes.watermark_routes] Watermark extraction successful.
[2025-06-29 16:03:49,999] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 16:06:04 ==========


========== New Session: 2025-06-29 16:06:04 ==========


========== New Session: 2025-06-29 16:06:04 ==========


========== New Session: 2025-06-29 16:06:04 ==========
[2025-06-29 16:06:04,364] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:06:04,364] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:06:04,365] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:06:08 ==========


========== New Session: 2025-06-29 16:06:08 ==========


========== New Session: 2025-06-29 16:06:08 ==========


========== New Session: 2025-06-29 16:06:08 ==========
[2025-06-29 16:06:08,711] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:06:08,712] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:06:08,713] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:06:08 ==========


========== New Session: 2025-06-29 16:06:08 ==========


========== New Session: 2025-06-29 16:06:08 ==========


========== New Session: 2025-06-29 16:06:08 ==========
[2025-06-29 16:06:08,895] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:06:08,895] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:06:08,896] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 16:06:21,721] [DEBUG] [__main__] Received a new request.
[2025-06-29 16:06:21,721] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 16:06:21,725] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 16:06:21,725] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 16:06:21,743] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 16:06:21,743] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 16:06:21,743] [DEBUG] [utils.bit_utils] Converting string to bits: 'xgvzdfsv'
[2025-06-29 16:06:21,743] [DEBUG] [utils.bit_utils] String converted to 64 bits.
[2025-06-29 16:06:21,743] [DEBUG] [utils.bit_utils] Adding header for message length: 64 bits
[2025-06-29 16:06:21,743] [DEBUG] [utils.bit_utils] Converted integer 64 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0]
[2025-06-29 16:06:21,743] [DEBUG] [utils.bit_utils] Total bitstream length after header = 80
[2025-06-29 16:06:21,743] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 16:06:21,765] [DEBUG] [routes.watermark_routes] Saving original image to: /home/gowtham/dwt-watermarking/backend/uploads/original/7bb900f3-de6f-4532-a71c-011d5090b970_original.png
[2025-06-29 16:06:21,766] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/7bb900f3-de6f-4532-a71c-011d5090b970_original.png
[2025-06-29 16:06:21,786] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 16:06:21,786] [DEBUG] [routes.watermark_routes] Saving watermarked image to: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/7bb900f3-de6f-4532-a71c-011d5090b970_watermarked.png
[2025-06-29 16:06:21,786] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/7bb900f3-de6f-4532-a71c-011d5090b970_watermarked.png
[2025-06-29 16:06:21,807] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 16:06:21,807] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 16:06:21,807] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/7bb900f3-de6f-4532-a71c-011d5090b970_watermarked.png
[2025-06-29 16:06:21,808] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 16:06:21,808] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 16:06:21,812] [INFO] [__main__] App context teardown complete.
[2025-06-29 16:06:33,856] [DEBUG] [__main__] Received a new request.
[2025-06-29 16:06:33,856] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 16:06:33,862] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 16:06:33,862] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 16:06:33,872] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 16:06:33,873] [DEBUG] [routes.watermark_routes] Image loaded. Shape = (840, 700, 3)
[2025-06-29 16:06:33,873] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 16:06:33,888] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 16:06:33,889] [DEBUG] [routes.watermark_routes] Bitstream length (message only): 0 bits
[2025-06-29 16:06:33,889] [DEBUG] [routes.watermark_routes] Converting extracted bits back to string...
[2025-06-29 16:06:33,889] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 0
[2025-06-29 16:06:33,889] [DEBUG] [utils.bit_utils] Bits successfully converted to string: ''
[2025-06-29 16:06:33,889] [DEBUG] [routes.watermark_routes] Extracted message: ''
[2025-06-29 16:06:33,889] [INFO] [routes.watermark_routes] Watermark extraction successful.
[2025-06-29 16:06:33,890] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 16:09:58 ==========


========== New Session: 2025-06-29 16:09:58 ==========


========== New Session: 2025-06-29 16:09:58 ==========


========== New Session: 2025-06-29 16:09:58 ==========
[2025-06-29 16:09:58,929] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:09:58,930] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:09:58,931] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:09:59 ==========


========== New Session: 2025-06-29 16:09:59 ==========


========== New Session: 2025-06-29 16:09:59 ==========


========== New Session: 2025-06-29 16:09:59 ==========
[2025-06-29 16:09:59,114] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:09:59,114] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:09:59,115] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:10:17 ==========


========== New Session: 2025-06-29 16:10:17 ==========


========== New Session: 2025-06-29 16:10:17 ==========


========== New Session: 2025-06-29 16:10:17 ==========
[2025-06-29 16:10:17,432] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:10:17,432] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:10:17,433] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:10:20 ==========


========== New Session: 2025-06-29 16:10:20 ==========


========== New Session: 2025-06-29 16:10:20 ==========


========== New Session: 2025-06-29 16:10:20 ==========
[2025-06-29 16:10:20,616] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:10:20,617] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:10:20,618] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 16:10:20 ==========


========== New Session: 2025-06-29 16:10:20 ==========


========== New Session: 2025-06-29 16:10:20 ==========


========== New Session: 2025-06-29 16:10:20 ==========
[2025-06-29 16:10:20,802] [INFO] [__main__] Launching Flask server...
[2025-06-29 16:10:20,802] [INFO] [__main__] Creating Flask app...
[2025-06-29 16:10:20,804] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 16:10:38,028] [DEBUG] [__main__] Received a new request.
[2025-06-29 16:10:38,028] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 16:10:38,031] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 16:10:38,031] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 16:10:38,048] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 16:10:38,048] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 16:10:38,048] [DEBUG] [utils.bit_utils] Converting string to bits: 'gasdfa'
[2025-06-29 16:10:38,048] [DEBUG] [utils.bit_utils] String converted to 48 bits.
[2025-06-29 16:10:38,048] [DEBUG] [utils.bit_utils] Adding header for message length: 48 bits
[2025-06-29 16:10:38,048] [DEBUG] [utils.bit_utils] Converted integer 48 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-06-29 16:10:38,048] [DEBUG] [utils.bit_utils] Total bitstream length after header = 64
[2025-06-29 16:10:38,048] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 16:10:38,072] [DEBUG] [routes.watermark_routes] Saving original image to: /home/gowtham/dwt-watermarking/backend/uploads/original/f0230122-0c64-48f9-9c66-efe59281f431_original.png
[2025-06-29 16:10:38,072] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/f0230122-0c64-48f9-9c66-efe59281f431_original.png
[2025-06-29 16:10:38,092] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 16:10:38,092] [DEBUG] [routes.watermark_routes] Saving watermarked image to: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f0230122-0c64-48f9-9c66-efe59281f431_watermarked.png
[2025-06-29 16:10:38,092] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f0230122-0c64-48f9-9c66-efe59281f431_watermarked.png
[2025-06-29 16:10:38,112] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 16:10:38,112] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 16:10:38,112] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f0230122-0c64-48f9-9c66-efe59281f431_watermarked.png
[2025-06-29 16:10:38,113] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 16:10:38,113] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 16:10:38,117] [INFO] [__main__] App context teardown complete.
[2025-06-29 16:10:47,691] [DEBUG] [__main__] Received a new request.
[2025-06-29 16:10:47,691] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 16:10:47,696] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 16:10:47,696] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 16:10:47,707] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 16:10:47,707] [DEBUG] [routes.watermark_routes] Image loaded. Shape = (840, 700, 3)
[2025-06-29 16:10:47,707] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 16:10:47,719] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 16:10:47,719] [ERROR] [routes.watermark_routes] Watermark extraction failed due to an internal error.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 93, in extract_watermark
    message_length = extract_message_length(full_bitstream)
  File "/home/gowtham/dwt-watermarking/backend/core/dwt_engine.py", line 86, in extract_message_length
    message_length = bits_to_int(header_bits)
  File "/home/gowtham/dwt-watermarking/backend/utils/bit_utils.py", line 42, in bits_to_int
    value = int("".join(str(b) for b in bits), 2)
ValueError: invalid literal for int() with base 2: ''
[2025-06-29 16:10:47,720] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 17:48:16 ==========


========== New Session: 2025-06-29 17:48:16 ==========


========== New Session: 2025-06-29 17:48:16 ==========


========== New Session: 2025-06-29 17:48:16 ==========
[2025-06-29 17:48:16,493] [INFO] [__main__] Launching Flask server...
[2025-06-29 17:48:16,493] [INFO] [__main__] Creating Flask app...
[2025-06-29 17:48:16,495] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 17:48:31 ==========


========== New Session: 2025-06-29 17:48:31 ==========


========== New Session: 2025-06-29 17:48:31 ==========


========== New Session: 2025-06-29 17:48:31 ==========
[2025-06-29 17:48:31,825] [INFO] [__main__] Launching Flask server...
[2025-06-29 17:48:31,825] [INFO] [__main__] Creating Flask app...
[2025-06-29 17:48:31,826] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 17:49:34 ==========


========== New Session: 2025-06-29 17:49:34 ==========


========== New Session: 2025-06-29 17:49:34 ==========


========== New Session: 2025-06-29 17:49:34 ==========
[2025-06-29 17:49:34,379] [INFO] [__main__] Launching Flask server...
[2025-06-29 17:49:34,379] [INFO] [__main__] Creating Flask app...
[2025-06-29 17:49:34,380] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 17:50:16 ==========


========== New Session: 2025-06-29 17:50:16 ==========


========== New Session: 2025-06-29 17:50:16 ==========


========== New Session: 2025-06-29 17:50:16 ==========
[2025-06-29 17:50:16,316] [INFO] [__main__] Launching Flask server...
[2025-06-29 17:50:16,316] [INFO] [__main__] Creating Flask app...
[2025-06-29 17:50:16,317] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 17:50:16 ==========


========== New Session: 2025-06-29 17:50:16 ==========


========== New Session: 2025-06-29 17:50:16 ==========


========== New Session: 2025-06-29 17:50:16 ==========
[2025-06-29 17:50:16,505] [INFO] [__main__] Launching Flask server...
[2025-06-29 17:50:16,505] [INFO] [__main__] Creating Flask app...
[2025-06-29 17:50:16,506] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 17:50:33,948] [DEBUG] [__main__] Received a new request.
[2025-06-29 17:50:33,948] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 17:50:33,953] [DEBUG] [routes.watermark_routes] Loading image for embedding...
[2025-06-29 17:50:33,953] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 17:50:33,970] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 17:50:33,970] [DEBUG] [routes.watermark_routes] Converting message to bits and adding header...
[2025-06-29 17:50:33,970] [DEBUG] [utils.bit_utils] Converting string to bits: 'gvasf'
[2025-06-29 17:50:33,970] [DEBUG] [utils.bit_utils] String converted to 40 bits.
[2025-06-29 17:50:33,970] [DEBUG] [utils.bit_utils] Preparing header for message length: 40 bits
[2025-06-29 17:50:33,970] [DEBUG] [utils.bit_utils] Converted integer 40 to 16-bit header: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0]
[2025-06-29 17:50:33,970] [DEBUG] [utils.bit_utils] Total bitstream length after header = 56 bits
[2025-06-29 17:50:33,970] [DEBUG] [routes.watermark_routes] Embedding 56 bits into image...
[2025-06-29 17:50:33,991] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/60c8e321e5e14979b912358429487873_orig.png
[2025-06-29 17:50:34,010] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 17:50:34,010] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/60c8e321e5e14979b912358429487873_wm.png
[2025-06-29 17:50:34,029] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 17:50:34,029] [INFO] [routes.watermark_routes] Embedding successful, encoding to base64...
[2025-06-29 17:50:34,029] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/60c8e321e5e14979b912358429487873_wm.png
[2025-06-29 17:50:34,030] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 17:50:34,030] [INFO] [routes.watermark_routes] POST /watermark completed successfully.
[2025-06-29 17:50:34,034] [INFO] [__main__] App context teardown complete.
[2025-06-29 17:50:41,790] [DEBUG] [__main__] Received a new request.
[2025-06-29 17:50:41,791] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 17:50:41,795] [DEBUG] [routes.watermark_routes] Loading watermarked image for extraction...
[2025-06-29 17:50:41,796] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 17:50:41,806] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 17:50:41,807] [DEBUG] [routes.watermark_routes] Extracting full bitstream from image...
[2025-06-29 17:50:42,059] [DEBUG] [routes.watermark_routes] Parsing header and message bits...
[2025-06-29 17:50:42,059] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 17:50:42,059] [DEBUG] [utils.bit_utils] Extracted header: message_length = 0 bits
[2025-06-29 17:50:42,059] [DEBUG] [routes.watermark_routes] Message length from header: 0 bits
[2025-06-29 17:50:42,059] [DEBUG] [routes.watermark_routes] Converting message bits to string...
[2025-06-29 17:50:42,059] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 0
[2025-06-29 17:50:42,059] [DEBUG] [utils.bit_utils] Bits successfully converted to string: ''
[2025-06-29 17:50:42,059] [INFO] [routes.watermark_routes] POST /extract completed successfully.
[2025-06-29 17:50:42,060] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 19:16:47 ==========


========== New Session: 2025-06-29 19:16:47 ==========


========== New Session: 2025-06-29 19:16:47 ==========


========== New Session: 2025-06-29 19:16:47 ==========
[2025-06-29 19:16:47,926] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:16:47,926] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:16:47,928] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:16:50 ==========


========== New Session: 2025-06-29 19:16:50 ==========


========== New Session: 2025-06-29 19:23:06 ==========


========== New Session: 2025-06-29 19:23:06 ==========


========== New Session: 2025-06-29 19:23:06 ==========


========== New Session: 2025-06-29 19:23:06 ==========
[2025-06-29 19:23:06,555] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:23:06,555] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:23:06,556] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:23:06 ==========


========== New Session: 2025-06-29 19:23:06 ==========


========== New Session: 2025-06-29 19:23:06 ==========


========== New Session: 2025-06-29 19:23:06 ==========
[2025-06-29 19:23:06,734] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:23:06,735] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:23:06,736] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 19:23:18,228] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:23:18,228] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 19:23:18,233] [DEBUG] [routes.watermark_routes] Loading image for embedding...
[2025-06-29 19:23:18,233] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:23:18,250] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:23:18,250] [DEBUG] [routes.watermark_routes] Converting message to bits and adding header...
[2025-06-29 19:23:18,250] [DEBUG] [utils.bit_utils] Converting string to bits: 'gbnsdgs'
[2025-06-29 19:23:18,250] [DEBUG] [utils.bit_utils] String converted to 56 bits.
[2025-06-29 19:23:18,250] [DEBUG] [utils.bit_utils] Preparing header for message length: 56 bits
[2025-06-29 19:23:18,250] [DEBUG] [utils.bit_utils] Converted integer 56 to 16-bit header: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0]
[2025-06-29 19:23:18,250] [DEBUG] [utils.bit_utils] Total bitstream length after header = 72 bits
[2025-06-29 19:23:18,250] [DEBUG] [routes.watermark_routes] Embedding 72 bits into image...
[2025-06-29 19:23:18,274] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/2c88e94d7e544e3ba8786635b7700d15_orig.png
[2025-06-29 19:23:18,294] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:23:18,295] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2c88e94d7e544e3ba8786635b7700d15_wm.png
[2025-06-29 19:23:18,314] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:23:18,314] [INFO] [routes.watermark_routes] Embedding successful, encoding to base64...
[2025-06-29 19:23:18,314] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2c88e94d7e544e3ba8786635b7700d15_wm.png
[2025-06-29 19:23:18,315] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 19:23:18,315] [INFO] [routes.watermark_routes] POST /watermark completed successfully.
[2025-06-29 19:23:18,320] [INFO] [__main__] App context teardown complete.
[2025-06-29 19:23:27,345] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:23:27,345] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 19:23:27,350] [DEBUG] [routes.watermark_routes] Loading watermarked image for extraction...
[2025-06-29 19:23:27,351] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:23:27,361] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:23:27,362] [DEBUG] [routes.watermark_routes] Extracting full bitstream from image...
[2025-06-29 19:23:27,623] [DEBUG] [routes.watermark_routes] First 32 bits extracted: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-06-29 19:23:27,623] [DEBUG] [routes.watermark_routes] Total bits extracted: 147000
[2025-06-29 19:23:27,623] [DEBUG] [routes.watermark_routes] Parsing header and message bits...
[2025-06-29 19:23:27,623] [DEBUG] [utils.bit_utils] Extracted header bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-06-29 19:23:27,624] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 19:23:27,624] [DEBUG] [utils.bit_utils] Message length from header: 0
[2025-06-29 19:23:27,624] [DEBUG] [utils.bit_utils] Extracted header: message_length = 0 bits
[2025-06-29 19:23:27,624] [DEBUG] [routes.watermark_routes] Message length from header: 0 bits
[2025-06-29 19:23:27,624] [DEBUG] [routes.watermark_routes] Converting message bits to string...
[2025-06-29 19:23:27,624] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 0
[2025-06-29 19:23:27,624] [DEBUG] [utils.bit_utils] Bits successfully converted to string: ''
[2025-06-29 19:23:27,624] [INFO] [routes.watermark_routes] POST /extract completed successfully.
[2025-06-29 19:23:27,625] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 19:32:01 ==========


========== New Session: 2025-06-29 19:32:01 ==========


========== New Session: 2025-06-29 19:32:01 ==========


========== New Session: 2025-06-29 19:32:01 ==========
[2025-06-29 19:32:01,848] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:32:01,848] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:32:01,849] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:32:16 ==========


========== New Session: 2025-06-29 19:32:16 ==========


========== New Session: 2025-06-29 19:32:16 ==========


========== New Session: 2025-06-29 19:32:16 ==========
[2025-06-29 19:32:16,654] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:32:16,654] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:32:16,655] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:32:16 ==========


========== New Session: 2025-06-29 19:32:16 ==========


========== New Session: 2025-06-29 19:32:16 ==========


========== New Session: 2025-06-29 19:32:16 ==========
[2025-06-29 19:32:16,841] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:32:16,841] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:32:16,842] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 19:32:36,059] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:32:36,059] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 19:32:36,064] [DEBUG] [routes.watermark_routes] Loading image for embedding...
[2025-06-29 19:32:36,064] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:32:36,082] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:32:36,083] [DEBUG] [routes.watermark_routes] Converting message to bits and adding header...
[2025-06-29 19:32:36,083] [DEBUG] [utils.bit_utils] Converting string to bits: 'dfsdfsae'
[2025-06-29 19:32:36,083] [DEBUG] [utils.bit_utils] String converted to 64 bits.
[2025-06-29 19:32:36,083] [DEBUG] [utils.bit_utils] Preparing header for message length: 64 bits
[2025-06-29 19:32:36,083] [DEBUG] [utils.bit_utils] Converted integer 64 to 16-bit header: [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0]
[2025-06-29 19:32:36,083] [DEBUG] [utils.bit_utils] Total bitstream length after header = 80 bits
[2025-06-29 19:32:36,083] [DEBUG] [routes.watermark_routes] Embedding 80 bits into image...
[2025-06-29 19:32:36,106] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/ac4971cb595b4eedb22d54bffa28542c_orig.png
[2025-06-29 19:32:36,127] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:32:36,127] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ac4971cb595b4eedb22d54bffa28542c_wm.png
[2025-06-29 19:32:36,146] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:32:36,147] [INFO] [routes.watermark_routes] Embedding successful, encoding to base64...
[2025-06-29 19:32:36,147] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ac4971cb595b4eedb22d54bffa28542c_wm.png
[2025-06-29 19:32:36,148] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 19:32:36,148] [INFO] [routes.watermark_routes] POST /watermark completed successfully.
[2025-06-29 19:32:36,152] [INFO] [__main__] App context teardown complete.
[2025-06-29 19:32:45,447] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:32:45,447] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 19:32:45,452] [DEBUG] [routes.watermark_routes] Loading watermarked image for extraction...
[2025-06-29 19:32:45,453] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:32:45,463] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:32:45,463] [DEBUG] [routes.watermark_routes] Extracting full bitstream from image...
[2025-06-29 19:32:45,720] [DEBUG] [routes.watermark_routes] First 32 bits extracted: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-06-29 19:32:45,720] [DEBUG] [routes.watermark_routes] Total bits extracted: 147000
[2025-06-29 19:32:45,720] [DEBUG] [routes.watermark_routes] Parsing header and message bits...
[2025-06-29 19:32:45,720] [DEBUG] [utils.bit_utils] Extracted header bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-06-29 19:32:45,720] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 19:32:45,720] [DEBUG] [utils.bit_utils] Message length from header: 0
[2025-06-29 19:32:45,720] [DEBUG] [utils.bit_utils] Extracted header: message_length = 0 bits
[2025-06-29 19:32:45,720] [DEBUG] [routes.watermark_routes] Message length from header: 0 bits
[2025-06-29 19:32:45,720] [DEBUG] [routes.watermark_routes] Converting message bits to string...
[2025-06-29 19:32:45,720] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 0
[2025-06-29 19:32:45,720] [DEBUG] [utils.bit_utils] Bits successfully converted to string: ''
[2025-06-29 19:32:45,720] [INFO] [routes.watermark_routes] POST /extract completed successfully.
[2025-06-29 19:32:45,721] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 19:33:49 ==========


========== New Session: 2025-06-29 19:33:49 ==========


========== New Session: 2025-06-29 19:33:49 ==========


========== New Session: 2025-06-29 19:33:49 ==========
[2025-06-29 19:33:49,534] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:33:49,534] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:33:49,535] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:33:50 ==========


========== New Session: 2025-06-29 19:33:50 ==========


========== New Session: 2025-06-29 19:34:09 ==========


========== New Session: 2025-06-29 19:34:09 ==========


========== New Session: 2025-06-29 19:34:09 ==========


========== New Session: 2025-06-29 19:34:09 ==========
[2025-06-29 19:34:09,363] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:34:09,364] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:34:09,365] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:34:09 ==========


========== New Session: 2025-06-29 19:34:09 ==========


========== New Session: 2025-06-29 19:34:09 ==========


========== New Session: 2025-06-29 19:34:09 ==========
[2025-06-29 19:34:09,546] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:34:09,546] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:34:09,548] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 19:34:23,348] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:34:23,349] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 19:34:23,353] [DEBUG] [routes.watermark_routes] Loading image for embedding...
[2025-06-29 19:34:23,353] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:34:23,370] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:34:23,370] [DEBUG] [routes.watermark_routes] Converting message to bits and adding header...
[2025-06-29 19:34:23,370] [DEBUG] [utils.bit_utils] Converting string to bits: 'sfgasd'
[2025-06-29 19:34:23,370] [DEBUG] [utils.bit_utils] String converted to 48 bits.
[2025-06-29 19:34:23,371] [DEBUG] [utils.bit_utils] Preparing header for message length: 48 bits
[2025-06-29 19:34:23,371] [DEBUG] [utils.bit_utils] Converted integer 48 to 16-bit header: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-06-29 19:34:23,371] [DEBUG] [utils.bit_utils] Total bitstream length after header = 64 bits
[2025-06-29 19:34:23,371] [DEBUG] [routes.watermark_routes] Embedding 64 bits into image...
[2025-06-29 19:34:23,393] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/bac3728911a44ef7800d4149a65e6fb8_orig.png
[2025-06-29 19:34:23,413] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:34:23,413] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bac3728911a44ef7800d4149a65e6fb8_wm.png
[2025-06-29 19:34:23,433] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:34:23,433] [INFO] [routes.watermark_routes] Embedding successful, encoding to base64...
[2025-06-29 19:34:23,433] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bac3728911a44ef7800d4149a65e6fb8_wm.png
[2025-06-29 19:34:23,435] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 19:34:23,435] [INFO] [routes.watermark_routes] POST /watermark completed successfully.
[2025-06-29 19:34:23,439] [INFO] [__main__] App context teardown complete.
[2025-06-29 19:34:30,642] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:34:30,642] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 19:34:30,647] [DEBUG] [routes.watermark_routes] Loading watermarked image for extraction...
[2025-06-29 19:34:30,648] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:34:30,659] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:34:30,659] [DEBUG] [routes.watermark_routes] Extracting full bitstream from image...
[2025-06-29 19:34:30,915] [DEBUG] [routes.watermark_routes] First 32 bits extracted: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-06-29 19:34:30,915] [DEBUG] [routes.watermark_routes] Total bits extracted: 147000
[2025-06-29 19:34:30,915] [DEBUG] [routes.watermark_routes] Parsing header and message bits...
[2025-06-29 19:34:30,915] [DEBUG] [utils.bit_utils] Extracted header bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-06-29 19:34:30,915] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 19:34:30,915] [DEBUG] [utils.bit_utils] Message length from header: 0
[2025-06-29 19:34:30,915] [DEBUG] [utils.bit_utils] Extracted header: message_length = 0 bits
[2025-06-29 19:34:30,915] [DEBUG] [routes.watermark_routes] Message length from header: 0 bits
[2025-06-29 19:34:30,915] [DEBUG] [routes.watermark_routes] Converting message bits to string...
[2025-06-29 19:34:30,915] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 0
[2025-06-29 19:34:30,915] [DEBUG] [utils.bit_utils] Bits successfully converted to string: ''
[2025-06-29 19:34:30,915] [INFO] [routes.watermark_routes] POST /extract completed successfully.
[2025-06-29 19:34:30,916] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 19:37:27 ==========


========== New Session: 2025-06-29 19:37:27 ==========


========== New Session: 2025-06-29 19:38:40 ==========


========== New Session: 2025-06-29 19:38:40 ==========


========== New Session: 2025-06-29 19:38:40 ==========


========== New Session: 2025-06-29 19:38:40 ==========


========== New Session: 2025-06-29 19:38:40 ==========
[2025-06-29 19:38:40,128] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:38:40,128] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:38:40,130] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:38:40 ==========


========== New Session: 2025-06-29 19:38:40 ==========


========== New Session: 2025-06-29 19:38:40 ==========


========== New Session: 2025-06-29 19:38:40 ==========


========== New Session: 2025-06-29 19:38:40 ==========
[2025-06-29 19:38:40,317] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:38:40,317] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:38:40,319] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 19:38:54,472] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:38:54,473] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 19:38:54,478] [DEBUG] [routes.watermark_routes] Loading image for embedding...
[2025-06-29 19:38:54,478] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:38:54,494] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:38:54,495] [DEBUG] [routes.watermark_routes] Converting message to bits and adding header...
[2025-06-29 19:38:54,495] [DEBUG] [utils.bit_utils] Converting string to bits: 'rgeasr'
[2025-06-29 19:38:54,495] [DEBUG] [utils.bit_utils] String converted to 48 bits.
[2025-06-29 19:38:54,495] [DEBUG] [utils.bit_utils] Preparing header for message length: 48 bits
[2025-06-29 19:38:54,495] [DEBUG] [utils.bit_utils] Converted integer 48 to 16-bit header: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-06-29 19:38:54,495] [DEBUG] [utils.bit_utils] Total bitstream length after header = 64 bits
[2025-06-29 19:38:54,495] [DEBUG] [routes.watermark_routes] Embedding 64 bits into image...
[2025-06-29 19:38:54,508] [DEBUG] [core.dwt_engine] Embedding into band: LH
[2025-06-29 19:38:54,508] [DEBUG] [core.dwt_engine] First 16 header bits to embed: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-06-29 19:38:54,508] [DEBUG] [core.dwt_engine] Total bits to embed: 64
[2025-06-29 19:38:54,509] [DEBUG] [core.dwt_engine] Parity check after embed: 64 bits recovered, 0 mismatches
[2025-06-29 19:38:54,510] [DEBUG] [core.dwt_engine] Parity check after embed: 64 bits recovered, 0 mismatches
[2025-06-29 19:38:54,517] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/54d4d4c202df407d81c2e96135b82ef4_orig.png
[2025-06-29 19:38:54,537] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:38:54,537] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/54d4d4c202df407d81c2e96135b82ef4_wm.png
[2025-06-29 19:38:54,557] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:38:54,557] [INFO] [routes.watermark_routes] Embedding successful, encoding to base64...
[2025-06-29 19:38:54,557] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/54d4d4c202df407d81c2e96135b82ef4_wm.png
[2025-06-29 19:38:54,558] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 19:38:54,558] [INFO] [routes.watermark_routes] POST /watermark completed successfully.
[2025-06-29 19:38:54,562] [INFO] [__main__] App context teardown complete.
[2025-06-29 19:39:01,230] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:39:01,230] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 19:39:01,235] [DEBUG] [routes.watermark_routes] Loading watermarked image for extraction...
[2025-06-29 19:39:01,235] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:39:01,246] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:39:01,246] [DEBUG] [routes.watermark_routes] Extracting full bitstream from image...
[2025-06-29 19:39:01,499] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-06-29 19:39:01,499] [DEBUG] [core.dwt_engine] Total bits extracted: 147000
[2025-06-29 19:39:01,499] [DEBUG] [routes.watermark_routes] First 32 bits extracted: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-06-29 19:39:01,499] [DEBUG] [routes.watermark_routes] Total bits extracted: 147000
[2025-06-29 19:39:01,499] [DEBUG] [routes.watermark_routes] Parsing header and message bits...
[2025-06-29 19:39:01,499] [DEBUG] [utils.bit_utils] Extracted header bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-06-29 19:39:01,500] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 19:39:01,500] [DEBUG] [utils.bit_utils] Message length from header: 0
[2025-06-29 19:39:01,500] [DEBUG] [utils.bit_utils] Extracted header: message_length = 0 bits
[2025-06-29 19:39:01,500] [DEBUG] [routes.watermark_routes] Message length from header: 0 bits
[2025-06-29 19:39:01,500] [DEBUG] [routes.watermark_routes] Converting message bits to string...
[2025-06-29 19:39:01,500] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 0
[2025-06-29 19:39:01,500] [DEBUG] [utils.bit_utils] Bits successfully converted to string: ''
[2025-06-29 19:39:01,500] [INFO] [routes.watermark_routes] POST /extract completed successfully.
[2025-06-29 19:39:01,501] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 19:50:31 ==========


========== New Session: 2025-06-29 19:50:31 ==========


========== New Session: 2025-06-29 19:50:31 ==========


========== New Session: 2025-06-29 19:50:51 ==========


========== New Session: 2025-06-29 19:50:51 ==========


========== New Session: 2025-06-29 19:50:51 ==========


========== New Session: 2025-06-29 19:50:51 ==========


========== New Session: 2025-06-29 19:50:51 ==========
[2025-06-29 19:50:51,804] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:50:51,804] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:50:51,806] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:50:51 ==========


========== New Session: 2025-06-29 19:50:51 ==========


========== New Session: 2025-06-29 19:50:51 ==========


========== New Session: 2025-06-29 19:50:51 ==========


========== New Session: 2025-06-29 19:50:51 ==========
[2025-06-29 19:50:51,988] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:50:51,988] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:50:51,989] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:51:53 ==========


========== New Session: 2025-06-29 19:51:53 ==========


========== New Session: 2025-06-29 19:51:53 ==========


========== New Session: 2025-06-29 19:53:08 ==========


========== New Session: 2025-06-29 19:53:08 ==========


========== New Session: 2025-06-29 19:53:08 ==========


========== New Session: 2025-06-29 19:53:08 ==========


========== New Session: 2025-06-29 19:53:08 ==========
[2025-06-29 19:53:08,393] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:53:08,394] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:53:08,395] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:53:08 ==========


========== New Session: 2025-06-29 19:53:08 ==========


========== New Session: 2025-06-29 19:53:08 ==========


========== New Session: 2025-06-29 19:53:08 ==========


========== New Session: 2025-06-29 19:53:08 ==========
[2025-06-29 19:53:08,576] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:53:08,577] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:53:08,578] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 19:53:39,889] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:53:39,889] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 19:53:39,894] [DEBUG] [routes.watermark_routes] Loading image for embedding...
[2025-06-29 19:53:39,894] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:53:39,911] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:53:39,911] [DEBUG] [routes.watermark_routes] Converting message to bits and adding header...
[2025-06-29 19:53:39,911] [DEBUG] [utils.bit_utils] Converting string to bits: 'wefawe'
[2025-06-29 19:53:39,911] [DEBUG] [utils.bit_utils] String converted to 48 bits.
[2025-06-29 19:53:39,911] [DEBUG] [utils.bit_utils] Preparing header for message length: 48 bits
[2025-06-29 19:53:39,911] [DEBUG] [utils.bit_utils] Converted integer 48 to 16-bit header: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-06-29 19:53:39,911] [DEBUG] [utils.bit_utils] Total bitstream length after header = 64 bits
[2025-06-29 19:53:39,911] [DEBUG] [routes.watermark_routes] Embedding 64 bits into image...
[2025-06-29 19:53:39,936] [DEBUG] [core.dwt_engine] Embedding 64 bits in Y channel parity
[2025-06-29 19:53:39,937] [DEBUG] [core.dwt_engine] Y-parity embed check: 64 bits embedded, 0 mismatches
[2025-06-29 19:53:39,938] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/890321b36d5845f6aa66a248c1132263_orig.png
[2025-06-29 19:53:39,957] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:53:39,957] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/890321b36d5845f6aa66a248c1132263_wm.png
[2025-06-29 19:53:39,977] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:53:39,977] [INFO] [routes.watermark_routes] Embedding successful, encoding to base64...
[2025-06-29 19:53:39,977] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/890321b36d5845f6aa66a248c1132263_wm.png
[2025-06-29 19:53:39,978] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 19:53:39,978] [INFO] [routes.watermark_routes] POST /watermark completed successfully.
[2025-06-29 19:53:39,982] [INFO] [__main__] App context teardown complete.
[2025-06-29 19:53:49,830] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:53:49,830] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 19:53:49,836] [DEBUG] [routes.watermark_routes] Loading watermarked image for extraction...
[2025-06-29 19:53:49,836] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:53:49,846] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:53:49,846] [DEBUG] [routes.watermark_routes] Extracting full bitstream from image...
[2025-06-29 19:53:49,846] [ERROR] [routes.watermark_routes] Extraction failed.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 81, in extract_watermark
    full_bits = extract_bits_from_dwt(image, band='LH')
TypeError: extract_bits_from_dwt() got an unexpected keyword argument 'band'
[2025-06-29 19:53:49,847] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-06-29 19:55:43 ==========


========== New Session: 2025-06-29 19:55:43 ==========


========== New Session: 2025-06-29 19:55:43 ==========


========== New Session: 2025-06-29 19:55:43 ==========


========== New Session: 2025-06-29 19:55:43 ==========
[2025-06-29 19:55:43,552] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:55:43,552] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:55:43,553] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:56:35 ==========


========== New Session: 2025-06-29 19:56:35 ==========


========== New Session: 2025-06-29 19:56:35 ==========


========== New Session: 2025-06-29 19:56:35 ==========


========== New Session: 2025-06-29 19:56:35 ==========
[2025-06-29 19:56:35,018] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:56:35,018] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:56:35,019] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:56:48 ==========


========== New Session: 2025-06-29 19:56:48 ==========


========== New Session: 2025-06-29 19:56:48 ==========


========== New Session: 2025-06-29 19:56:48 ==========


========== New Session: 2025-06-29 19:56:48 ==========
[2025-06-29 19:56:48,501] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:56:48,501] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:56:48,502] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-06-29 19:56:48 ==========


========== New Session: 2025-06-29 19:56:48 ==========


========== New Session: 2025-06-29 19:56:48 ==========


========== New Session: 2025-06-29 19:56:48 ==========


========== New Session: 2025-06-29 19:56:48 ==========
[2025-06-29 19:56:48,684] [INFO] [__main__] Launching Flask server...
[2025-06-29 19:56:48,684] [INFO] [__main__] Creating Flask app...
[2025-06-29 19:56:48,685] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 19:57:01,324] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:57:01,324] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 19:57:01,329] [DEBUG] [routes.watermark_routes] Loading image for embedding...
[2025-06-29 19:57:01,329] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:57:01,362] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (920, 1784, 3)
[2025-06-29 19:57:01,362] [DEBUG] [routes.watermark_routes] Converting message to bits and adding header...
[2025-06-29 19:57:01,362] [DEBUG] [utils.bit_utils] Converting string to bits: 'gdtg'
[2025-06-29 19:57:01,362] [DEBUG] [utils.bit_utils] String converted to 32 bits.
[2025-06-29 19:57:01,362] [DEBUG] [utils.bit_utils] Preparing header for message length: 32 bits
[2025-06-29 19:57:01,362] [DEBUG] [utils.bit_utils] Converted integer 32 to 16-bit header: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-06-29 19:57:01,362] [DEBUG] [utils.bit_utils] Total bitstream length after header = 48 bits
[2025-06-29 19:57:01,362] [DEBUG] [routes.watermark_routes] Embedding 48 bits using Y-channel parity...
[2025-06-29 19:57:01,422] [DEBUG] [core.dwt_engine] Embedding 48 bits in Y channel parity
[2025-06-29 19:57:01,423] [DEBUG] [core.dwt_engine] Y-parity embed check: 48 bits embedded, 0 mismatches
[2025-06-29 19:57:01,429] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/a2377cf67d704ec4b76b268e0496b096_orig.png
[2025-06-29 19:57:01,469] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:57:01,469] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/a2377cf67d704ec4b76b268e0496b096_wm.png
[2025-06-29 19:57:01,507] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:57:01,507] [INFO] [routes.watermark_routes] Embedding successful, encoding to base64...
[2025-06-29 19:57:01,507] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/a2377cf67d704ec4b76b268e0496b096_wm.png
[2025-06-29 19:57:01,509] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 19:57:01,509] [INFO] [routes.watermark_routes] POST /watermark completed successfully.
[2025-06-29 19:57:01,515] [INFO] [__main__] App context teardown complete.
[2025-06-29 19:57:09,777] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:57:09,777] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 19:57:09,783] [DEBUG] [routes.watermark_routes] Loading watermarked image for extraction...
[2025-06-29 19:57:09,784] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:57:09,808] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (920, 1784, 3)
[2025-06-29 19:57:09,808] [DEBUG] [routes.watermark_routes] Extracting full bitstream from Y-channel parity...
[2025-06-29 19:57:09,990] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 0]
[2025-06-29 19:57:09,990] [DEBUG] [core.dwt_engine] Total bits extracted: 1641280
[2025-06-29 19:57:09,990] [DEBUG] [routes.watermark_routes] First 32 bits extracted: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 0]
[2025-06-29 19:57:09,990] [DEBUG] [routes.watermark_routes] Total bits extracted: 1641280
[2025-06-29 19:57:09,990] [DEBUG] [routes.watermark_routes] Parsing header and message bits...
[2025-06-29 19:57:09,990] [DEBUG] [utils.bit_utils] Extracted header bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-06-29 19:57:09,991] [DEBUG] [utils.bit_utils] Converted bits to integer: 32
[2025-06-29 19:57:09,991] [DEBUG] [utils.bit_utils] Message length from header: 32
[2025-06-29 19:57:09,991] [DEBUG] [utils.bit_utils] Extracted header: message_length = 32 bits
[2025-06-29 19:57:09,991] [DEBUG] [routes.watermark_routes] Message length from header: 32 bits
[2025-06-29 19:57:09,991] [DEBUG] [routes.watermark_routes] Converting message bits to string...
[2025-06-29 19:57:09,991] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 32
[2025-06-29 19:57:09,991] [DEBUG] [utils.bit_utils] Bits successfully converted to string: 'gdtg'
[2025-06-29 19:57:09,991] [INFO] [routes.watermark_routes] POST /extract completed successfully.
[2025-06-29 19:57:09,995] [INFO] [__main__] App context teardown complete.
[2025-06-29 19:57:27,019] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:57:27,019] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 19:57:27,022] [DEBUG] [routes.watermark_routes] Loading image for embedding...
[2025-06-29 19:57:27,022] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:57:27,038] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:57:27,038] [DEBUG] [routes.watermark_routes] Converting message to bits and adding header...
[2025-06-29 19:57:27,038] [DEBUG] [utils.bit_utils] Converting string to bits: 'sfffg'
[2025-06-29 19:57:27,038] [DEBUG] [utils.bit_utils] String converted to 40 bits.
[2025-06-29 19:57:27,038] [DEBUG] [utils.bit_utils] Preparing header for message length: 40 bits
[2025-06-29 19:57:27,038] [DEBUG] [utils.bit_utils] Converted integer 40 to 16-bit header: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0]
[2025-06-29 19:57:27,038] [DEBUG] [utils.bit_utils] Total bitstream length after header = 56 bits
[2025-06-29 19:57:27,038] [DEBUG] [routes.watermark_routes] Embedding 56 bits using Y-channel parity...
[2025-06-29 19:57:27,058] [DEBUG] [core.dwt_engine] Embedding 56 bits in Y channel parity
[2025-06-29 19:57:27,059] [DEBUG] [core.dwt_engine] Y-parity embed check: 56 bits embedded, 0 mismatches
[2025-06-29 19:57:27,059] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/679d036f79444ea79c02ad09dacaf287_orig.png
[2025-06-29 19:57:27,078] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:57:27,078] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/679d036f79444ea79c02ad09dacaf287_wm.png
[2025-06-29 19:57:27,097] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:57:27,097] [INFO] [routes.watermark_routes] Embedding successful, encoding to base64...
[2025-06-29 19:57:27,097] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/679d036f79444ea79c02ad09dacaf287_wm.png
[2025-06-29 19:57:27,098] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 19:57:27,098] [INFO] [routes.watermark_routes] POST /watermark completed successfully.
[2025-06-29 19:57:27,101] [INFO] [__main__] App context teardown complete.
[2025-06-29 19:57:34,250] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:57:34,250] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 19:57:34,254] [DEBUG] [routes.watermark_routes] Loading watermarked image for extraction...
[2025-06-29 19:57:34,254] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:57:34,265] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:57:34,266] [DEBUG] [routes.watermark_routes] Extracting full bitstream from Y-channel parity...
[2025-06-29 19:57:34,328] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0]
[2025-06-29 19:57:34,328] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-06-29 19:57:34,328] [DEBUG] [routes.watermark_routes] First 32 bits extracted: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0]
[2025-06-29 19:57:34,328] [DEBUG] [routes.watermark_routes] Total bits extracted: 588000
[2025-06-29 19:57:34,328] [DEBUG] [routes.watermark_routes] Parsing header and message bits...
[2025-06-29 19:57:34,328] [DEBUG] [utils.bit_utils] Extracted header bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0]
[2025-06-29 19:57:34,328] [DEBUG] [utils.bit_utils] Converted bits to integer: 40
[2025-06-29 19:57:34,328] [DEBUG] [utils.bit_utils] Message length from header: 40
[2025-06-29 19:57:34,328] [DEBUG] [utils.bit_utils] Extracted header: message_length = 40 bits
[2025-06-29 19:57:34,328] [DEBUG] [routes.watermark_routes] Message length from header: 40 bits
[2025-06-29 19:57:34,328] [DEBUG] [routes.watermark_routes] Converting message bits to string...
[2025-06-29 19:57:34,328] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 40
[2025-06-29 19:57:34,328] [DEBUG] [utils.bit_utils] Bits successfully converted to string: 'sfffg'
[2025-06-29 19:57:34,328] [INFO] [routes.watermark_routes] POST /extract completed successfully.
[2025-06-29 19:57:34,330] [INFO] [__main__] App context teardown complete.
[2025-06-29 19:57:50,509] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:57:50,509] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 19:57:50,514] [DEBUG] [routes.watermark_routes] Loading image for embedding...
[2025-06-29 19:57:50,514] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:57:50,530] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:57:50,530] [DEBUG] [routes.watermark_routes] Converting message to bits and adding header...
[2025-06-29 19:57:50,530] [DEBUG] [utils.bit_utils] Converting string to bits: 'sfffggaeEFEAS11233'
[2025-06-29 19:57:50,530] [DEBUG] [utils.bit_utils] String converted to 144 bits.
[2025-06-29 19:57:50,530] [DEBUG] [utils.bit_utils] Preparing header for message length: 144 bits
[2025-06-29 19:57:50,530] [DEBUG] [utils.bit_utils] Converted integer 144 to 16-bit header: [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0]
[2025-06-29 19:57:50,530] [DEBUG] [utils.bit_utils] Total bitstream length after header = 160 bits
[2025-06-29 19:57:50,530] [DEBUG] [routes.watermark_routes] Embedding 160 bits using Y-channel parity...
[2025-06-29 19:57:50,543] [DEBUG] [core.dwt_engine] Embedding 160 bits in Y channel parity
[2025-06-29 19:57:50,543] [DEBUG] [core.dwt_engine] Y-parity embed check: 160 bits embedded, 0 mismatches
[2025-06-29 19:57:50,544] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/3518bd4915cf452e97c14d2d22038fcd_orig.png
[2025-06-29 19:57:50,563] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:57:50,564] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3518bd4915cf452e97c14d2d22038fcd_wm.png
[2025-06-29 19:57:50,584] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 19:57:50,584] [INFO] [routes.watermark_routes] Embedding successful, encoding to base64...
[2025-06-29 19:57:50,584] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3518bd4915cf452e97c14d2d22038fcd_wm.png
[2025-06-29 19:57:50,585] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 19:57:50,586] [INFO] [routes.watermark_routes] POST /watermark completed successfully.
[2025-06-29 19:57:50,589] [INFO] [__main__] App context teardown complete.
[2025-06-29 19:57:59,058] [DEBUG] [__main__] Received a new request.
[2025-06-29 19:57:59,058] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 19:57:59,062] [DEBUG] [routes.watermark_routes] Loading watermarked image for extraction...
[2025-06-29 19:57:59,063] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 19:57:59,074] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-06-29 19:57:59,074] [DEBUG] [routes.watermark_routes] Extracting full bitstream from Y-channel parity...
[2025-06-29 19:57:59,136] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0]
[2025-06-29 19:57:59,136] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-06-29 19:57:59,137] [DEBUG] [routes.watermark_routes] First 32 bits extracted: [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0]
[2025-06-29 19:57:59,137] [DEBUG] [routes.watermark_routes] Total bits extracted: 588000
[2025-06-29 19:57:59,137] [DEBUG] [routes.watermark_routes] Parsing header and message bits...
[2025-06-29 19:57:59,137] [DEBUG] [utils.bit_utils] Extracted header bits: [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0]
[2025-06-29 19:57:59,137] [DEBUG] [utils.bit_utils] Converted bits to integer: 144
[2025-06-29 19:57:59,137] [DEBUG] [utils.bit_utils] Message length from header: 144
[2025-06-29 19:57:59,137] [DEBUG] [utils.bit_utils] Extracted header: message_length = 144 bits
[2025-06-29 19:57:59,137] [DEBUG] [routes.watermark_routes] Message length from header: 144 bits
[2025-06-29 19:57:59,137] [DEBUG] [routes.watermark_routes] Converting message bits to string...
[2025-06-29 19:57:59,137] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 144
[2025-06-29 19:57:59,137] [DEBUG] [utils.bit_utils] Bits successfully converted to string: 'sfffggaeEFEAS11233'
[2025-06-29 19:57:59,137] [INFO] [routes.watermark_routes] POST /extract completed successfully.
[2025-06-29 19:57:59,139] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-01 14:47:40 ==========


========== New Session: 2025-07-01 14:47:40 ==========


========== New Session: 2025-07-01 14:47:40 ==========


========== New Session: 2025-07-01 14:47:40 ==========


========== New Session: 2025-07-01 14:47:40 ==========
[2025-07-01 14:47:40,860] [INFO] [__main__] Launching Flask server...
[2025-07-01 14:47:40,860] [INFO] [__main__] Creating Flask app...
[2025-07-01 14:47:40,861] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 14:47:41 ==========


========== New Session: 2025-07-01 14:47:41 ==========


========== New Session: 2025-07-01 14:47:41 ==========


========== New Session: 2025-07-01 14:47:41 ==========


========== New Session: 2025-07-01 14:47:41 ==========
[2025-07-01 14:47:41,065] [INFO] [__main__] Launching Flask server...
[2025-07-01 14:47:41,065] [INFO] [__main__] Creating Flask app...
[2025-07-01 14:47:41,066] [INFO] [__main__] Registering watermark blueprint...
[2025-07-01 14:47:44,901] [DEBUG] [__main__] Received a new request.
[2025-07-01 14:47:44,902] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-01 14:47:44,906] [DEBUG] [routes.watermark_routes] Loading watermarked image for extraction...
[2025-07-01 14:47:44,906] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 14:47:44,919] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 14:47:44,919] [DEBUG] [routes.watermark_routes] Extracting full bitstream from Y-channel parity...
[2025-07-01 14:47:44,990] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1]
[2025-07-01 14:47:44,990] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 14:47:44,991] [DEBUG] [routes.watermark_routes] First 32 bits extracted: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1]
[2025-07-01 14:47:44,991] [DEBUG] [routes.watermark_routes] Total bits extracted: 588000
[2025-07-01 14:47:44,991] [DEBUG] [routes.watermark_routes] Parsing header and message bits...
[2025-07-01 14:47:44,991] [DEBUG] [utils.bit_utils] Extracted header bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 14:47:44,991] [DEBUG] [utils.bit_utils] Converted bits to integer: 48
[2025-07-01 14:47:44,991] [DEBUG] [utils.bit_utils] Message length from header: 48
[2025-07-01 14:47:44,991] [DEBUG] [utils.bit_utils] Extracted header: message_length = 48 bits
[2025-07-01 14:47:44,991] [DEBUG] [routes.watermark_routes] Message length from header: 48 bits
[2025-07-01 14:47:44,991] [DEBUG] [routes.watermark_routes] Converting message bits to string...
[2025-07-01 14:47:44,991] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 48
[2025-07-01 14:47:44,991] [DEBUG] [utils.bit_utils] Bits successfully converted to string: 'ssdddd'
[2025-07-01 14:47:44,991] [INFO] [routes.watermark_routes] POST /extract completed successfully.
[2025-07-01 14:47:44,993] [INFO] [__main__] App context teardown complete.
[2025-07-01 14:55:22,247] [DEBUG] [__main__] Received a new request.
[2025-07-01 14:55:22,249] [INFO] [__main__] App context teardown complete.
[2025-07-01 14:55:22,288] [DEBUG] [__main__] Received a new request.
[2025-07-01 14:55:22,288] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-01 15:01:33 ==========


========== New Session: 2025-07-01 15:01:33 ==========


========== New Session: 2025-07-01 15:01:33 ==========


========== New Session: 2025-07-01 15:01:33 ==========


========== New Session: 2025-07-01 15:01:33 ==========
[2025-07-01 15:01:33,022] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:01:33,022] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:01:33,023] [INFO] [__main__] Registering watermark blueprint...
[2025-07-01 15:02:01,713] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:02:01,713] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-01 15:02:01,718] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:02:01,735] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:02:01,803] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-01 15:02:01,803] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:02:01,804] [DEBUG] [utils.bit_utils] Converted bits to integer: 65535
[2025-07-01 15:02:01,804] [DEBUG] [utils.bit_utils] Converted bits to integer: 23433
[2025-07-01 15:02:01,804] [DEBUG] [utils.bit_utils] Converted bits to integer: 41472
[2025-07-01 15:02:01,804] [DEBUG] [utils.bit_utils] Converted bits to integer: 24050
[2025-07-01 15:02:01,805] [DEBUG] [utils.bit_utils] Converted bits to integer: 20312
[2025-07-01 15:02:01,805] [DEBUG] [utils.bit_utils] Converted bits to integer: 2592
[2025-07-01 15:02:01,805] [DEBUG] [utils.bit_utils] Converted bits to integer: 51652
[2025-07-01 15:02:01,805] [DEBUG] [utils.bit_utils] Converted bits to integer: 35400
[2025-07-01 15:02:01,805] [DEBUG] [utils.bit_utils] Converted bits to integer: 5790
[2025-07-01 15:02:01,805] [DEBUG] [utils.bit_utils] Converted bits to integer: 5279
[2025-07-01 15:02:01,805] [DEBUG] [utils.bit_utils] Converted bits to integer: 6241
[2025-07-01 15:02:01,805] [DEBUG] [utils.bit_utils] Converted bits to integer: 62081
[2025-07-01 15:02:01,806] [DEBUG] [utils.bit_utils] Converted bits to integer: 24699
[2025-07-01 15:02:01,806] [DEBUG] [utils.bit_utils] Converted bits to integer: 39056
[2025-07-01 15:02:01,806] [DEBUG] [utils.bit_utils] Converted bits to integer: 24907
[2025-07-01 15:02:01,806] [DEBUG] [utils.bit_utils] Converted bits to integer: 1383
[2025-07-01 15:02:01,806] [DEBUG] [utils.bit_utils] Converted bits to integer: 28562
[2025-07-01 15:02:01,806] [DEBUG] [utils.bit_utils] Converted bits to integer: 26864
[2025-07-01 15:02:01,806] [DEBUG] [utils.bit_utils] Converted bits to integer: 6011
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Converted bits to integer: 7211
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Converted bits to integer: 14233
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Converted bits to integer: 38505
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Converted bits to integer: 48378
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Converting string to bits: 'gaae'
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] String converted to 32 bits.
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Preparing header for message length: 32 bits
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Converted integer 32 to 16-bit header: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Total bitstream length after header = 48 bits
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Preparing header for message length: 65535 bits
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Converted integer 65535 to 16-bit header: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-01 15:02:01,807] [DEBUG] [utils.bit_utils] Total bitstream length after header = 65551 bits
[2025-07-01 15:02:01,808] [DEBUG] [utils.bit_utils] Preparing header for message length: 23433 bits
[2025-07-01 15:02:01,808] [DEBUG] [utils.bit_utils] Converted integer 23433 to 16-bit header: [0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1]
[2025-07-01 15:02:01,808] [DEBUG] [utils.bit_utils] Total bitstream length after header = 23449 bits
[2025-07-01 15:02:01,808] [DEBUG] [utils.bit_utils] Preparing header for message length: 41472 bits
[2025-07-01 15:02:01,808] [DEBUG] [utils.bit_utils] Converted integer 41472 to 16-bit header: [1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-01 15:02:01,808] [DEBUG] [utils.bit_utils] Total bitstream length after header = 41488 bits
[2025-07-01 15:02:01,808] [DEBUG] [utils.bit_utils] Preparing header for message length: 24050 bits
[2025-07-01 15:02:01,808] [DEBUG] [utils.bit_utils] Converted integer 24050 to 16-bit header: [0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0]
[2025-07-01 15:02:01,808] [DEBUG] [utils.bit_utils] Total bitstream length after header = 24066 bits
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Preparing header for message length: 20312 bits
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Converted integer 20312 to 16-bit header: [0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0]
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Total bitstream length after header = 20328 bits
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Preparing header for message length: 2592 bits
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Converted integer 2592 to 16-bit header: [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Total bitstream length after header = 2608 bits
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Preparing header for message length: 51652 bits
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Converted integer 51652 to 16-bit header: [1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0]
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Total bitstream length after header = 51668 bits
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Preparing header for message length: 35400 bits
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Converted integer 35400 to 16-bit header: [1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0]
[2025-07-01 15:02:01,809] [DEBUG] [utils.bit_utils] Total bitstream length after header = 35416 bits
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Preparing header for message length: 5790 bits
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Converted integer 5790 to 16-bit header: [0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0]
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Total bitstream length after header = 5806 bits
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Preparing header for message length: 5279 bits
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Converted integer 5279 to 16-bit header: [0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1]
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Total bitstream length after header = 5295 bits
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Preparing header for message length: 6241 bits
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Converted integer 6241 to 16-bit header: [0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1]
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Total bitstream length after header = 6257 bits
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Preparing header for message length: 62081 bits
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Converted integer 62081 to 16-bit header: [1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1]
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Total bitstream length after header = 62097 bits
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Preparing header for message length: 24699 bits
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Converted integer 24699 to 16-bit header: [0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1]
[2025-07-01 15:02:01,810] [DEBUG] [utils.bit_utils] Total bitstream length after header = 24715 bits
[2025-07-01 15:02:01,812] [DEBUG] [utils.bit_utils] Preparing header for message length: 39056 bits
[2025-07-01 15:02:01,812] [DEBUG] [utils.bit_utils] Converted integer 39056 to 16-bit header: [1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0]
[2025-07-01 15:02:01,812] [DEBUG] [utils.bit_utils] Total bitstream length after header = 39072 bits
[2025-07-01 15:02:01,812] [DEBUG] [utils.bit_utils] Preparing header for message length: 24907 bits
[2025-07-01 15:02:01,812] [DEBUG] [utils.bit_utils] Converted integer 24907 to 16-bit header: [0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1]
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Total bitstream length after header = 24923 bits
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Preparing header for message length: 1383 bits
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Converted integer 1383 to 16-bit header: [0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1]
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Total bitstream length after header = 1399 bits
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Preparing header for message length: 28562 bits
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Converted integer 28562 to 16-bit header: [0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0]
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Total bitstream length after header = 28578 bits
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Preparing header for message length: 26864 bits
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Converted integer 26864 to 16-bit header: [0, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Total bitstream length after header = 26880 bits
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Preparing header for message length: 6011 bits
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Converted integer 6011 to 16-bit header: [0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1]
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Total bitstream length after header = 6027 bits
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Preparing header for message length: 7211 bits
[2025-07-01 15:02:01,813] [DEBUG] [utils.bit_utils] Converted integer 7211 to 16-bit header: [0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1]
[2025-07-01 15:02:01,814] [DEBUG] [utils.bit_utils] Total bitstream length after header = 7227 bits
[2025-07-01 15:02:01,814] [DEBUG] [utils.bit_utils] Preparing header for message length: 14233 bits
[2025-07-01 15:02:01,814] [DEBUG] [utils.bit_utils] Converted integer 14233 to 16-bit header: [0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1]
[2025-07-01 15:02:01,814] [DEBUG] [utils.bit_utils] Total bitstream length after header = 14249 bits
[2025-07-01 15:02:01,814] [DEBUG] [utils.bit_utils] Preparing header for message length: 38505 bits
[2025-07-01 15:02:01,814] [DEBUG] [utils.bit_utils] Converted integer 38505 to 16-bit header: [1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1]
[2025-07-01 15:02:01,814] [DEBUG] [utils.bit_utils] Total bitstream length after header = 38521 bits
[2025-07-01 15:02:01,814] [DEBUG] [routes.watermark_routes] Embedding total 555668 bits (old + new)
[2025-07-01 15:02:01,832] [DEBUG] [core.dwt_engine] Embedding 555668 bits in Y channel parity
[2025-07-01 15:02:02,026] [DEBUG] [core.dwt_engine] Y-parity embed check: 555668 bits embedded, 0 mismatches
[2025-07-01 15:02:02,027] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/84bfc3113c3a4c858bd99e8c4f4105ba_orig.png
[2025-07-01 15:02:02,046] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:02:02,046] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/84bfc3113c3a4c858bd99e8c4f4105ba_wm.png
[2025-07-01 15:02:02,064] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:02:02,064] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/84bfc3113c3a4c858bd99e8c4f4105ba_wm.png
[2025-07-01 15:02:02,065] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-01 15:02:02,065] [INFO] [routes.watermark_routes] POST /watermark completed successfully.
[2025-07-01 15:02:02,071] [INFO] [__main__] App context teardown complete.
[2025-07-01 15:02:10,255] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:02:10,255] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-01 15:02:10,260] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:02:10,271] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:02:10,332] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-01 15:02:10,332] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:02:10,332] [DEBUG] [utils.bit_utils] Converted bits to integer: 65535
[2025-07-01 15:02:10,332] [ERROR] [utils.bit_utils] Bit length is not a multiple of 8.
[2025-07-01 15:02:10,332] [INFO] [routes.watermark_routes] POST /extract completed successfully.
[2025-07-01 15:02:10,333] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-01 15:05:09 ==========


========== New Session: 2025-07-01 15:05:09 ==========


========== New Session: 2025-07-01 15:05:09 ==========


========== New Session: 2025-07-01 15:05:09 ==========
[2025-07-01 15:05:09,131] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:05:09,131] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:05:09,132] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:05:19 ==========


========== New Session: 2025-07-01 15:05:19 ==========


========== New Session: 2025-07-01 15:05:19 ==========


========== New Session: 2025-07-01 15:05:19 ==========
[2025-07-01 15:05:19,396] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:05:19,396] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:05:19,397] [INFO] [__main__] Registering watermark blueprint...
[2025-07-01 15:05:35,349] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:05:35,349] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-01 15:05:35,354] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:05:35,371] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:05:35,438] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-01 15:05:35,438] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:05:35,439] [DEBUG] [routes.watermark_routes] Embedding 80 bits (sig + 0 old + 1 new)
[2025-07-01 15:05:35,459] [DEBUG] [core.dwt_engine] Embedding 80 bits in Y channel parity
[2025-07-01 15:05:35,460] [DEBUG] [core.dwt_engine] Y-parity embed check: 80 bits embedded, 0 mismatches
[2025-07-01 15:05:35,461] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/d7e15b40017a45a5a472069ae2446c80_orig.png
[2025-07-01 15:05:35,480] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:05:35,480] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/d7e15b40017a45a5a472069ae2446c80_wm.png
[2025-07-01 15:05:35,498] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:05:35,498] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/d7e15b40017a45a5a472069ae2446c80_wm.png
[2025-07-01 15:05:35,499] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-01 15:05:35,503] [INFO] [__main__] App context teardown complete.
[2025-07-01 15:05:43,796] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:05:43,796] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-01 15:05:43,800] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:05:43,812] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:05:43,873] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:05:43,873] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:05:43,873] [ERROR] [routes.watermark_routes] Extraction failed.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 129, in extract_watermark
    messages.append(bits_to_string(segment))
  File "/home/gowtham/dwt-watermarking/backend/utils/bit_utils.py", line 20, in bits_to_string
    raise ValueError("Bit length must be a multiple of 8 to convert to string.")
ValueError: Bit length must be a multiple of 8 to convert to string.
[2025-07-01 15:05:43,875] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-01 15:07:09 ==========


========== New Session: 2025-07-01 15:07:09 ==========


========== New Session: 2025-07-01 15:07:09 ==========


========== New Session: 2025-07-01 15:07:09 ==========
[2025-07-01 15:07:09,072] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:07:09,072] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:07:09,073] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:07:26 ==========


========== New Session: 2025-07-01 15:07:26 ==========


========== New Session: 2025-07-01 15:07:26 ==========


========== New Session: 2025-07-01 15:07:26 ==========
[2025-07-01 15:07:26,363] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:07:26,363] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:07:26,364] [INFO] [__main__] Registering watermark blueprint...
[2025-07-01 15:07:39,217] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:07:39,221] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:07:39,238] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:07:39,303] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-01 15:07:39,303] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:07:39,304] [DEBUG] [routes.watermark_routes] Embedding 80 bits (sig + 0 old + 1 new)
[2025-07-01 15:07:39,321] [DEBUG] [core.dwt_engine] Embedding 80 bits in Y channel parity
[2025-07-01 15:07:39,322] [DEBUG] [core.dwt_engine] Y-parity embed check: 80 bits embedded, 0 mismatches
[2025-07-01 15:07:39,323] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/routes/../uploads/original/57e5e31099ee4104b5ac437632a7b558_orig.png
[2025-07-01 15:07:39,345] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:07:39,345] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/routes/../uploads/watermarked/57e5e31099ee4104b5ac437632a7b558_wm.png
[2025-07-01 15:07:39,364] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:07:39,364] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/routes/../uploads/watermarked/57e5e31099ee4104b5ac437632a7b558_wm.png
[2025-07-01 15:07:39,365] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-01 15:07:39,369] [INFO] [__main__] App context teardown complete.
[2025-07-01 15:07:45,085] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:07:45,089] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:07:45,101] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:07:45,165] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:07:45,165] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:07:45,166] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-01 15:09:07 ==========


========== New Session: 2025-07-01 15:09:07 ==========


========== New Session: 2025-07-01 15:09:07 ==========


========== New Session: 2025-07-01 15:09:07 ==========
[2025-07-01 15:09:07,282] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:09:07,282] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:09:07,283] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:09:07 ==========


========== New Session: 2025-07-01 15:09:07 ==========


========== New Session: 2025-07-01 15:09:07 ==========


========== New Session: 2025-07-01 15:09:07 ==========
[2025-07-01 15:09:07,464] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:09:07,465] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:09:07,466] [INFO] [__main__] Registering watermark blueprint...
[2025-07-01 15:09:23,377] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:09:23,382] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:09:23,399] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:09:23,466] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-01 15:09:23,466] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:09:23,466] [DEBUG] [routes.watermark_routes] Embedding 72 bits (sig + 0 old + 1 new)
[2025-07-01 15:09:23,489] [DEBUG] [core.dwt_engine] Embedding 72 bits in Y channel parity
[2025-07-01 15:09:23,489] [DEBUG] [core.dwt_engine] Y-parity embed check: 72 bits embedded, 0 mismatches
[2025-07-01 15:09:23,490] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/routes/../uploads/original/24a16375327145189339138aab29f8cb_orig.png
[2025-07-01 15:09:23,510] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:09:23,510] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/routes/../uploads/watermarked/24a16375327145189339138aab29f8cb_wm.png
[2025-07-01 15:09:23,528] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:09:23,528] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/routes/../uploads/watermarked/24a16375327145189339138aab29f8cb_wm.png
[2025-07-01 15:09:23,529] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-01 15:09:23,533] [INFO] [__main__] App context teardown complete.
[2025-07-01 15:09:55,000] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:09:55,006] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:09:55,017] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:09:55,079] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0]
[2025-07-01 15:09:55,079] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:09:55,080] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-01 15:11:06 ==========


========== New Session: 2025-07-01 15:11:06 ==========


========== New Session: 2025-07-01 15:11:06 ==========


========== New Session: 2025-07-01 15:11:06 ==========
[2025-07-01 15:11:06,206] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:11:06,206] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:11:06,207] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:13:13 ==========


========== New Session: 2025-07-01 15:13:20 ==========


========== New Session: 2025-07-01 15:15:43 ==========


========== New Session: 2025-07-01 15:15:43 ==========


========== New Session: 2025-07-01 15:15:43 ==========
[2025-07-01 15:15:43,025] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:15:43,025] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:15:43,026] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:15:43 ==========


========== New Session: 2025-07-01 15:15:43 ==========


========== New Session: 2025-07-01 15:15:43 ==========
[2025-07-01 15:15:43,202] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:15:43,202] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:15:43,203] [INFO] [__main__] Registering watermark blueprint...
[2025-07-01 15:16:53,699] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:16:53,704] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-01 15:19:31 ==========


========== New Session: 2025-07-01 15:19:31 ==========


========== New Session: 2025-07-01 15:19:31 ==========
[2025-07-01 15:19:31,375] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:19:31,375] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:19:31,376] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:19:33 ==========


========== New Session: 2025-07-01 15:19:33 ==========


========== New Session: 2025-07-01 15:19:33 ==========
[2025-07-01 15:19:33,600] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:19:33,600] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:19:33,601] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:19:57 ==========


========== New Session: 2025-07-01 15:19:57 ==========


========== New Session: 2025-07-01 15:19:57 ==========
[2025-07-01 15:19:57,939] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:19:57,940] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:19:57,941] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:19:58 ==========


========== New Session: 2025-07-01 15:19:58 ==========


========== New Session: 2025-07-01 15:19:58 ==========
[2025-07-01 15:19:58,120] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:19:58,120] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:19:58,121] [INFO] [__main__] Registering watermark blueprint...
[2025-07-01 15:20:13,686] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:20:13,690] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:20:13,707] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:20:13,771] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-01 15:20:13,771] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:20:13,790] [DEBUG] [core.dwt_engine] Embedding 88 bits in Y channel parity
[2025-07-01 15:20:13,790] [DEBUG] [core.dwt_engine] Y-parity embed check: 88 bits embedded, 0 mismatches
[2025-07-01 15:20:13,794] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-01 15:24:31 ==========


========== New Session: 2025-07-01 15:24:31 ==========


========== New Session: 2025-07-01 15:24:31 ==========
[2025-07-01 15:24:31,467] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:24:31,467] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:24:31,468] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:24:38 ==========


========== New Session: 2025-07-01 15:24:38 ==========


========== New Session: 2025-07-01 15:24:38 ==========
[2025-07-01 15:24:38,432] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:24:38,432] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:24:38,433] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:24:38 ==========


========== New Session: 2025-07-01 15:24:38 ==========


========== New Session: 2025-07-01 15:24:38 ==========
[2025-07-01 15:24:38,628] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:24:38,628] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:24:38,629] [INFO] [__main__] Registering watermark blueprint...
[2025-07-01 15:24:59,978] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:24:59,982] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:24:59,999] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:25:00,064] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-01 15:25:00,065] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:25:00,083] [DEBUG] [core.dwt_engine] Embedding 80 bits in Y channel parity
[2025-07-01 15:25:00,083] [DEBUG] [core.dwt_engine] Y-parity embed check: 80 bits embedded, 0 mismatches
[2025-07-01 15:25:00,085] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/652255f68f734e0c964dc8e849625c7a_orig.png
[2025-07-01 15:25:00,104] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:25:00,105] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/652255f68f734e0c964dc8e849625c7a_wm.png
[2025-07-01 15:25:00,123] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:25:00,123] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/652255f68f734e0c964dc8e849625c7a_wm.png
[2025-07-01 15:25:00,124] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-01 15:25:00,128] [INFO] [__main__] App context teardown complete.
[2025-07-01 15:25:10,673] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:25:10,677] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:25:10,689] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:25:10,748] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:25:10,748] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:25:10,749] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-01 15:26:37 ==========


========== New Session: 2025-07-01 15:26:37 ==========


========== New Session: 2025-07-01 15:26:37 ==========
[2025-07-01 15:26:37,342] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:26:37,343] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:26:37,343] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:26:58 ==========


========== New Session: 2025-07-01 15:26:58 ==========


========== New Session: 2025-07-01 15:26:58 ==========


========== New Session: 2025-07-01 15:26:58 ==========
[2025-07-01 15:26:58,655] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:26:58,655] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:26:58,656] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:27:03 ==========


========== New Session: 2025-07-01 15:27:03 ==========


========== New Session: 2025-07-01 15:27:03 ==========


========== New Session: 2025-07-01 15:27:03 ==========
[2025-07-01 15:27:03,054] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:27:03,054] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:27:03,055] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:27:03 ==========


========== New Session: 2025-07-01 15:27:03 ==========


========== New Session: 2025-07-01 15:27:03 ==========


========== New Session: 2025-07-01 15:27:03 ==========
[2025-07-01 15:27:03,233] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:27:03,233] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:27:03,234] [INFO] [__main__] Registering watermark blueprint...
[2025-07-01 15:27:18,821] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:27:18,821] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-01 15:27:18,825] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-24 15-26-09.png, content_type=image/png
[2025-07-01 15:27:18,825] [DEBUG] [routes.watermark_routes] Received message of length 6 characters
[2025-07-01 15:27:18,825] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-01 15:27:18,825] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:27:18,843] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:27:18,843] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-01 15:27:18,843] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-01 15:27:18,908] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-01 15:27:18,908] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:27:18,908] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-01 15:27:18,908] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-01 15:27:18,909] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-01 15:27:18,909] [INFO] [routes.watermark_routes] Signature not found in existing bitstream
[2025-07-01 15:27:18,909] [DEBUG] [routes.watermark_routes] No existing watermark messages to parse
[2025-07-01 15:27:18,909] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 1
[2025-07-01 15:27:18,909] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-01 15:27:18,909] [INFO] [routes.watermark_routes] Combined bitstream length: 80 bits
[2025-07-01 15:27:18,909] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-01 15:27:18,932] [DEBUG] [core.dwt_engine] Embedding 80 bits in Y channel parity
[2025-07-01 15:27:18,933] [DEBUG] [core.dwt_engine] Y-parity embed check: 80 bits embedded, 0 mismatches
[2025-07-01 15:27:18,934] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-01 15:27:18,934] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/aecc5849c401492ba98fde4d693fc40e_orig.png
[2025-07-01 15:27:18,934] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/aecc5849c401492ba98fde4d693fc40e_orig.png
[2025-07-01 15:27:18,953] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:27:18,954] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-01 15:27:18,954] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/aecc5849c401492ba98fde4d693fc40e_wm.png
[2025-07-01 15:27:18,954] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/aecc5849c401492ba98fde4d693fc40e_wm.png
[2025-07-01 15:27:18,973] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:27:18,973] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-01 15:27:18,973] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/aecc5849c401492ba98fde4d693fc40e_wm.png to base64
[2025-07-01 15:27:18,973] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/aecc5849c401492ba98fde4d693fc40e_wm.png
[2025-07-01 15:27:18,974] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-01 15:27:18,974] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-01 15:27:18,974] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-01 15:27:18,978] [INFO] [__main__] App context teardown complete.
[2025-07-01 15:27:31,546] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:27:31,546] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-01 15:27:31,551] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=aecc5849c401492ba98fde4d693fc40e_wm.png
[2025-07-01 15:27:31,551] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:27:31,562] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:27:31,562] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-01 15:27:31,562] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-01 15:27:31,626] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:27:31,626] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:27:31,626] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-01 15:27:31,626] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:27:31,626] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-01 15:27:31,626] [INFO] [routes.watermark_routes] Valid signature detected; proceeding to parse messages
[2025-07-01 15:27:31,626] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=48 bits
[2025-07-01 15:27:31,626] [INFO] [routes.watermark_routes] Extracted message: 'wefawe'
[2025-07-01 15:27:31,626] [DEBUG] [routes.watermark_routes] Header at cursor 80: length=65535 bits
[2025-07-01 15:27:31,626] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 80: length=65535. Stopping parse.
[2025-07-01 15:27:31,626] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-01 15:27:31,628] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-01 15:30:00 ==========


========== New Session: 2025-07-01 15:30:00 ==========


========== New Session: 2025-07-01 15:30:00 ==========


========== New Session: 2025-07-01 15:30:00 ==========
[2025-07-01 15:30:00,962] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:30:00,962] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:30:00,963] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-01 15:30:01 ==========


========== New Session: 2025-07-01 15:30:01 ==========


========== New Session: 2025-07-01 15:30:01 ==========


========== New Session: 2025-07-01 15:30:01 ==========
[2025-07-01 15:30:01,172] [INFO] [__main__] Launching Flask server...
[2025-07-01 15:30:01,172] [INFO] [__main__] Creating Flask app...
[2025-07-01 15:30:01,173] [INFO] [__main__] Registering watermark blueprint...
[2025-07-01 15:31:45,851] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:31:45,852] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-01 15:31:45,856] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=aecc5849c401492ba98fde4d693fc40e_wm.png
[2025-07-01 15:31:45,856] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:31:45,868] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:31:45,868] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-01 15:31:45,868] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-01 15:31:45,934] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:31:45,934] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:31:45,934] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-01 15:31:45,934] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:31:45,935] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-01 15:31:45,935] [INFO] [routes.watermark_routes] Valid signature detected; proceeding to parse messages
[2025-07-01 15:31:45,935] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=48 bits
[2025-07-01 15:31:45,935] [INFO] [routes.watermark_routes] Extracted message: 'wefawe'
[2025-07-01 15:31:45,935] [DEBUG] [routes.watermark_routes] Header at cursor 80: length=65535 bits
[2025-07-01 15:31:45,935] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 80: length=65535. Stopping parse.
[2025-07-01 15:31:45,935] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-01 15:31:45,937] [INFO] [__main__] App context teardown complete.
[2025-07-01 15:31:58,009] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:31:58,009] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-01 15:31:58,013] [DEBUG] [routes.watermark_routes] Received file: filename=aecc5849c401492ba98fde4d693fc40e_wm.png, content_type=image/png
[2025-07-01 15:31:58,013] [DEBUG] [routes.watermark_routes] Received message of length 6 characters
[2025-07-01 15:31:58,013] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-01 15:31:58,013] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:31:58,024] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:31:58,025] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-01 15:31:58,025] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-01 15:31:58,088] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:31:58,088] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:31:58,088] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-01 15:31:58,088] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:31:58,088] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-01 15:31:58,088] [INFO] [routes.watermark_routes] Signature found in existing bitstream
[2025-07-01 15:31:58,088] [DEBUG] [routes.watermark_routes] Parsing existing messages from extracted bitstream
[2025-07-01 15:31:58,088] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=48 bits
[2025-07-01 15:31:58,088] [INFO] [routes.watermark_routes] Parsed existing message: 'wefawe' (length=48 bits)
[2025-07-01 15:31:58,088] [DEBUG] [routes.watermark_routes] Header at cursor 80: length=65535 bits
[2025-07-01 15:31:58,088] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 80: length=65535. Stopping parse.
[2025-07-01 15:31:58,088] [INFO] [routes.watermark_routes] Total existing messages parsed: 1
[2025-07-01 15:31:58,088] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 2
[2025-07-01 15:31:58,088] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-01 15:31:58,088] [INFO] [routes.watermark_routes] Combined bitstream length: 144 bits
[2025-07-01 15:31:58,088] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-01 15:31:58,107] [DEBUG] [core.dwt_engine] Embedding 144 bits in Y channel parity
[2025-07-01 15:31:58,108] [DEBUG] [core.dwt_engine] Y-parity embed check: 144 bits embedded, 0 mismatches
[2025-07-01 15:31:58,109] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-01 15:31:58,109] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/726fcd3be4f24f978799faf9d0918b85_orig.png
[2025-07-01 15:31:58,109] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/726fcd3be4f24f978799faf9d0918b85_orig.png
[2025-07-01 15:31:58,128] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:31:58,128] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-01 15:31:58,128] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/726fcd3be4f24f978799faf9d0918b85_wm.png
[2025-07-01 15:31:58,128] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/726fcd3be4f24f978799faf9d0918b85_wm.png
[2025-07-01 15:31:58,147] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 15:31:58,147] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-01 15:31:58,147] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/726fcd3be4f24f978799faf9d0918b85_wm.png to base64
[2025-07-01 15:31:58,147] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/726fcd3be4f24f978799faf9d0918b85_wm.png
[2025-07-01 15:31:58,148] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-01 15:31:58,148] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-01 15:31:58,148] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-01 15:31:58,153] [INFO] [__main__] App context teardown complete.
[2025-07-01 15:32:07,086] [DEBUG] [__main__] Received a new request.
[2025-07-01 15:32:07,086] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-01 15:32:07,090] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=726fcd3be4f24f978799faf9d0918b85_wm.png
[2025-07-01 15:32:07,090] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 15:32:07,102] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 15:32:07,102] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-01 15:32:07,102] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-01 15:32:07,164] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:32:07,164] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 15:32:07,164] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-01 15:32:07,164] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 15:32:07,164] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-01 15:32:07,164] [INFO] [routes.watermark_routes] Valid signature detected; proceeding to parse messages
[2025-07-01 15:32:07,165] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=48 bits
[2025-07-01 15:32:07,165] [INFO] [routes.watermark_routes] Extracted message: 'wefawe'
[2025-07-01 15:32:07,165] [DEBUG] [routes.watermark_routes] Header at cursor 80: length=48 bits
[2025-07-01 15:32:07,165] [INFO] [routes.watermark_routes] Extracted message: 'rfgwer'
[2025-07-01 15:32:07,165] [DEBUG] [routes.watermark_routes] Header at cursor 144: length=65535 bits
[2025-07-01 15:32:07,165] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 144: length=65535. Stopping parse.
[2025-07-01 15:32:07,165] [INFO] [routes.watermark_routes] Extraction complete: 2 messages found
[2025-07-01 15:32:07,166] [INFO] [__main__] App context teardown complete.
[2025-07-01 18:22:50,180] [DEBUG] [__main__] Received a new request.
[2025-07-01 18:22:50,180] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-01 18:22:50,183] [DEBUG] [routes.watermark_routes] Received file: filename=726fcd3be4f24f978799faf9d0918b85_wm.png, content_type=image/png
[2025-07-01 18:22:50,183] [DEBUG] [routes.watermark_routes] Received message of length 7 characters
[2025-07-01 18:22:50,183] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-01 18:22:50,183] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 18:22:50,194] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 18:22:50,194] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-01 18:22:50,194] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-01 18:22:50,253] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 18:22:50,253] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 18:22:50,253] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-01 18:22:50,253] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 18:22:50,253] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-01 18:22:50,253] [INFO] [routes.watermark_routes] Signature found in existing bitstream
[2025-07-01 18:22:50,253] [DEBUG] [routes.watermark_routes] Parsing existing messages from extracted bitstream
[2025-07-01 18:22:50,253] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=48 bits
[2025-07-01 18:22:50,253] [INFO] [routes.watermark_routes] Parsed existing message: 'wefawe' (length=48 bits)
[2025-07-01 18:22:50,253] [DEBUG] [routes.watermark_routes] Header at cursor 80: length=48 bits
[2025-07-01 18:22:50,253] [INFO] [routes.watermark_routes] Parsed existing message: 'rfgwer' (length=48 bits)
[2025-07-01 18:22:50,253] [DEBUG] [routes.watermark_routes] Header at cursor 144: length=65535 bits
[2025-07-01 18:22:50,253] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 144: length=65535. Stopping parse.
[2025-07-01 18:22:50,253] [INFO] [routes.watermark_routes] Total existing messages parsed: 2
[2025-07-01 18:22:50,253] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 3
[2025-07-01 18:22:50,253] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-01 18:22:50,253] [INFO] [routes.watermark_routes] Combined bitstream length: 216 bits
[2025-07-01 18:22:50,253] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-01 18:22:50,272] [DEBUG] [core.dwt_engine] Embedding 216 bits in Y channel parity
[2025-07-01 18:22:50,272] [DEBUG] [core.dwt_engine] Y-parity embed check: 216 bits embedded, 0 mismatches
[2025-07-01 18:22:50,272] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-01 18:22:50,272] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/f2491ad91d4143c795d7d5d9df0745d8_orig.png
[2025-07-01 18:22:50,272] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/f2491ad91d4143c795d7d5d9df0745d8_orig.png
[2025-07-01 18:22:50,291] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 18:22:50,291] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-01 18:22:50,291] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f2491ad91d4143c795d7d5d9df0745d8_wm.png
[2025-07-01 18:22:50,292] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f2491ad91d4143c795d7d5d9df0745d8_wm.png
[2025-07-01 18:22:50,310] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-01 18:22:50,310] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-01 18:22:50,310] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f2491ad91d4143c795d7d5d9df0745d8_wm.png to base64
[2025-07-01 18:22:50,310] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f2491ad91d4143c795d7d5d9df0745d8_wm.png
[2025-07-01 18:22:50,311] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-01 18:22:50,311] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-01 18:22:50,311] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-01 18:22:50,316] [INFO] [__main__] App context teardown complete.
[2025-07-01 18:22:56,930] [DEBUG] [__main__] Received a new request.
[2025-07-01 18:22:56,930] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-01 18:22:56,934] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=f2491ad91d4143c795d7d5d9df0745d8_wm.png
[2025-07-01 18:22:56,934] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-01 18:22:56,945] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-01 18:22:56,945] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-01 18:22:56,945] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-01 18:22:57,008] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 18:22:57,009] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-01 18:22:57,009] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-01 18:22:57,009] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
[2025-07-01 18:22:57,009] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-01 18:22:57,009] [INFO] [routes.watermark_routes] Valid signature detected; proceeding to parse messages
[2025-07-01 18:22:57,009] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=48 bits
[2025-07-01 18:22:57,009] [INFO] [routes.watermark_routes] Extracted message: 'wefawe'
[2025-07-01 18:22:57,009] [DEBUG] [routes.watermark_routes] Header at cursor 80: length=48 bits
[2025-07-01 18:22:57,009] [INFO] [routes.watermark_routes] Extracted message: 'rfgwer'
[2025-07-01 18:22:57,009] [DEBUG] [routes.watermark_routes] Header at cursor 144: length=56 bits
[2025-07-01 18:22:57,009] [INFO] [routes.watermark_routes] Extracted message: 'zdFCFCs'
[2025-07-01 18:22:57,009] [DEBUG] [routes.watermark_routes] Header at cursor 216: length=65535 bits
[2025-07-01 18:22:57,009] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 216: length=65535. Stopping parse.
[2025-07-01 18:22:57,009] [INFO] [routes.watermark_routes] Extraction complete: 3 messages found
[2025-07-01 18:22:57,010] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-05 20:04:26 ==========


========== New Session: 2025-07-05 20:04:26 ==========


========== New Session: 2025-07-05 20:04:26 ==========


========== New Session: 2025-07-05 20:04:26 ==========
[2025-07-05 20:04:26,802] [INFO] [__main__] Launching Flask server...
[2025-07-05 20:04:26,802] [INFO] [__main__] Creating Flask app...
[2025-07-05 20:04:26,803] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-05 20:04:26 ==========


========== New Session: 2025-07-05 20:04:26 ==========


========== New Session: 2025-07-05 20:04:26 ==========


========== New Session: 2025-07-05 20:04:26 ==========
[2025-07-05 20:04:26,979] [INFO] [__main__] Launching Flask server...
[2025-07-05 20:04:26,979] [INFO] [__main__] Creating Flask app...
[2025-07-05 20:04:26,980] [INFO] [__main__] Registering watermark blueprint...
[2025-07-05 20:04:43,461] [DEBUG] [__main__] Received a new request.
[2025-07-05 20:04:43,461] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-05 20:04:43,463] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-07-05 16-10-46.png, content_type=image/png
[2025-07-05 20:04:43,463] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-05 20:04:43,463] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-05 20:04:43,463] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-05 20:04:43,491] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (931, 977, 3)
[2025-07-05 20:04:43,491] [INFO] [routes.watermark_routes] Original image loaded: shape=(931, 977, 3), dtype=uint8
[2025-07-05 20:04:43,491] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-05 20:04:43,594] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-05 20:04:43,594] [DEBUG] [core.dwt_engine] Total bits extracted: 909587
[2025-07-05 20:04:43,595] [INFO] [routes.watermark_routes] Extracted total bitstream length: 909587 bits
[2025-07-05 20:04:43,595] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-05 20:04:43,595] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-05 20:04:43,595] [INFO] [routes.watermark_routes] Signature not found in existing bitstream
[2025-07-05 20:04:43,595] [DEBUG] [routes.watermark_routes] No existing watermark messages to parse
[2025-07-05 20:04:43,595] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 1
[2025-07-05 20:04:43,595] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-05 20:04:43,595] [INFO] [routes.watermark_routes] Combined bitstream length: 64 bits
[2025-07-05 20:04:43,595] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-05 20:04:43,629] [DEBUG] [core.dwt_engine] Embedding 64 bits in Y channel parity
[2025-07-05 20:04:43,629] [DEBUG] [core.dwt_engine] Y-parity embed check: 64 bits embedded, 0 mismatches
[2025-07-05 20:04:43,632] [ERROR] [routes.watermark_routes] Embedding failed due to unexpected error
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 105, in watermark_image
    watermarked_image = embed_bits_in_dwt(image, combined_stream)
  File "/home/gowtham/dwt-watermarking/backend/core/dwt_engine.py", line 53, in embed_bits_in_dwt
    merged = cv2.merge([modified_Y, Cr, Cb])
cv2.error: OpenCV(4.11.0) /io/opencv/modules/core/src/merge.dispatch.cpp:130: error: (-215:Assertion failed) mv[i].size == mv[0].size && mv[i].depth() == depth in function 'merge'

[2025-07-05 20:04:43,637] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-05 20:06:12 ==========


========== New Session: 2025-07-05 20:06:12 ==========


========== New Session: 2025-07-05 20:06:12 ==========


========== New Session: 2025-07-05 20:06:12 ==========
[2025-07-05 20:06:12,066] [INFO] [__main__] Launching Flask server...
[2025-07-05 20:06:12,067] [INFO] [__main__] Creating Flask app...
[2025-07-05 20:06:12,068] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-05 20:06:12 ==========


========== New Session: 2025-07-05 20:06:12 ==========


========== New Session: 2025-07-05 20:06:12 ==========


========== New Session: 2025-07-05 20:06:12 ==========
[2025-07-05 20:06:12,245] [INFO] [__main__] Launching Flask server...
[2025-07-05 20:06:12,245] [INFO] [__main__] Creating Flask app...
[2025-07-05 20:06:12,246] [INFO] [__main__] Registering watermark blueprint...
[2025-07-05 20:06:16,930] [DEBUG] [__main__] Received a new request.
[2025-07-05 20:06:16,930] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-05 20:06:16,932] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-07-05 16-10-46.png, content_type=image/png
[2025-07-05 20:06:16,932] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-05 20:06:16,932] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-05 20:06:16,932] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-05 20:06:16,949] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (931, 977, 3)
[2025-07-05 20:06:16,949] [INFO] [routes.watermark_routes] Original image loaded: shape=(931, 977, 3), dtype=uint8
[2025-07-05 20:06:16,949] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-05 20:06:17,046] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-05 20:06:17,046] [DEBUG] [core.dwt_engine] Total bits extracted: 909587
[2025-07-05 20:06:17,046] [INFO] [routes.watermark_routes] Extracted total bitstream length: 909587 bits
[2025-07-05 20:06:17,046] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-05 20:06:17,047] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-05 20:06:17,047] [INFO] [routes.watermark_routes] Signature not found in existing bitstream
[2025-07-05 20:06:17,047] [DEBUG] [routes.watermark_routes] No existing watermark messages to parse
[2025-07-05 20:06:17,047] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 1
[2025-07-05 20:06:17,047] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-05 20:06:17,047] [INFO] [routes.watermark_routes] Combined bitstream length: 64 bits
[2025-07-05 20:06:17,047] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-05 20:06:17,080] [DEBUG] [core.dwt_engine] Embedding 64 bits in Y channel parity
[2025-07-05 20:06:17,080] [DEBUG] [core.dwt_engine] Y-parity embed check: 64 bits embedded, 0 mismatches
[2025-07-05 20:06:17,080] [ERROR] [routes.watermark_routes] Embedding failed due to unexpected error
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 105, in watermark_image
    watermarked_image = embed_bits_in_dwt(image, combined_stream)
  File "/home/gowtham/dwt-watermarking/backend/core/dwt_engine.py", line 53, in embed_bits_in_dwt
    merged = cv2.merge([modified_Y, Cr, Cb])
cv2.error: OpenCV(4.11.0) /io/opencv/modules/core/src/merge.dispatch.cpp:130: error: (-215:Assertion failed) mv[i].size == mv[0].size && mv[i].depth() == depth in function 'merge'

[2025-07-05 20:06:17,084] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-05 20:13:05 ==========


========== New Session: 2025-07-05 20:13:05 ==========


========== New Session: 2025-07-05 20:13:05 ==========


========== New Session: 2025-07-05 20:13:05 ==========
[2025-07-05 20:13:05,124] [INFO] [__main__] Launching Flask server...
[2025-07-05 20:13:05,124] [INFO] [__main__] Creating Flask app...
[2025-07-05 20:13:05,125] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-05 20:13:05 ==========


========== New Session: 2025-07-05 20:13:05 ==========


========== New Session: 2025-07-05 20:13:05 ==========


========== New Session: 2025-07-05 20:13:05 ==========
[2025-07-05 20:13:05,301] [INFO] [__main__] Launching Flask server...
[2025-07-05 20:13:05,301] [INFO] [__main__] Creating Flask app...
[2025-07-05 20:13:05,302] [INFO] [__main__] Registering watermark blueprint...
[2025-07-05 20:13:19,110] [DEBUG] [__main__] Received a new request.
[2025-07-05 20:13:19,110] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-05 20:13:19,115] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-24 15-26-09.png, content_type=image/png
[2025-07-05 20:13:19,115] [DEBUG] [routes.watermark_routes] Received message of length 3 characters
[2025-07-05 20:13:19,115] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-05 20:13:19,115] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-05 20:13:19,132] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-05 20:13:19,132] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-05 20:13:19,132] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-05 20:13:19,197] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-05 20:13:19,198] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-05 20:13:19,198] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-05 20:13:19,198] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-05 20:13:19,198] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-05 20:13:19,198] [INFO] [routes.watermark_routes] Signature not found in existing bitstream
[2025-07-05 20:13:19,198] [DEBUG] [routes.watermark_routes] No existing watermark messages to parse
[2025-07-05 20:13:19,198] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 1
[2025-07-05 20:13:19,198] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-05 20:13:19,199] [INFO] [routes.watermark_routes] Combined bitstream length: 56 bits
[2025-07-05 20:13:19,199] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-05 20:13:19,220] [DEBUG] [core.dwt_engine] Embedding 56 bits in Y channel parity
[2025-07-05 20:13:19,220] [DEBUG] [core.dwt_engine] Y-parity embed check: 56 bits embedded, 0 mismatches
[2025-07-05 20:13:19,222] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-05 20:13:19,222] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/3abcfc5c262447da8e1866f1f15f1ac4_orig.png
[2025-07-05 20:13:19,222] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/3abcfc5c262447da8e1866f1f15f1ac4_orig.png
[2025-07-05 20:13:19,251] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-05 20:13:19,251] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-05 20:13:19,251] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3abcfc5c262447da8e1866f1f15f1ac4_wm.png
[2025-07-05 20:13:19,251] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3abcfc5c262447da8e1866f1f15f1ac4_wm.png
[2025-07-05 20:13:19,270] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-05 20:13:19,270] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-05 20:13:19,270] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3abcfc5c262447da8e1866f1f15f1ac4_wm.png to base64
[2025-07-05 20:13:19,270] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3abcfc5c262447da8e1866f1f15f1ac4_wm.png
[2025-07-05 20:13:19,271] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-05 20:13:19,271] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-05 20:13:19,271] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-05 20:13:19,275] [INFO] [__main__] App context teardown complete.
[2025-07-05 20:13:46,416] [DEBUG] [__main__] Received a new request.
[2025-07-05 20:13:46,416] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-05 20:13:46,420] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=3abcfc5c262447da8e1866f1f15f1ac4_wm.png
[2025-07-05 20:13:46,420] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-05 20:13:46,432] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-05 20:13:46,432] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-05 20:13:46,432] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-05 20:13:46,499] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:13:46,499] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-05 20:13:46,499] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-05 20:13:46,499] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:13:46,499] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-05 20:13:46,499] [INFO] [routes.watermark_routes] Valid signature detected; proceeding to parse messages
[2025-07-05 20:13:46,499] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=24 bits
[2025-07-05 20:13:46,499] [INFO] [routes.watermark_routes] Extracted message: 'xas'
[2025-07-05 20:13:46,499] [DEBUG] [routes.watermark_routes] Header at cursor 56: length=65535 bits
[2025-07-05 20:13:46,499] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 56: length=65535. Stopping parse.
[2025-07-05 20:13:46,499] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-05 20:13:46,500] [INFO] [__main__] App context teardown complete.
[2025-07-05 20:14:17,955] [DEBUG] [__main__] Received a new request.
[2025-07-05 20:14:17,955] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-05 20:14:17,959] [DEBUG] [routes.watermark_routes] Received file: filename=3abcfc5c262447da8e1866f1f15f1ac4_wm.png, content_type=image/png
[2025-07-05 20:14:17,959] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-05 20:14:17,959] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-05 20:14:17,959] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-05 20:14:17,971] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-05 20:14:17,971] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-05 20:14:17,971] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-05 20:14:18,033] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:14:18,033] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-05 20:14:18,033] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-05 20:14:18,033] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:14:18,033] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-05 20:14:18,033] [INFO] [routes.watermark_routes] Signature found in existing bitstream
[2025-07-05 20:14:18,033] [DEBUG] [routes.watermark_routes] Parsing existing messages from extracted bitstream
[2025-07-05 20:14:18,033] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=24 bits
[2025-07-05 20:14:18,033] [INFO] [routes.watermark_routes] Parsed existing message: 'xas' (length=24 bits)
[2025-07-05 20:14:18,033] [DEBUG] [routes.watermark_routes] Header at cursor 56: length=65535 bits
[2025-07-05 20:14:18,033] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 56: length=65535. Stopping parse.
[2025-07-05 20:14:18,033] [INFO] [routes.watermark_routes] Total existing messages parsed: 1
[2025-07-05 20:14:18,033] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 2
[2025-07-05 20:14:18,034] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-05 20:14:18,034] [INFO] [routes.watermark_routes] Combined bitstream length: 104 bits
[2025-07-05 20:14:18,034] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-05 20:14:18,046] [DEBUG] [core.dwt_engine] Embedding 104 bits in Y channel parity
[2025-07-05 20:14:18,046] [DEBUG] [core.dwt_engine] Y-parity embed check: 104 bits embedded, 0 mismatches
[2025-07-05 20:14:18,046] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-05 20:14:18,046] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/e3297947edb247a4b69b510356039102_orig.png
[2025-07-05 20:14:18,046] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/e3297947edb247a4b69b510356039102_orig.png
[2025-07-05 20:14:18,075] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-05 20:14:18,075] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-05 20:14:18,075] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e3297947edb247a4b69b510356039102_wm.png
[2025-07-05 20:14:18,075] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e3297947edb247a4b69b510356039102_wm.png
[2025-07-05 20:14:18,093] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-05 20:14:18,094] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-05 20:14:18,094] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e3297947edb247a4b69b510356039102_wm.png to base64
[2025-07-05 20:14:18,094] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e3297947edb247a4b69b510356039102_wm.png
[2025-07-05 20:14:18,095] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-05 20:14:18,095] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-05 20:14:18,095] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-05 20:14:18,099] [INFO] [__main__] App context teardown complete.
[2025-07-05 20:14:40,694] [DEBUG] [__main__] Received a new request.
[2025-07-05 20:14:40,694] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-05 20:14:40,698] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=e3297947edb247a4b69b510356039102_wm.png
[2025-07-05 20:14:40,698] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-05 20:14:40,709] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-05 20:14:40,709] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-05 20:14:40,709] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-05 20:14:40,772] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:14:40,772] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-05 20:14:40,772] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-05 20:14:40,773] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:14:40,773] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-05 20:14:40,773] [INFO] [routes.watermark_routes] Valid signature detected; proceeding to parse messages
[2025-07-05 20:14:40,773] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=24 bits
[2025-07-05 20:14:40,773] [INFO] [routes.watermark_routes] Extracted message: 'xas'
[2025-07-05 20:14:40,773] [DEBUG] [routes.watermark_routes] Header at cursor 56: length=32 bits
[2025-07-05 20:14:40,773] [INFO] [routes.watermark_routes] Extracted message: 'csxs'
[2025-07-05 20:14:40,773] [DEBUG] [routes.watermark_routes] Header at cursor 104: length=65535 bits
[2025-07-05 20:14:40,773] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 104: length=65535. Stopping parse.
[2025-07-05 20:14:40,773] [INFO] [routes.watermark_routes] Extraction complete: 2 messages found
[2025-07-05 20:14:40,774] [INFO] [__main__] App context teardown complete.
[2025-07-05 20:15:12,319] [DEBUG] [__main__] Received a new request.
[2025-07-05 20:15:12,319] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-05 20:15:12,323] [DEBUG] [routes.watermark_routes] Received file: filename=e3297947edb247a4b69b510356039102_wm.png, content_type=image/png
[2025-07-05 20:15:12,323] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-05 20:15:12,323] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-05 20:15:12,323] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-05 20:15:12,334] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-05 20:15:12,334] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-05 20:15:12,334] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-05 20:15:12,394] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:15:12,394] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-05 20:15:12,394] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-05 20:15:12,394] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:15:12,394] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-05 20:15:12,394] [INFO] [routes.watermark_routes] Signature found in existing bitstream
[2025-07-05 20:15:12,394] [DEBUG] [routes.watermark_routes] Parsing existing messages from extracted bitstream
[2025-07-05 20:15:12,394] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=24 bits
[2025-07-05 20:15:12,394] [INFO] [routes.watermark_routes] Parsed existing message: 'xas' (length=24 bits)
[2025-07-05 20:15:12,395] [DEBUG] [routes.watermark_routes] Header at cursor 56: length=32 bits
[2025-07-05 20:15:12,395] [INFO] [routes.watermark_routes] Parsed existing message: 'csxs' (length=32 bits)
[2025-07-05 20:15:12,395] [DEBUG] [routes.watermark_routes] Header at cursor 104: length=65535 bits
[2025-07-05 20:15:12,395] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 104: length=65535. Stopping parse.
[2025-07-05 20:15:12,395] [INFO] [routes.watermark_routes] Total existing messages parsed: 2
[2025-07-05 20:15:12,395] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 3
[2025-07-05 20:15:12,395] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-05 20:15:12,395] [INFO] [routes.watermark_routes] Combined bitstream length: 160 bits
[2025-07-05 20:15:12,395] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-05 20:15:12,408] [DEBUG] [core.dwt_engine] Embedding 160 bits in Y channel parity
[2025-07-05 20:15:12,409] [DEBUG] [core.dwt_engine] Y-parity embed check: 160 bits embedded, 0 mismatches
[2025-07-05 20:15:12,409] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-05 20:15:12,409] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/b9e2d6f16c3a4a088ce7f6616c87feda_orig.png
[2025-07-05 20:15:12,409] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/b9e2d6f16c3a4a088ce7f6616c87feda_orig.png
[2025-07-05 20:15:12,430] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-05 20:15:12,430] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-05 20:15:12,430] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/b9e2d6f16c3a4a088ce7f6616c87feda_wm.png
[2025-07-05 20:15:12,430] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/b9e2d6f16c3a4a088ce7f6616c87feda_wm.png
[2025-07-05 20:15:12,452] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-05 20:15:12,452] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-05 20:15:12,452] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/b9e2d6f16c3a4a088ce7f6616c87feda_wm.png to base64
[2025-07-05 20:15:12,452] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/b9e2d6f16c3a4a088ce7f6616c87feda_wm.png
[2025-07-05 20:15:12,453] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-05 20:15:12,453] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-05 20:15:12,453] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-05 20:15:12,457] [INFO] [__main__] App context teardown complete.
[2025-07-05 20:15:27,374] [DEBUG] [__main__] Received a new request.
[2025-07-05 20:15:27,375] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-05 20:15:27,378] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=b9e2d6f16c3a4a088ce7f6616c87feda_wm.png
[2025-07-05 20:15:27,378] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-05 20:15:27,390] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-05 20:15:27,390] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-05 20:15:27,390] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-05 20:15:27,456] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:15:27,456] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-05 20:15:27,456] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-05 20:15:27,456] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:15:27,456] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-05 20:15:27,457] [INFO] [routes.watermark_routes] Valid signature detected; proceeding to parse messages
[2025-07-05 20:15:27,457] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=24 bits
[2025-07-05 20:15:27,457] [INFO] [routes.watermark_routes] Extracted message: 'xas'
[2025-07-05 20:15:27,457] [DEBUG] [routes.watermark_routes] Header at cursor 56: length=32 bits
[2025-07-05 20:15:27,457] [INFO] [routes.watermark_routes] Extracted message: 'csxs'
[2025-07-05 20:15:27,457] [DEBUG] [routes.watermark_routes] Header at cursor 104: length=40 bits
[2025-07-05 20:15:27,457] [INFO] [routes.watermark_routes] Extracted message: 'vevdb'
[2025-07-05 20:15:27,457] [DEBUG] [routes.watermark_routes] Header at cursor 160: length=65535 bits
[2025-07-05 20:15:27,457] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 160: length=65535. Stopping parse.
[2025-07-05 20:15:27,457] [INFO] [routes.watermark_routes] Extraction complete: 3 messages found
[2025-07-05 20:15:27,458] [INFO] [__main__] App context teardown complete.
[2025-07-05 20:33:17,839] [DEBUG] [__main__] Received a new request.
[2025-07-05 20:33:17,839] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-05 20:33:17,843] [DEBUG] [routes.watermark_routes] Received file: filename=b9e2d6f16c3a4a088ce7f6616c87feda_wm.png, content_type=image/png
[2025-07-05 20:33:17,843] [DEBUG] [routes.watermark_routes] Received message of length 10 characters
[2025-07-05 20:33:17,843] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-05 20:33:17,843] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-05 20:33:17,854] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-05 20:33:17,854] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-05 20:33:17,854] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-05 20:33:17,916] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:33:17,916] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-05 20:33:17,916] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-05 20:33:17,916] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:33:17,916] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-05 20:33:17,916] [INFO] [routes.watermark_routes] Signature found in existing bitstream
[2025-07-05 20:33:17,916] [DEBUG] [routes.watermark_routes] Parsing existing messages from extracted bitstream
[2025-07-05 20:33:17,916] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=24 bits
[2025-07-05 20:33:17,916] [INFO] [routes.watermark_routes] Parsed existing message: 'xas' (length=24 bits)
[2025-07-05 20:33:17,916] [DEBUG] [routes.watermark_routes] Header at cursor 56: length=32 bits
[2025-07-05 20:33:17,916] [INFO] [routes.watermark_routes] Parsed existing message: 'csxs' (length=32 bits)
[2025-07-05 20:33:17,916] [DEBUG] [routes.watermark_routes] Header at cursor 104: length=40 bits
[2025-07-05 20:33:17,916] [INFO] [routes.watermark_routes] Parsed existing message: 'vevdb' (length=40 bits)
[2025-07-05 20:33:17,916] [DEBUG] [routes.watermark_routes] Header at cursor 160: length=65535 bits
[2025-07-05 20:33:17,916] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 160: length=65535. Stopping parse.
[2025-07-05 20:33:17,916] [INFO] [routes.watermark_routes] Total existing messages parsed: 3
[2025-07-05 20:33:17,916] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 4
[2025-07-05 20:33:17,916] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-05 20:33:17,916] [INFO] [routes.watermark_routes] Combined bitstream length: 256 bits
[2025-07-05 20:33:17,916] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-05 20:33:17,930] [DEBUG] [core.dwt_engine] Embedding 256 bits in Y channel parity
[2025-07-05 20:33:17,930] [DEBUG] [core.dwt_engine] Y-parity embed check: 256 bits embedded, 0 mismatches
[2025-07-05 20:33:17,931] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-05 20:33:17,931] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/5e9e1bd34afa46ea96b936ab03e557ea_orig.png
[2025-07-05 20:33:17,931] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/5e9e1bd34afa46ea96b936ab03e557ea_orig.png
[2025-07-05 20:33:17,949] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-05 20:33:17,950] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-05 20:33:17,950] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/5e9e1bd34afa46ea96b936ab03e557ea_wm.png
[2025-07-05 20:33:17,950] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/5e9e1bd34afa46ea96b936ab03e557ea_wm.png
[2025-07-05 20:33:17,969] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-05 20:33:17,969] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-05 20:33:17,969] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/5e9e1bd34afa46ea96b936ab03e557ea_wm.png to base64
[2025-07-05 20:33:17,969] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/5e9e1bd34afa46ea96b936ab03e557ea_wm.png
[2025-07-05 20:33:17,970] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-05 20:33:17,970] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-05 20:33:17,970] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-05 20:33:17,974] [INFO] [__main__] App context teardown complete.
[2025-07-05 20:33:37,457] [DEBUG] [__main__] Received a new request.
[2025-07-05 20:33:37,457] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-05 20:33:37,461] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=5e9e1bd34afa46ea96b936ab03e557ea_wm.png
[2025-07-05 20:33:37,461] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-05 20:33:37,473] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-05 20:33:37,473] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-05 20:33:37,473] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-05 20:33:37,536] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:33:37,536] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-05 20:33:37,536] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-05 20:33:37,536] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]
[2025-07-05 20:33:37,536] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-05 20:33:37,536] [INFO] [routes.watermark_routes] Valid signature detected; proceeding to parse messages
[2025-07-05 20:33:37,536] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=24 bits
[2025-07-05 20:33:37,536] [INFO] [routes.watermark_routes] Extracted message: 'xas'
[2025-07-05 20:33:37,536] [DEBUG] [routes.watermark_routes] Header at cursor 56: length=32 bits
[2025-07-05 20:33:37,536] [INFO] [routes.watermark_routes] Extracted message: 'csxs'
[2025-07-05 20:33:37,536] [DEBUG] [routes.watermark_routes] Header at cursor 104: length=40 bits
[2025-07-05 20:33:37,536] [INFO] [routes.watermark_routes] Extracted message: 'vevdb'
[2025-07-05 20:33:37,536] [DEBUG] [routes.watermark_routes] Header at cursor 160: length=80 bits
[2025-07-05 20:33:37,536] [INFO] [routes.watermark_routes] Extracted message: 'itithrffkk'
[2025-07-05 20:33:37,536] [DEBUG] [routes.watermark_routes] Header at cursor 256: length=65535 bits
[2025-07-05 20:33:37,537] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 256: length=65535. Stopping parse.
[2025-07-05 20:33:37,537] [INFO] [routes.watermark_routes] Extraction complete: 4 messages found
[2025-07-05 20:33:37,538] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-08 16:22:14 ==========


========== New Session: 2025-07-08 16:22:15 ==========


========== New Session: 2025-07-08 16:22:15 ==========


========== New Session: 2025-07-08 16:22:15 ==========
[2025-07-08 16:22:15,006] [INFO] [__main__] Launching Flask server...
[2025-07-08 16:22:15,006] [INFO] [__main__] Creating Flask app...
[2025-07-08 16:22:15,006] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-08 16:22:15 ==========


========== New Session: 2025-07-08 16:22:15 ==========


========== New Session: 2025-07-08 16:22:15 ==========


========== New Session: 2025-07-08 16:22:15 ==========
[2025-07-08 16:22:15,191] [INFO] [__main__] Launching Flask server...
[2025-07-08 16:22:15,191] [INFO] [__main__] Creating Flask app...
[2025-07-08 16:22:15,192] [INFO] [__main__] Registering watermark blueprint...
[2025-07-08 16:22:32,172] [DEBUG] [__main__] Received a new request.
[2025-07-08 16:22:32,172] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-08 16:22:32,175] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-24 15-26-09.png, content_type=image/png
[2025-07-08 16:22:32,175] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-08 16:22:32,175] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-08 16:22:32,175] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-08 16:22:32,197] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-08 16:22:32,197] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-08 16:22:32,197] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-08 16:22:32,269] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-08 16:22:32,270] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-08 16:22:32,270] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-08 16:22:32,270] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-08 16:22:32,270] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-08 16:22:32,270] [INFO] [routes.watermark_routes] Signature not found in existing bitstream
[2025-07-08 16:22:32,270] [DEBUG] [routes.watermark_routes] No existing watermark messages to parse
[2025-07-08 16:22:32,270] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 1
[2025-07-08 16:22:32,271] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-08 16:22:32,271] [INFO] [routes.watermark_routes] Combined bitstream length: 64 bits
[2025-07-08 16:22:32,271] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-08 16:22:32,294] [DEBUG] [core.dwt_engine] Embedding 64 bits in Y channel parity
[2025-07-08 16:22:32,294] [DEBUG] [core.dwt_engine] Y-parity embed check: 64 bits embedded, 0 mismatches
[2025-07-08 16:22:32,296] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-08 16:22:32,296] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/2df10aef85184becb1754befafdd433d_orig.png
[2025-07-08 16:22:32,297] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/2df10aef85184becb1754befafdd433d_orig.png
[2025-07-08 16:22:32,317] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-08 16:22:32,317] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-08 16:22:32,317] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2df10aef85184becb1754befafdd433d_wm.png
[2025-07-08 16:22:32,317] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2df10aef85184becb1754befafdd433d_wm.png
[2025-07-08 16:22:32,337] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-08 16:22:32,337] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-08 16:22:32,337] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2df10aef85184becb1754befafdd433d_wm.png to base64
[2025-07-08 16:22:32,337] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2df10aef85184becb1754befafdd433d_wm.png
[2025-07-08 16:22:32,338] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-08 16:22:32,338] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-08 16:22:32,338] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-08 16:22:32,342] [INFO] [__main__] App context teardown complete.
[2025-07-08 16:22:47,539] [DEBUG] [__main__] Received a new request.
[2025-07-08 16:22:47,539] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-08 16:22:47,544] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=2df10aef85184becb1754befafdd433d_wm.png
[2025-07-08 16:22:47,544] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-08 16:22:47,554] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-08 16:22:47,555] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-08 16:22:47,555] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-08 16:22:47,614] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-07-08 16:22:47,614] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-08 16:22:47,614] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-08 16:22:47,614] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-07-08 16:22:47,614] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-08 16:22:47,614] [INFO] [routes.watermark_routes] Valid signature detected; proceeding to parse messages
[2025-07-08 16:22:47,614] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=32 bits
[2025-07-08 16:22:47,615] [INFO] [routes.watermark_routes] Extracted message: 'adsa'
[2025-07-08 16:22:47,615] [DEBUG] [routes.watermark_routes] Header at cursor 64: length=65535 bits
[2025-07-08 16:22:47,615] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 64: length=65535. Stopping parse.
[2025-07-08 16:22:47,615] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-08 16:22:47,616] [INFO] [__main__] App context teardown complete.
[2025-07-08 16:23:17,731] [DEBUG] [__main__] Received a new request.
[2025-07-08 16:23:17,732] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-08 16:23:17,735] [DEBUG] [routes.watermark_routes] Received file: filename=2df10aef85184becb1754befafdd433d_wm.png, content_type=image/png
[2025-07-08 16:23:17,735] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-08 16:23:17,735] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-08 16:23:17,735] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-08 16:23:17,747] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-08 16:23:17,748] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-08 16:23:17,748] [DEBUG] [routes.watermark_routes] Extracting existing parity bitstream via DWT engine
[2025-07-08 16:23:17,812] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-07-08 16:23:17,812] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-08 16:23:17,812] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-08 16:23:17,812] [DEBUG] [routes.watermark_routes] First 32 bits of extracted stream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-07-08 16:23:17,812] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-08 16:23:17,812] [INFO] [routes.watermark_routes] Signature found in existing bitstream
[2025-07-08 16:23:17,812] [DEBUG] [routes.watermark_routes] Parsing existing messages from extracted bitstream
[2025-07-08 16:23:17,812] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=32 bits
[2025-07-08 16:23:17,812] [INFO] [routes.watermark_routes] Parsed existing message: 'adsa' (length=32 bits)
[2025-07-08 16:23:17,812] [DEBUG] [routes.watermark_routes] Header at cursor 64: length=65535 bits
[2025-07-08 16:23:17,812] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 64: length=65535. Stopping parse.
[2025-07-08 16:23:17,812] [INFO] [routes.watermark_routes] Total existing messages parsed: 1
[2025-07-08 16:23:17,812] [INFO] [routes.watermark_routes] Appending new message. Total messages to embed: 2
[2025-07-08 16:23:17,812] [DEBUG] [routes.watermark_routes] Preparing combined bitstream with headers and signature
[2025-07-08 16:23:17,812] [INFO] [routes.watermark_routes] Combined bitstream length: 120 bits
[2025-07-08 16:23:17,812] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-08 16:23:17,828] [DEBUG] [core.dwt_engine] Embedding 120 bits in Y channel parity
[2025-07-08 16:23:17,829] [DEBUG] [core.dwt_engine] Y-parity embed check: 120 bits embedded, 0 mismatches
[2025-07-08 16:23:17,829] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-08 16:23:17,829] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/09213f58f5df47a1b764641b65f378fc_orig.png
[2025-07-08 16:23:17,829] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/09213f58f5df47a1b764641b65f378fc_orig.png
[2025-07-08 16:23:17,848] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-08 16:23:17,849] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-08 16:23:17,849] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/09213f58f5df47a1b764641b65f378fc_wm.png
[2025-07-08 16:23:17,849] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/09213f58f5df47a1b764641b65f378fc_wm.png
[2025-07-08 16:23:17,868] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-08 16:23:17,868] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-08 16:23:17,868] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/09213f58f5df47a1b764641b65f378fc_wm.png to base64
[2025-07-08 16:23:17,868] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/09213f58f5df47a1b764641b65f378fc_wm.png
[2025-07-08 16:23:17,869] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-08 16:23:17,869] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-08 16:23:17,869] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-08 16:23:17,874] [INFO] [__main__] App context teardown complete.
[2025-07-08 16:23:30,533] [DEBUG] [__main__] Received a new request.
[2025-07-08 16:23:30,533] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-08 16:23:30,537] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=09213f58f5df47a1b764641b65f378fc_wm.png
[2025-07-08 16:23:30,537] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-08 16:23:30,549] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-08 16:23:30,549] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-08 16:23:30,549] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-08 16:23:30,618] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-07-08 16:23:30,618] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-08 16:23:30,618] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-08 16:23:30,618] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-07-08 16:23:30,618] [DEBUG] [routes.watermark_routes] Expected signature bits: [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1]
[2025-07-08 16:23:30,618] [INFO] [routes.watermark_routes] Valid signature detected; proceeding to parse messages
[2025-07-08 16:23:30,618] [DEBUG] [routes.watermark_routes] Header at cursor 16: length=32 bits
[2025-07-08 16:23:30,618] [INFO] [routes.watermark_routes] Extracted message: 'adsa'
[2025-07-08 16:23:30,618] [DEBUG] [routes.watermark_routes] Header at cursor 64: length=40 bits
[2025-07-08 16:23:30,618] [INFO] [routes.watermark_routes] Extracted message: 'adaqw'
[2025-07-08 16:23:30,618] [DEBUG] [routes.watermark_routes] Header at cursor 120: length=65535 bits
[2025-07-08 16:23:30,618] [WARNING] [routes.watermark_routes] Invalid or out-of-bounds header at cursor 120: length=65535. Stopping parse.
[2025-07-08 16:23:30,618] [INFO] [routes.watermark_routes] Extraction complete: 2 messages found
[2025-07-08 16:23:30,620] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 15:42:03 ==========


========== New Session: 2025-07-09 15:42:03 ==========


========== New Session: 2025-07-09 15:42:03 ==========


========== New Session: 2025-07-09 15:42:03 ==========
[2025-07-09 15:42:03,939] [INFO] [__main__] Launching Flask server...
[2025-07-09 15:42:03,939] [INFO] [__main__] Creating Flask app...
[2025-07-09 15:42:03,940] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 15:42:04 ==========


========== New Session: 2025-07-09 15:42:04 ==========


========== New Session: 2025-07-09 15:42:04 ==========


========== New Session: 2025-07-09 15:42:04 ==========
[2025-07-09 15:42:04,128] [INFO] [__main__] Launching Flask server...
[2025-07-09 15:42:04,128] [INFO] [__main__] Creating Flask app...
[2025-07-09 15:42:04,129] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 15:42:34,187] [DEBUG] [__main__] Received a new request.
[2025-07-09 15:42:34,188] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 15:42:34,192] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-24 15-26-09.png, content_type=image/png
[2025-07-09 15:42:34,192] [DEBUG] [routes.watermark_routes] Received message of length 6 characters
[2025-07-09 15:42:34,192] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 15:42:34,192] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 15:42:34,222] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 15:42:34,222] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 15:42:34,222] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 15:42:34,224] [INFO] [routes.watermark_routes] Combined bitstream length: 320 bits
[2025-07-09 15:42:34,224] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 15:42:34,250] [DEBUG] [core.dwt_engine] Embedding 320 bits in Y channel parity
[2025-07-09 15:42:34,251] [DEBUG] [core.dwt_engine] Y-parity embed check: 320 bits embedded, 0 mismatches
[2025-07-09 15:42:34,252] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 15:42:34,252] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/f499c7673cec416bbfc79c3b5ea57536_orig.png
[2025-07-09 15:42:34,252] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/f499c7673cec416bbfc79c3b5ea57536_orig.png
[2025-07-09 15:42:34,274] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 15:42:34,274] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 15:42:34,274] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f499c7673cec416bbfc79c3b5ea57536_wm.png
[2025-07-09 15:42:34,274] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f499c7673cec416bbfc79c3b5ea57536_wm.png
[2025-07-09 15:42:34,292] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 15:42:34,293] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 15:42:34,293] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f499c7673cec416bbfc79c3b5ea57536_wm.png to base64
[2025-07-09 15:42:34,293] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/f499c7673cec416bbfc79c3b5ea57536_wm.png
[2025-07-09 15:42:34,294] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 15:42:34,294] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 15:42:34,294] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 15:42:34,298] [INFO] [__main__] App context teardown complete.
[2025-07-09 15:42:55,512] [DEBUG] [__main__] Received a new request.
[2025-07-09 15:42:55,512] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-09 15:42:55,516] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=f499c7673cec416bbfc79c3b5ea57536_wm.png
[2025-07-09 15:42:55,516] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 15:42:55,527] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 15:42:55,527] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 15:42:55,527] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-09 15:42:55,587] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0]
[2025-07-09 15:42:55,587] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 15:42:55,587] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-09 15:42:55,587] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0]
[2025-07-09 15:42:55,588] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 9eed54f2e77ad288363908d9c16eded400f5bbf9ab9483531fc449beb5a0e7b7
[2025-07-09 15:42:55,588] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-09 15:42:55,589] [INFO] [__main__] App context teardown complete.
[2025-07-09 15:45:58,643] [DEBUG] [__main__] Received a new request.
[2025-07-09 15:45:58,643] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 15:45:58,646] [DEBUG] [routes.watermark_routes] Received file: filename=f499c7673cec416bbfc79c3b5ea57536_wm.png, content_type=image/png
[2025-07-09 15:45:58,647] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-09 15:45:58,647] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 15:45:58,647] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 15:45:58,658] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 15:45:58,659] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 15:45:58,659] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 15:45:58,660] [INFO] [routes.watermark_routes] Combined bitstream length: 312 bits
[2025-07-09 15:45:58,660] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 15:45:58,670] [DEBUG] [core.dwt_engine] Embedding 312 bits in Y channel parity
[2025-07-09 15:45:58,670] [DEBUG] [core.dwt_engine] Y-parity embed check: 312 bits embedded, 0 mismatches
[2025-07-09 15:45:58,671] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 15:45:58,671] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/72059b9e8f49483d94beb20c11f917ee_orig.png
[2025-07-09 15:45:58,671] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/72059b9e8f49483d94beb20c11f917ee_orig.png
[2025-07-09 15:45:58,691] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 15:45:58,691] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 15:45:58,691] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/72059b9e8f49483d94beb20c11f917ee_wm.png
[2025-07-09 15:45:58,691] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/72059b9e8f49483d94beb20c11f917ee_wm.png
[2025-07-09 15:45:58,709] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 15:45:58,709] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 15:45:58,709] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/72059b9e8f49483d94beb20c11f917ee_wm.png to base64
[2025-07-09 15:45:58,709] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/72059b9e8f49483d94beb20c11f917ee_wm.png
[2025-07-09 15:45:58,710] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 15:45:58,710] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 15:45:58,710] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 15:45:58,713] [INFO] [__main__] App context teardown complete.
[2025-07-09 15:46:05,907] [DEBUG] [__main__] Received a new request.
[2025-07-09 15:46:05,908] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-09 15:46:05,911] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=72059b9e8f49483d94beb20c11f917ee_wm.png
[2025-07-09 15:46:05,911] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 15:46:05,922] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 15:46:05,922] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 15:46:05,922] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-09 15:46:05,982] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1]
[2025-07-09 15:46:05,982] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 15:46:05,982] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-09 15:46:05,982] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1]
[2025-07-09 15:46:05,982] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 740e25a912f20035f5fffd909533ed056f8c964410d1ab22eaad3a076f8940ba
[2025-07-09 15:46:05,982] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-09 15:46:05,984] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 15:47:14 ==========


========== New Session: 2025-07-09 15:47:14 ==========


========== New Session: 2025-07-09 15:47:14 ==========


========== New Session: 2025-07-09 15:47:14 ==========
[2025-07-09 15:47:14,814] [INFO] [__main__] Launching Flask server...
[2025-07-09 15:47:14,814] [INFO] [__main__] Creating Flask app...
[2025-07-09 15:47:14,815] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 15:50:15 ==========


========== New Session: 2025-07-09 15:50:15 ==========


========== New Session: 2025-07-09 15:50:15 ==========


========== New Session: 2025-07-09 15:50:15 ==========
[2025-07-09 15:50:15,401] [INFO] [__main__] Launching Flask server...
[2025-07-09 15:50:15,402] [INFO] [__main__] Creating Flask app...
[2025-07-09 15:50:15,402] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 15:50:15 ==========


========== New Session: 2025-07-09 15:50:15 ==========


========== New Session: 2025-07-09 15:50:15 ==========


========== New Session: 2025-07-09 15:50:15 ==========
[2025-07-09 15:50:15,588] [INFO] [__main__] Launching Flask server...
[2025-07-09 15:50:15,588] [INFO] [__main__] Creating Flask app...
[2025-07-09 15:50:15,589] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 15:50:29,209] [DEBUG] [__main__] Received a new request.
[2025-07-09 15:50:29,210] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 15:50:29,214] [DEBUG] [routes.watermark_routes] Received file: filename=72059b9e8f49483d94beb20c11f917ee_wm.png, content_type=image/png
[2025-07-09 15:50:29,214] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-09 15:50:29,214] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 15:50:29,214] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 15:50:29,228] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 15:50:29,228] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 15:50:29,228] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-09 15:50:29,292] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1]
[2025-07-09 15:50:29,292] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 15:50:29,293] [INFO] [routes.watermark_routes] Found existing watermark with 1 messages. Appending new message.
[2025-07-09 15:50:29,293] [INFO] [routes.watermark_routes] Total messages to embed: 2
[2025-07-09 15:50:29,293] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 15:50:29,295] [INFO] [routes.watermark_routes] Combined bitstream length: 368 bits
[2025-07-09 15:50:29,295] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 15:50:29,318] [DEBUG] [core.dwt_engine] Embedding 368 bits in Y channel parity
[2025-07-09 15:50:29,319] [DEBUG] [core.dwt_engine] Y-parity embed check: 368 bits embedded, 0 mismatches
[2025-07-09 15:50:29,329] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 15:50:29,329] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/18c8fc67c3714e5982a767382f88643e_orig.png
[2025-07-09 15:50:29,329] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/18c8fc67c3714e5982a767382f88643e_orig.png
[2025-07-09 15:50:29,351] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 15:50:29,351] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 15:50:29,351] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/18c8fc67c3714e5982a767382f88643e_wm.png
[2025-07-09 15:50:29,351] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/18c8fc67c3714e5982a767382f88643e_wm.png
[2025-07-09 15:50:29,371] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 15:50:29,371] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 15:50:29,371] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/18c8fc67c3714e5982a767382f88643e_wm.png to base64
[2025-07-09 15:50:29,371] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/18c8fc67c3714e5982a767382f88643e_wm.png
[2025-07-09 15:50:29,372] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 15:50:29,372] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 15:50:29,372] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 15:50:29,377] [INFO] [__main__] App context teardown complete.
[2025-07-09 15:50:36,831] [DEBUG] [__main__] Received a new request.
[2025-07-09 15:50:36,832] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-09 15:50:36,834] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=18c8fc67c3714e5982a767382f88643e_wm.png
[2025-07-09 15:50:36,834] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 15:50:36,845] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 15:50:36,845] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 15:50:36,845] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-09 15:50:36,912] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0]
[2025-07-09 15:50:36,912] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 15:50:36,912] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-09 15:50:36,912] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0]
[2025-07-09 15:50:36,913] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 2af6139a918b19bad21bfb07164541642505a5673c9080a47b8c83c7d4666a9d
[2025-07-09 15:50:36,913] [INFO] [routes.watermark_routes] Extraction complete: 2 messages found
[2025-07-09 15:50:36,915] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 15:52:17 ==========


========== New Session: 2025-07-09 15:52:17 ==========


========== New Session: 2025-07-09 15:52:17 ==========


========== New Session: 2025-07-09 15:52:17 ==========
[2025-07-09 15:52:17,614] [INFO] [__main__] Launching Flask server...
[2025-07-09 15:52:17,615] [INFO] [__main__] Creating Flask app...
[2025-07-09 15:52:17,616] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 15:52:17 ==========


========== New Session: 2025-07-09 15:52:17 ==========


========== New Session: 2025-07-09 15:52:17 ==========


========== New Session: 2025-07-09 15:52:17 ==========
[2025-07-09 15:52:17,852] [INFO] [__main__] Launching Flask server...
[2025-07-09 15:52:17,852] [INFO] [__main__] Creating Flask app...
[2025-07-09 15:52:17,853] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:03:44 ==========


========== New Session: 2025-07-09 17:03:44 ==========


========== New Session: 2025-07-09 17:03:45 ==========


========== New Session: 2025-07-09 17:03:45 ==========


========== New Session: 2025-07-09 17:03:45 ==========
[2025-07-09 17:03:45,903] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:03:45,903] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:03:45,904] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:03:46 ==========


========== New Session: 2025-07-09 17:03:46 ==========


========== New Session: 2025-07-09 17:03:47 ==========


========== New Session: 2025-07-09 17:03:47 ==========


========== New Session: 2025-07-09 17:03:47 ==========
[2025-07-09 17:03:47,546] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:03:47,546] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:03:47,547] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 17:04:16,692] [DEBUG] [__main__] Received a new request.
[2025-07-09 17:04:16,692] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 17:04:16,696] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-24 15-26-09.png, content_type=image/png
[2025-07-09 17:04:16,696] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-09 17:04:16,696] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 17:04:16,697] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 17:04:16,713] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 17:04:16,713] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 17:04:16,713] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-09 17:04:16,779] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-09 17:04:16,779] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 17:04:16,780] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-09 17:04:16,780] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-09 17:04:16,780] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 17:04:16,782] [INFO] [routes.watermark_routes] Combined bitstream length: 304 bits
[2025-07-09 17:04:16,782] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 17:04:16,803] [DEBUG] [core.dwt_engine] Embedding 304 bits in Y channel parity
[2025-07-09 17:04:16,803] [DEBUG] [core.dwt_engine] Y-parity embed check: 304 bits embedded, 0 mismatches
[2025-07-09 17:04:16,804] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 17:04:16,804] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/77c0dbe542fa4539b196958a07e62526_orig.png
[2025-07-09 17:04:16,804] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/77c0dbe542fa4539b196958a07e62526_orig.png
[2025-07-09 17:04:16,824] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 17:04:16,824] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 17:04:16,824] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/77c0dbe542fa4539b196958a07e62526_wm.png
[2025-07-09 17:04:16,824] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/77c0dbe542fa4539b196958a07e62526_wm.png
[2025-07-09 17:04:16,842] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 17:04:16,842] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 17:04:16,842] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to NFT.Storage (IPFS)...
[2025-07-09 17:04:16,842] [INFO] [utils.ipfs_utils] Uploading file to NFT.Storage: /home/gowtham/dwt-watermarking/backend/uploads/original/77c0dbe542fa4539b196958a07e62526_orig.png
[2025-07-09 17:04:22,519] [ERROR] [utils.ipfs_utils] Upload failed: 401, {"ok":false,"error":{"code":"ERROR_MALFORMED_TOKEN","message":"API Key is malformed or failed to parse."}}
[2025-07-09 17:04:22,519] [ERROR] [routes.watermark_routes] Failed to upload original image to NFT.Storage: Failed to upload to NFT.Storage.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 101, in watermark_image
    orig_cid = upload_to_nft_storage(orig_path)
  File "/home/gowtham/dwt-watermarking/backend/utils/ipfs_utils.py", line 32, in upload_to_nft_storage
    raise RuntimeError("Failed to upload to NFT.Storage.")
RuntimeError: Failed to upload to NFT.Storage.
[2025-07-09 17:04:22,520] [INFO] [utils.ipfs_utils] Uploading file to NFT.Storage: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/77c0dbe542fa4539b196958a07e62526_wm.png
[2025-07-09 17:04:25,237] [ERROR] [utils.ipfs_utils] Upload failed: 401, {"ok":false,"error":{"code":"ERROR_MALFORMED_TOKEN","message":"API Key is malformed or failed to parse."}}
[2025-07-09 17:04:25,237] [ERROR] [routes.watermark_routes] Failed to upload watermarked image to NFT.Storage: Failed to upload to NFT.Storage.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 107, in watermark_image
    wm_cid = upload_to_nft_storage(wm_path)
  File "/home/gowtham/dwt-watermarking/backend/utils/ipfs_utils.py", line 32, in upload_to_nft_storage
    raise RuntimeError("Failed to upload to NFT.Storage.")
RuntimeError: Failed to upload to NFT.Storage.
[2025-07-09 17:04:25,238] [INFO] [routes.watermark_routes] IPFS upload step completed in 8.40 seconds.
[2025-07-09 17:04:25,238] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-09 17:04:26,844] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-09 17:04:26,844] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-09 17:04:27,466] [ERROR] [routes.watermark_routes] Blockchain logging failed: Failed to log to blockchain: 
ABI Not Found!
Found 1 element(s) named `storeWatermark` that accept 7 argument(s).
The provided arguments are not valid.
Provided argument types: (bytes,bytes,str,NoneType,NoneType,int,bytes)
Provided keyword argument types: {}

Tried to find a matching ABI element named `storeWatermark`, but encountered the following problems:
Signature: storeWatermark(bytes32,bytes32,string,string,string,uint16,bytes32), type: function
Argument 1 value `b'\x9e\xedT\xf2\xe7z\xd2\x8869\x08\xd9\xc1n\xde\xd4\x00\xf5\xbb\xf9\xab\x94\x83S\x1f\xc4I\xbe\xb5\xa0\xe7\xb7'` is valid.
Argument 2 value `b'\x00\x1e\xd5\xea\x0eL\xee\xdb\xc7\xd0\xd0\xdb\xbdQ>\x08\xc0\xacr8\xdc\xdb-\xffw\xca\xa9&\xf1\xff5\xbc'` is valid.
Argument 3 value `game` is valid.
Argument 4 value `None` is not compatible with type `string`.
Argument 5 value `None` is not compatible with type `string`.
Argument 6 value `12684` is valid.
Argument 7 value `b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'` is valid.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 37, in log_to_chain
    txn = contract.functions.storeWatermark(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/contract/base_contract.py", line 855, in __call__
    raise MismatchedABI(
web3.exceptions.MismatchedABI: 
ABI Not Found!
Found 1 element(s) named `storeWatermark` that accept 7 argument(s).
The provided arguments are not valid.
Provided argument types: (bytes,bytes,str,NoneType,NoneType,int,bytes)
Provided keyword argument types: {}

Tried to find a matching ABI element named `storeWatermark`, but encountered the following problems:
Signature: storeWatermark(bytes32,bytes32,string,string,string,uint16,bytes32), type: function
Argument 1 value `b'\x9e\xedT\xf2\xe7z\xd2\x8869\x08\xd9\xc1n\xde\xd4\x00\xf5\xbb\xf9\xab\x94\x83S\x1f\xc4I\xbe\xb5\xa0\xe7\xb7'` is valid.
Argument 2 value `b'\x00\x1e\xd5\xea\x0eL\xee\xdb\xc7\xd0\xd0\xdb\xbdQ>\x08\xc0\xacr8\xdc\xdb-\xffw\xca\xa9&\xf1\xff5\xbc'` is valid.
Argument 3 value `game` is valid.
Argument 4 value `None` is not compatible with type `string`.
Argument 5 value `None` is not compatible with type `string`.
Argument 6 value `12684` is valid.
Argument 7 value `b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'` is valid.


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 148, in watermark_image
    tx_hash = log_to_chain(orig_hash_hex, wm_hash_hex, full_message, orig_cid, wm_cid, crc, parent_hash)
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 57, in log_to_chain
    raise RuntimeError(f"Failed to log to blockchain: {str(e)}")
RuntimeError: Failed to log to blockchain: 
ABI Not Found!
Found 1 element(s) named `storeWatermark` that accept 7 argument(s).
The provided arguments are not valid.
Provided argument types: (bytes,bytes,str,NoneType,NoneType,int,bytes)
Provided keyword argument types: {}

Tried to find a matching ABI element named `storeWatermark`, but encountered the following problems:
Signature: storeWatermark(bytes32,bytes32,string,string,string,uint16,bytes32), type: function
Argument 1 value `b'\x9e\xedT\xf2\xe7z\xd2\x8869\x08\xd9\xc1n\xde\xd4\x00\xf5\xbb\xf9\xab\x94\x83S\x1f\xc4I\xbe\xb5\xa0\xe7\xb7'` is valid.
Argument 2 value `b'\x00\x1e\xd5\xea\x0eL\xee\xdb\xc7\xd0\xd0\xdb\xbdQ>\x08\xc0\xacr8\xdc\xdb-\xffw\xca\xa9&\xf1\xff5\xbc'` is valid.
Argument 3 value `game` is valid.
Argument 4 value `None` is not compatible with type `string`.
Argument 5 value `None` is not compatible with type `string`.
Argument 6 value `12684` is valid.
Argument 7 value `b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'` is valid.

[2025-07-09 17:04:27,467] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.23 seconds.
[2025-07-09 17:04:27,467] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/77c0dbe542fa4539b196958a07e62526_wm.png to base64
[2025-07-09 17:04:27,467] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/77c0dbe542fa4539b196958a07e62526_wm.png
[2025-07-09 17:04:27,468] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 17:04:27,468] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 17:04:27,468] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 17:04:27,475] [INFO] [__main__] App context teardown complete.
[2025-07-09 17:04:59,474] [DEBUG] [__main__] Received a new request.
[2025-07-09 17:04:59,474] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-09 17:04:59,478] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=77c0dbe542fa4539b196958a07e62526_wm.png
[2025-07-09 17:04:59,478] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 17:04:59,489] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 17:04:59,489] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 17:04:59,489] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-09 17:04:59,549] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0]
[2025-07-09 17:04:59,549] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 17:04:59,549] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-09 17:04:59,549] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0]
[2025-07-09 17:04:59,550] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 9eed54f2e77ad288363908d9c16eded400f5bbf9ab9483531fc449beb5a0e7b7
[2025-07-09 17:05:01,055] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-09 17:05:01,056] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 17:12:07 ==========


========== New Session: 2025-07-09 17:12:07 ==========


========== New Session: 2025-07-09 17:12:09 ==========


========== New Session: 2025-07-09 17:12:09 ==========


========== New Session: 2025-07-09 17:12:09 ==========
[2025-07-09 17:12:09,315] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:12:09,315] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:12:09,316] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:12:09 ==========


========== New Session: 2025-07-09 17:12:09 ==========


========== New Session: 2025-07-09 17:12:10 ==========


========== New Session: 2025-07-09 17:12:10 ==========


========== New Session: 2025-07-09 17:12:10 ==========
[2025-07-09 17:12:10,940] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:12:10,940] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:12:10,941] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 17:13:01,029] [DEBUG] [__main__] Received a new request.
[2025-07-09 17:13:01,030] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 17:13:01,033] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-24 15-26-09.png, content_type=image/png
[2025-07-09 17:13:01,033] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-09 17:13:01,033] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 17:13:01,033] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 17:13:01,051] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 17:13:01,052] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 17:13:01,052] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-09 17:13:01,125] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-09 17:13:01,125] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 17:13:01,126] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-09 17:13:01,126] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-09 17:13:01,126] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 17:13:01,129] [INFO] [routes.watermark_routes] Combined bitstream length: 304 bits
[2025-07-09 17:13:01,129] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 17:13:01,153] [DEBUG] [core.dwt_engine] Embedding 304 bits in Y channel parity
[2025-07-09 17:13:01,153] [DEBUG] [core.dwt_engine] Y-parity embed check: 304 bits embedded, 0 mismatches
[2025-07-09 17:13:01,155] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 17:13:01,155] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/a73ab633185a46a498b011e053cfd645_orig.png
[2025-07-09 17:13:01,155] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/a73ab633185a46a498b011e053cfd645_orig.png
[2025-07-09 17:13:01,155] [ERROR] [utils.image_utils] cv2.imwrite() failed to write image. Check path permissions or array format.
[2025-07-09 17:13:01,155] [ERROR] [utils.image_utils] Exception occurred in save_image().
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/image_utils.py", line 44, in save_image
    raise IOError(f"Failed to write image to {path}")
OSError: Failed to write image to /home/gowtham/dwt-watermarking/backend/uploads/original/a73ab633185a46a498b011e053cfd645_orig.png
[2025-07-09 17:13:01,156] [ERROR] [routes.watermark_routes] Embedding failed due to unexpected error
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 90, in watermark_image
    save_image(image, orig_path)
  File "/home/gowtham/dwt-watermarking/backend/utils/image_utils.py", line 44, in save_image
    raise IOError(f"Failed to write image to {path}")
OSError: Failed to write image to /home/gowtham/dwt-watermarking/backend/uploads/original/a73ab633185a46a498b011e053cfd645_orig.png
[2025-07-09 17:13:01,159] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 17:13:46 ==========


========== New Session: 2025-07-09 17:13:46 ==========


========== New Session: 2025-07-09 17:13:48 ==========


========== New Session: 2025-07-09 17:13:48 ==========


========== New Session: 2025-07-09 17:13:48 ==========
[2025-07-09 17:13:48,437] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:13:48,437] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:13:48,438] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:13:48 ==========


========== New Session: 2025-07-09 17:13:48 ==========


========== New Session: 2025-07-09 17:13:50 ==========


========== New Session: 2025-07-09 17:13:50 ==========


========== New Session: 2025-07-09 17:13:50 ==========
[2025-07-09 17:13:50,075] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:13:50,075] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:13:50,076] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 17:14:01,482] [DEBUG] [__main__] Received a new request.
[2025-07-09 17:14:01,482] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 17:14:01,485] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-24 15-26-09.png, content_type=image/png
[2025-07-09 17:14:01,485] [DEBUG] [routes.watermark_routes] Received message of length 3 characters
[2025-07-09 17:14:01,485] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 17:14:01,485] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 17:14:01,503] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 17:14:01,504] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 17:14:01,504] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-09 17:14:01,576] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-09 17:14:01,576] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 17:14:01,577] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-09 17:14:01,577] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-09 17:14:01,577] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 17:14:01,579] [INFO] [routes.watermark_routes] Combined bitstream length: 296 bits
[2025-07-09 17:14:01,579] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 17:14:01,602] [DEBUG] [core.dwt_engine] Embedding 296 bits in Y channel parity
[2025-07-09 17:14:01,603] [DEBUG] [core.dwt_engine] Y-parity embed check: 296 bits embedded, 0 mismatches
[2025-07-09 17:14:01,604] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 17:14:01,604] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/81d0a3311e474c2fbc2e66ccde86f1c6_orig.png
[2025-07-09 17:14:01,604] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/81d0a3311e474c2fbc2e66ccde86f1c6_orig.png
[2025-07-09 17:14:01,626] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 17:14:01,626] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 17:14:01,626] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/81d0a3311e474c2fbc2e66ccde86f1c6_wm.png
[2025-07-09 17:14:01,626] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/81d0a3311e474c2fbc2e66ccde86f1c6_wm.png
[2025-07-09 17:14:01,647] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 17:14:01,647] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 17:14:01,647] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to NFT.Storage (IPFS)...
[2025-07-09 17:14:01,647] [INFO] [utils.ipfs_utils] Uploading file to NFT.Storage: /home/gowtham/dwt-watermarking/backend/uploads/original/81d0a3311e474c2fbc2e66ccde86f1c6_orig.png
[2025-07-09 17:14:06,638] [ERROR] [utils.ipfs_utils] Upload failed: 401, {"ok":false,"error":{"code":"ERROR_MALFORMED_TOKEN","message":"API Key is malformed or failed to parse."}}
[2025-07-09 17:14:06,638] [ERROR] [routes.watermark_routes] Failed to upload original image to NFT.Storage: Failed to upload to NFT.Storage.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 101, in watermark_image
    orig_cid = upload_to_nft_storage(orig_path)
  File "/home/gowtham/dwt-watermarking/backend/utils/ipfs_utils.py", line 32, in upload_to_nft_storage
    raise RuntimeError("Failed to upload to NFT.Storage.")
RuntimeError: Failed to upload to NFT.Storage.
[2025-07-09 17:14:06,639] [INFO] [utils.ipfs_utils] Uploading file to NFT.Storage: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/81d0a3311e474c2fbc2e66ccde86f1c6_wm.png
[2025-07-09 17:14:09,425] [ERROR] [utils.ipfs_utils] Upload failed: 401, {"ok":false,"error":{"code":"ERROR_MALFORMED_TOKEN","message":"API Key is malformed or failed to parse."}}
[2025-07-09 17:14:09,425] [ERROR] [routes.watermark_routes] Failed to upload watermarked image to NFT.Storage: Failed to upload to NFT.Storage.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 107, in watermark_image
    wm_cid = upload_to_nft_storage(wm_path)
  File "/home/gowtham/dwt-watermarking/backend/utils/ipfs_utils.py", line 32, in upload_to_nft_storage
    raise RuntimeError("Failed to upload to NFT.Storage.")
RuntimeError: Failed to upload to NFT.Storage.
[2025-07-09 17:14:09,425] [INFO] [routes.watermark_routes] IPFS upload step completed in 7.78 seconds.
[2025-07-09 17:14:09,425] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-09 17:14:11,567] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-09 17:14:11,567] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-09 17:14:12,180] [ERROR] [routes.watermark_routes] Blockchain logging failed: Failed to log to blockchain: 
ABI Not Found!
Found 1 element(s) named `storeWatermark` that accept 7 argument(s).
The provided arguments are not valid.
Provided argument types: (bytes,bytes,str,NoneType,NoneType,int,bytes)
Provided keyword argument types: {}

Tried to find a matching ABI element named `storeWatermark`, but encountered the following problems:
Signature: storeWatermark(bytes32,bytes32,string,string,string,uint16,bytes32), type: function
Argument 1 value `b'\x9e\xedT\xf2\xe7z\xd2\x8869\x08\xd9\xc1n\xde\xd4\x00\xf5\xbb\xf9\xab\x94\x83S\x1f\xc4I\xbe\xb5\xa0\xe7\xb7'` is valid.
Argument 2 value `b'\xff\xf5\xd5=N&\xafu\x82\x9a@\xd2XJS\xca\xff\xee\x88>Z\xa4z#,\xb3i\xd8n\xae\xcf\xa1'` is valid.
Argument 3 value `dgf` is valid.
Argument 4 value `None` is not compatible with type `string`.
Argument 5 value `None` is not compatible with type `string`.
Argument 6 value `33763` is valid.
Argument 7 value `b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'` is valid.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 37, in log_to_chain
    txn = contract.functions.storeWatermark(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/contract/base_contract.py", line 855, in __call__
    raise MismatchedABI(
web3.exceptions.MismatchedABI: 
ABI Not Found!
Found 1 element(s) named `storeWatermark` that accept 7 argument(s).
The provided arguments are not valid.
Provided argument types: (bytes,bytes,str,NoneType,NoneType,int,bytes)
Provided keyword argument types: {}

Tried to find a matching ABI element named `storeWatermark`, but encountered the following problems:
Signature: storeWatermark(bytes32,bytes32,string,string,string,uint16,bytes32), type: function
Argument 1 value `b'\x9e\xedT\xf2\xe7z\xd2\x8869\x08\xd9\xc1n\xde\xd4\x00\xf5\xbb\xf9\xab\x94\x83S\x1f\xc4I\xbe\xb5\xa0\xe7\xb7'` is valid.
Argument 2 value `b'\xff\xf5\xd5=N&\xafu\x82\x9a@\xd2XJS\xca\xff\xee\x88>Z\xa4z#,\xb3i\xd8n\xae\xcf\xa1'` is valid.
Argument 3 value `dgf` is valid.
Argument 4 value `None` is not compatible with type `string`.
Argument 5 value `None` is not compatible with type `string`.
Argument 6 value `33763` is valid.
Argument 7 value `b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'` is valid.


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 148, in watermark_image
    tx_hash = log_to_chain(orig_hash_hex, wm_hash_hex, full_message, orig_cid, wm_cid, crc, parent_hash)
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 57, in log_to_chain
    raise RuntimeError(f"Failed to log to blockchain: {str(e)}")
RuntimeError: Failed to log to blockchain: 
ABI Not Found!
Found 1 element(s) named `storeWatermark` that accept 7 argument(s).
The provided arguments are not valid.
Provided argument types: (bytes,bytes,str,NoneType,NoneType,int,bytes)
Provided keyword argument types: {}

Tried to find a matching ABI element named `storeWatermark`, but encountered the following problems:
Signature: storeWatermark(bytes32,bytes32,string,string,string,uint16,bytes32), type: function
Argument 1 value `b'\x9e\xedT\xf2\xe7z\xd2\x8869\x08\xd9\xc1n\xde\xd4\x00\xf5\xbb\xf9\xab\x94\x83S\x1f\xc4I\xbe\xb5\xa0\xe7\xb7'` is valid.
Argument 2 value `b'\xff\xf5\xd5=N&\xafu\x82\x9a@\xd2XJS\xca\xff\xee\x88>Z\xa4z#,\xb3i\xd8n\xae\xcf\xa1'` is valid.
Argument 3 value `dgf` is valid.
Argument 4 value `None` is not compatible with type `string`.
Argument 5 value `None` is not compatible with type `string`.
Argument 6 value `33763` is valid.
Argument 7 value `b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'` is valid.

[2025-07-09 17:14:12,181] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.76 seconds.
[2025-07-09 17:14:12,181] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/81d0a3311e474c2fbc2e66ccde86f1c6_wm.png to base64
[2025-07-09 17:14:12,181] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/81d0a3311e474c2fbc2e66ccde86f1c6_wm.png
[2025-07-09 17:14:12,183] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 17:14:12,183] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 17:14:12,183] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 17:14:12,189] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 17:20:46 ==========


========== New Session: 2025-07-09 17:20:46 ==========


========== New Session: 2025-07-09 17:20:47 ==========


========== New Session: 2025-07-09 17:20:47 ==========


========== New Session: 2025-07-09 17:20:47 ==========
[2025-07-09 17:20:47,873] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:20:47,873] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:20:47,874] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:20:48 ==========


========== New Session: 2025-07-09 17:20:48 ==========


========== New Session: 2025-07-09 17:20:49 ==========


========== New Session: 2025-07-09 17:20:49 ==========


========== New Session: 2025-07-09 17:20:49 ==========
[2025-07-09 17:20:49,310] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:20:49,310] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:20:49,310] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:22:09 ==========


========== New Session: 2025-07-09 17:22:09 ==========


========== New Session: 2025-07-09 17:22:11 ==========


========== New Session: 2025-07-09 17:22:11 ==========


========== New Session: 2025-07-09 17:22:11 ==========
[2025-07-09 17:22:11,021] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:22:11,021] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:22:11,022] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:22:14 ==========


========== New Session: 2025-07-09 17:22:14 ==========


========== New Session: 2025-07-09 17:22:15 ==========


========== New Session: 2025-07-09 17:22:15 ==========


========== New Session: 2025-07-09 17:22:15 ==========
[2025-07-09 17:22:15,736] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:22:15,736] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:22:15,737] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:22:17 ==========


========== New Session: 2025-07-09 17:22:17 ==========


========== New Session: 2025-07-09 17:22:18 ==========


========== New Session: 2025-07-09 17:22:18 ==========


========== New Session: 2025-07-09 17:22:18 ==========
[2025-07-09 17:22:18,603] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:22:18,603] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:22:18,604] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:22:38 ==========


========== New Session: 2025-07-09 17:22:38 ==========


========== New Session: 2025-07-09 17:22:39 ==========


========== New Session: 2025-07-09 17:22:39 ==========


========== New Session: 2025-07-09 17:22:39 ==========
[2025-07-09 17:22:39,259] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:22:39,259] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:22:39,260] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:22:39 ==========


========== New Session: 2025-07-09 17:22:39 ==========


========== New Session: 2025-07-09 17:22:40 ==========


========== New Session: 2025-07-09 17:22:40 ==========


========== New Session: 2025-07-09 17:22:40 ==========
[2025-07-09 17:22:40,549] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:22:40,549] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:22:40,549] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 17:22:50,532] [DEBUG] [__main__] Received a new request.
[2025-07-09 17:22:50,532] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 17:22:50,533] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-30 22-18-03.png, content_type=image/png
[2025-07-09 17:22:50,533] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-09 17:22:50,533] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 17:22:50,533] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 17:22:50,534] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (166, 484, 3)
[2025-07-09 17:22:50,534] [INFO] [routes.watermark_routes] Original image loaded: shape=(166, 484, 3), dtype=uint8
[2025-07-09 17:22:50,535] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-09 17:22:50,545] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-09 17:22:50,545] [DEBUG] [core.dwt_engine] Total bits extracted: 80344
[2025-07-09 17:22:50,546] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-09 17:22:50,546] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-09 17:22:50,546] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 17:22:50,546] [INFO] [routes.watermark_routes] Combined bitstream length: 312 bits
[2025-07-09 17:22:50,546] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 17:22:50,549] [DEBUG] [core.dwt_engine] Embedding 312 bits in Y channel parity
[2025-07-09 17:22:50,549] [DEBUG] [core.dwt_engine] Y-parity embed check: 312 bits embedded, 0 mismatches
[2025-07-09 17:22:50,550] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 17:22:50,550] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/69ab770384954440b0d7fdd80c93f4d5_orig.png
[2025-07-09 17:22:50,550] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/69ab770384954440b0d7fdd80c93f4d5_orig.png
[2025-07-09 17:22:50,551] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 17:22:50,551] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 17:22:50,551] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/69ab770384954440b0d7fdd80c93f4d5_wm.png
[2025-07-09 17:22:50,551] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/69ab770384954440b0d7fdd80c93f4d5_wm.png
[2025-07-09 17:22:50,552] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 17:22:50,552] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 17:22:50,552] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to NFT.Storage (IPFS)...
[2025-07-09 17:22:50,552] [INFO] [utils.ipfs_utils] Uploading file to NFT.Storage: /home/gowtham/dwt-watermarking/backend/uploads/original/69ab770384954440b0d7fdd80c93f4d5_orig.png
[2025-07-09 17:22:54,260] [ERROR] [utils.ipfs_utils] Upload failed: 401, {"ok":false,"error":{"code":"ERROR_MALFORMED_TOKEN","message":"API Key is malformed or failed to parse."}}
[2025-07-09 17:22:54,260] [ERROR] [routes.watermark_routes] Failed to upload original image to NFT.Storage: Failed to upload to NFT.Storage.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 101, in watermark_image
    orig_cid = upload_to_nft_storage(orig_path)
  File "/home/gowtham/dwt-watermarking/backend/utils/ipfs_utils.py", line 32, in upload_to_nft_storage
    raise RuntimeError("Failed to upload to NFT.Storage.")
RuntimeError: Failed to upload to NFT.Storage.
[2025-07-09 17:22:54,261] [INFO] [utils.ipfs_utils] Uploading file to NFT.Storage: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/69ab770384954440b0d7fdd80c93f4d5_wm.png
[2025-07-09 17:22:54,859] [ERROR] [utils.ipfs_utils] Upload failed: 401, {"ok":false,"error":{"code":"ERROR_MALFORMED_TOKEN","message":"API Key is malformed or failed to parse."}}
[2025-07-09 17:22:54,859] [ERROR] [routes.watermark_routes] Failed to upload watermarked image to NFT.Storage: Failed to upload to NFT.Storage.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 107, in watermark_image
    wm_cid = upload_to_nft_storage(wm_path)
  File "/home/gowtham/dwt-watermarking/backend/utils/ipfs_utils.py", line 32, in upload_to_nft_storage
    raise RuntimeError("Failed to upload to NFT.Storage.")
RuntimeError: Failed to upload to NFT.Storage.
[2025-07-09 17:22:54,860] [INFO] [routes.watermark_routes] IPFS upload step completed in 4.31 seconds.
[2025-07-09 17:22:54,860] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-09 17:22:56,318] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-09 17:22:56,318] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-09 17:22:56,869] [ERROR] [routes.watermark_routes] Blockchain logging failed: Failed to log to blockchain: 
ABI Not Found!
Found 1 element(s) named `storeWatermark` that accept 7 argument(s).
The provided arguments are not valid.
Provided argument types: (bytes,bytes,str,NoneType,NoneType,int,bytes)
Provided keyword argument types: {}

Tried to find a matching ABI element named `storeWatermark`, but encountered the following problems:
Signature: storeWatermark(bytes32,bytes32,string,string,string,uint16,bytes32), type: function
Argument 1 value `b'\xdc\xe6\xa75\xa3,,\x00d9\x9c\xe6\n\xd2S\x11\xb1\xbb\xc9\x01\x93^\xdbp\xe9\xa2\xa3-\x00v\xcc\xd9'` is valid.
Argument 2 value `b'\x0cTh\x9a\xe4\x1c\xef\x92p\xe5\xe5!\x7f\x88\xa9\xc2c\xf0u\x03i\x85\xca\x14\xfe\x0eiYJ\x99!j'` is valid.
Argument 3 value `hello` is valid.
Argument 4 value `None` is not compatible with type `string`.
Argument 5 value `None` is not compatible with type `string`.
Argument 6 value `42630` is valid.
Argument 7 value `b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'` is valid.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 37, in log_to_chain
    txn = contract.functions.storeWatermark(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/contract/base_contract.py", line 855, in __call__
    raise MismatchedABI(
web3.exceptions.MismatchedABI: 
ABI Not Found!
Found 1 element(s) named `storeWatermark` that accept 7 argument(s).
The provided arguments are not valid.
Provided argument types: (bytes,bytes,str,NoneType,NoneType,int,bytes)
Provided keyword argument types: {}

Tried to find a matching ABI element named `storeWatermark`, but encountered the following problems:
Signature: storeWatermark(bytes32,bytes32,string,string,string,uint16,bytes32), type: function
Argument 1 value `b'\xdc\xe6\xa75\xa3,,\x00d9\x9c\xe6\n\xd2S\x11\xb1\xbb\xc9\x01\x93^\xdbp\xe9\xa2\xa3-\x00v\xcc\xd9'` is valid.
Argument 2 value `b'\x0cTh\x9a\xe4\x1c\xef\x92p\xe5\xe5!\x7f\x88\xa9\xc2c\xf0u\x03i\x85\xca\x14\xfe\x0eiYJ\x99!j'` is valid.
Argument 3 value `hello` is valid.
Argument 4 value `None` is not compatible with type `string`.
Argument 5 value `None` is not compatible with type `string`.
Argument 6 value `42630` is valid.
Argument 7 value `b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'` is valid.


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 148, in watermark_image
    tx_hash = log_to_chain(orig_hash_hex, wm_hash_hex, full_message, orig_cid, wm_cid, crc, parent_hash)
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 57, in log_to_chain
    raise RuntimeError(f"Failed to log to blockchain: {str(e)}")
RuntimeError: Failed to log to blockchain: 
ABI Not Found!
Found 1 element(s) named `storeWatermark` that accept 7 argument(s).
The provided arguments are not valid.
Provided argument types: (bytes,bytes,str,NoneType,NoneType,int,bytes)
Provided keyword argument types: {}

Tried to find a matching ABI element named `storeWatermark`, but encountered the following problems:
Signature: storeWatermark(bytes32,bytes32,string,string,string,uint16,bytes32), type: function
Argument 1 value `b'\xdc\xe6\xa75\xa3,,\x00d9\x9c\xe6\n\xd2S\x11\xb1\xbb\xc9\x01\x93^\xdbp\xe9\xa2\xa3-\x00v\xcc\xd9'` is valid.
Argument 2 value `b'\x0cTh\x9a\xe4\x1c\xef\x92p\xe5\xe5!\x7f\x88\xa9\xc2c\xf0u\x03i\x85\xca\x14\xfe\x0eiYJ\x99!j'` is valid.
Argument 3 value `hello` is valid.
Argument 4 value `None` is not compatible with type `string`.
Argument 5 value `None` is not compatible with type `string`.
Argument 6 value `42630` is valid.
Argument 7 value `b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'` is valid.

[2025-07-09 17:22:56,869] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.01 seconds.
[2025-07-09 17:22:56,870] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/69ab770384954440b0d7fdd80c93f4d5_wm.png to base64
[2025-07-09 17:22:56,870] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/69ab770384954440b0d7fdd80c93f4d5_wm.png
[2025-07-09 17:22:56,870] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 17:22:56,870] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 17:22:56,870] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 17:22:56,871] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 17:33:39 ==========


========== New Session: 2025-07-09 17:33:39 ==========
[2025-07-09 17:33:39,394] [INFO] [utils.ipfs_utils] NFT_STORAGE_API_KEY length: 41


========== New Session: 2025-07-09 17:33:41 ==========


========== New Session: 2025-07-09 17:33:41 ==========


========== New Session: 2025-07-09 17:33:41 ==========
[2025-07-09 17:33:41,426] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:33:41,426] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:33:41,427] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 17:33:41 ==========


========== New Session: 2025-07-09 17:33:41 ==========
[2025-07-09 17:33:41,662] [INFO] [utils.ipfs_utils] NFT_STORAGE_API_KEY length: 41


========== New Session: 2025-07-09 17:33:43 ==========


========== New Session: 2025-07-09 17:33:43 ==========


========== New Session: 2025-07-09 17:33:43 ==========
[2025-07-09 17:33:43,673] [INFO] [__main__] Launching Flask server...
[2025-07-09 17:33:43,673] [INFO] [__main__] Creating Flask app...
[2025-07-09 17:33:43,675] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:06:28 ==========


========== New Session: 2025-07-09 19:06:28 ==========


========== New Session: 2025-07-09 19:06:52 ==========


========== New Session: 2025-07-09 19:06:52 ==========


========== New Session: 2025-07-09 19:06:54 ==========


========== New Session: 2025-07-09 19:06:54 ==========


========== New Session: 2025-07-09 19:06:54 ==========
[2025-07-09 19:06:54,197] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:06:54,197] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:06:54,198] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:06:54 ==========


========== New Session: 2025-07-09 19:06:54 ==========


========== New Session: 2025-07-09 19:06:55 ==========


========== New Session: 2025-07-09 19:06:55 ==========


========== New Session: 2025-07-09 19:06:55 ==========
[2025-07-09 19:06:55,629] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:06:55,629] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:06:55,630] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:08:24 ==========


========== New Session: 2025-07-09 19:08:24 ==========


========== New Session: 2025-07-09 19:08:26 ==========


========== New Session: 2025-07-09 19:08:26 ==========


========== New Session: 2025-07-09 19:08:26 ==========
[2025-07-09 19:08:26,358] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:08:26,358] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:08:26,359] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:13:03 ==========


========== New Session: 2025-07-09 19:13:03 ==========


========== New Session: 2025-07-09 19:13:04 ==========


========== New Session: 2025-07-09 19:13:04 ==========


========== New Session: 2025-07-09 19:13:04 ==========
[2025-07-09 19:13:04,758] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:13:04,758] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:13:04,758] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:13:26 ==========


========== New Session: 2025-07-09 19:13:26 ==========


========== New Session: 2025-07-09 19:13:27 ==========


========== New Session: 2025-07-09 19:13:27 ==========


========== New Session: 2025-07-09 19:13:27 ==========
[2025-07-09 19:13:27,356] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:13:27,356] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:13:27,357] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:13:56 ==========


========== New Session: 2025-07-09 19:13:56 ==========


========== New Session: 2025-07-09 19:13:58 ==========


========== New Session: 2025-07-09 19:13:58 ==========


========== New Session: 2025-07-09 19:13:58 ==========
[2025-07-09 19:13:58,786] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:13:58,786] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:13:58,787] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:13:58 ==========


========== New Session: 2025-07-09 19:13:59 ==========


========== New Session: 2025-07-09 19:13:59 ==========


========== New Session: 2025-07-09 19:13:59 ==========


========== New Session: 2025-07-09 19:13:59 ==========
[2025-07-09 19:13:59,958] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:13:59,958] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:13:59,959] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 19:15:12,661] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:15:12,662] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 19:15:12,663] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-30 22-18-03.png, content_type=image/png
[2025-07-09 19:15:12,663] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-09 19:15:12,663] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 19:15:12,663] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 19:15:12,664] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (166, 484, 3)
[2025-07-09 19:15:12,664] [INFO] [routes.watermark_routes] Original image loaded: shape=(166, 484, 3), dtype=uint8
[2025-07-09 19:15:12,664] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-09 19:15:12,675] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-09 19:15:12,675] [DEBUG] [core.dwt_engine] Total bits extracted: 80344
[2025-07-09 19:15:12,675] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-09 19:15:12,675] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-09 19:15:12,675] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 19:15:12,676] [INFO] [routes.watermark_routes] Combined bitstream length: 312 bits
[2025-07-09 19:15:12,676] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 19:15:12,679] [DEBUG] [core.dwt_engine] Embedding 312 bits in Y channel parity
[2025-07-09 19:15:12,679] [DEBUG] [core.dwt_engine] Y-parity embed check: 312 bits embedded, 0 mismatches
[2025-07-09 19:15:12,679] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 19:15:12,680] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/3b6233cd0be040c195c189296877a771_orig.png
[2025-07-09 19:15:12,680] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/3b6233cd0be040c195c189296877a771_orig.png
[2025-07-09 19:15:12,681] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 19:15:12,681] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 19:15:12,681] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3b6233cd0be040c195c189296877a771_wm.png
[2025-07-09 19:15:12,681] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3b6233cd0be040c195c189296877a771_wm.png
[2025-07-09 19:15:12,682] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 19:15:12,682] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 19:15:12,682] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-09 19:15:12,682] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/3b6233cd0be040c195c189296877a771_orig.png to Pinata Cloud...
[2025-07-09 19:15:15,337] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmaEiEnT3ZyzKuPsKwo4bzot1RewRBgJiSx37WZaVB9uBi
[2025-07-09 19:15:15,337] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmaEiEnT3ZyzKuPsKwo4bzot1RewRBgJiSx37WZaVB9uBi
[2025-07-09 19:15:15,338] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3b6233cd0be040c195c189296877a771_wm.png to Pinata Cloud...
[2025-07-09 19:15:26,710] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmTaPvDqXTtJhefVNqwCjyBEFRggfv5s9aEuVYaPaBnHus
[2025-07-09 19:15:26,710] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmTaPvDqXTtJhefVNqwCjyBEFRggfv5s9aEuVYaPaBnHus
[2025-07-09 19:15:26,710] [INFO] [routes.watermark_routes] IPFS upload step completed in 14.03 seconds.
[2025-07-09 19:15:26,711] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-09 19:15:30,904] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-09 19:15:30,904] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-09 19:15:31,737] [ERROR] [routes.watermark_routes] Blockchain logging failed: Failed to log to blockchain: 'SignedTransaction' object has no attribute 'rawTransaction'
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 53, in log_to_chain
    tx_hash = w3.eth.send_raw_transaction(signed_txn.rawTransaction)
AttributeError: 'SignedTransaction' object has no attribute 'rawTransaction'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 160, in watermark_image
    tx_hash = log_to_chain(orig_hash_hex, wm_hash_hex, full_message, orig_cid, wm_cid, crc, parent_hash)
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 57, in log_to_chain
    raise RuntimeError(f"Failed to log to blockchain: {str(e)}")
RuntimeError: Failed to log to blockchain: 'SignedTransaction' object has no attribute 'rawTransaction'
[2025-07-09 19:15:31,746] [INFO] [routes.watermark_routes] Blockchain logging step completed in 5.04 seconds.
[2025-07-09 19:15:31,746] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3b6233cd0be040c195c189296877a771_wm.png to base64
[2025-07-09 19:15:31,746] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/3b6233cd0be040c195c189296877a771_wm.png
[2025-07-09 19:15:31,746] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 19:15:31,747] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 19:15:31,747] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 19:15:31,748] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 19:21:02 ==========


========== New Session: 2025-07-09 19:21:02 ==========


========== New Session: 2025-07-09 19:21:04 ==========


========== New Session: 2025-07-09 19:21:04 ==========


========== New Session: 2025-07-09 19:21:04 ==========
[2025-07-09 19:21:04,351] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:21:04,351] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:21:04,352] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:21:04 ==========


========== New Session: 2025-07-09 19:21:04 ==========


========== New Session: 2025-07-09 19:21:05 ==========


========== New Session: 2025-07-09 19:21:05 ==========


========== New Session: 2025-07-09 19:21:05 ==========
[2025-07-09 19:21:05,778] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:21:05,778] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:21:05,779] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 19:21:12,163] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:21:12,163] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 19:21:12,164] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-30 22-18-03.png, content_type=image/png
[2025-07-09 19:21:12,164] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-09 19:21:12,164] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 19:21:12,164] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 19:21:12,166] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (166, 484, 3)
[2025-07-09 19:21:12,166] [INFO] [routes.watermark_routes] Original image loaded: shape=(166, 484, 3), dtype=uint8
[2025-07-09 19:21:12,166] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-09 19:21:12,176] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-09 19:21:12,177] [DEBUG] [core.dwt_engine] Total bits extracted: 80344
[2025-07-09 19:21:12,177] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-09 19:21:12,177] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-09 19:21:12,177] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 19:21:12,178] [INFO] [routes.watermark_routes] Combined bitstream length: 312 bits
[2025-07-09 19:21:12,178] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 19:21:12,180] [DEBUG] [core.dwt_engine] Embedding 312 bits in Y channel parity
[2025-07-09 19:21:12,181] [DEBUG] [core.dwt_engine] Y-parity embed check: 312 bits embedded, 0 mismatches
[2025-07-09 19:21:12,181] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 19:21:12,181] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/ea9ae7caad4249bfa6244bec48127be3_orig.png
[2025-07-09 19:21:12,181] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/ea9ae7caad4249bfa6244bec48127be3_orig.png
[2025-07-09 19:21:12,183] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 19:21:12,183] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 19:21:12,183] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ea9ae7caad4249bfa6244bec48127be3_wm.png
[2025-07-09 19:21:12,183] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ea9ae7caad4249bfa6244bec48127be3_wm.png
[2025-07-09 19:21:12,184] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 19:21:12,184] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 19:21:12,184] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-09 19:21:12,184] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/ea9ae7caad4249bfa6244bec48127be3_orig.png to Pinata Cloud...
[2025-07-09 19:21:19,032] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmaEiEnT3ZyzKuPsKwo4bzot1RewRBgJiSx37WZaVB9uBi
[2025-07-09 19:21:19,032] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmaEiEnT3ZyzKuPsKwo4bzot1RewRBgJiSx37WZaVB9uBi
[2025-07-09 19:21:19,032] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ea9ae7caad4249bfa6244bec48127be3_wm.png to Pinata Cloud...
[2025-07-09 19:21:22,286] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmTaPvDqXTtJhefVNqwCjyBEFRggfv5s9aEuVYaPaBnHus
[2025-07-09 19:21:22,287] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmTaPvDqXTtJhefVNqwCjyBEFRggfv5s9aEuVYaPaBnHus
[2025-07-09 19:21:22,287] [INFO] [routes.watermark_routes] IPFS upload step completed in 10.10 seconds.
[2025-07-09 19:21:22,287] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-09 19:21:27,684] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-09 19:21:27,685] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-09 19:21:34,914] [ERROR] [routes.watermark_routes] Blockchain logging failed: Failed to log to blockchain: {'code': -32000, 'message': 'invalid chain id, expected: 80002 got: [80001 0 0 0]'}
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 53, in log_to_chain
    tx_hash = w3.eth.send_raw_transaction(signed_txn.raw_transaction)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/eth/eth.py", line 397, in send_raw_transaction
    return self._send_raw_transaction(transaction)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/module.py", line 112, in caller
    result = w3.manager.request_blocking(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/manager.py", line 232, in request_blocking
    return self.formatted_response(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/manager.py", line 198, in formatted_response
    validate_rpc_response_and_raise_if_error(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/validation.py", line 401, in validate_rpc_response_and_raise_if_error
    raise web3_rpc_error
web3.exceptions.Web3RPCError: {'code': -32000, 'message': 'invalid chain id, expected: 80002 got: [80001 0 0 0]'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 160, in watermark_image
    tx_hash = log_to_chain(orig_hash_hex, wm_hash_hex, full_message, orig_cid, wm_cid, crc, parent_hash)
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 57, in log_to_chain
    raise RuntimeError(f"Failed to log to blockchain: {str(e)}")
RuntimeError: Failed to log to blockchain: {'code': -32000, 'message': 'invalid chain id, expected: 80002 got: [80001 0 0 0]'}
[2025-07-09 19:21:34,915] [INFO] [routes.watermark_routes] Blockchain logging step completed in 12.63 seconds.
[2025-07-09 19:21:34,915] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ea9ae7caad4249bfa6244bec48127be3_wm.png to base64
[2025-07-09 19:21:34,915] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ea9ae7caad4249bfa6244bec48127be3_wm.png
[2025-07-09 19:21:34,915] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 19:21:34,915] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 19:21:34,915] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 19:21:34,916] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 19:23:01 ==========


========== New Session: 2025-07-09 19:23:01 ==========


========== New Session: 2025-07-09 19:23:06 ==========


========== New Session: 2025-07-09 19:23:06 ==========


========== New Session: 2025-07-09 19:23:06 ==========
[2025-07-09 19:23:06,065] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:23:06,065] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:23:06,066] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:23:07 ==========


========== New Session: 2025-07-09 19:23:07 ==========


========== New Session: 2025-07-09 19:23:10 ==========


========== New Session: 2025-07-09 19:23:10 ==========


========== New Session: 2025-07-09 19:23:10 ==========
[2025-07-09 19:23:10,421] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:23:10,421] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:23:10,422] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:23:10 ==========


========== New Session: 2025-07-09 19:23:10 ==========


========== New Session: 2025-07-09 19:23:11 ==========


========== New Session: 2025-07-09 19:23:11 ==========


========== New Session: 2025-07-09 19:23:11 ==========
[2025-07-09 19:23:11,622] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:23:11,622] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:23:11,623] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 19:23:15,417] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:23:15,417] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 19:23:15,418] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-30 22-18-03.png, content_type=image/png
[2025-07-09 19:23:15,418] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-09 19:23:15,418] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 19:23:15,418] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 19:23:15,420] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (166, 484, 3)
[2025-07-09 19:23:15,420] [INFO] [routes.watermark_routes] Original image loaded: shape=(166, 484, 3), dtype=uint8
[2025-07-09 19:23:15,420] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-09 19:23:15,431] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-09 19:23:15,431] [DEBUG] [core.dwt_engine] Total bits extracted: 80344
[2025-07-09 19:23:15,431] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-09 19:23:15,432] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-09 19:23:15,432] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 19:23:15,432] [INFO] [routes.watermark_routes] Combined bitstream length: 312 bits
[2025-07-09 19:23:15,432] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 19:23:15,434] [DEBUG] [core.dwt_engine] Embedding 312 bits in Y channel parity
[2025-07-09 19:23:15,434] [DEBUG] [core.dwt_engine] Y-parity embed check: 312 bits embedded, 0 mismatches
[2025-07-09 19:23:15,435] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 19:23:15,435] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/e5ee1592638447e69e9feb99f801ccdc_orig.png
[2025-07-09 19:23:15,435] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/e5ee1592638447e69e9feb99f801ccdc_orig.png
[2025-07-09 19:23:15,436] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 19:23:15,436] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 19:23:15,436] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e5ee1592638447e69e9feb99f801ccdc_wm.png
[2025-07-09 19:23:15,436] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e5ee1592638447e69e9feb99f801ccdc_wm.png
[2025-07-09 19:23:15,438] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 19:23:15,438] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 19:23:15,438] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-09 19:23:15,438] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/e5ee1592638447e69e9feb99f801ccdc_orig.png to Pinata Cloud...
[2025-07-09 19:23:18,485] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmaEiEnT3ZyzKuPsKwo4bzot1RewRBgJiSx37WZaVB9uBi
[2025-07-09 19:23:18,485] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmaEiEnT3ZyzKuPsKwo4bzot1RewRBgJiSx37WZaVB9uBi
[2025-07-09 19:23:18,485] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e5ee1592638447e69e9feb99f801ccdc_wm.png to Pinata Cloud...
[2025-07-09 19:23:20,694] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmTaPvDqXTtJhefVNqwCjyBEFRggfv5s9aEuVYaPaBnHus
[2025-07-09 19:23:20,695] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmTaPvDqXTtJhefVNqwCjyBEFRggfv5s9aEuVYaPaBnHus
[2025-07-09 19:23:20,695] [INFO] [routes.watermark_routes] IPFS upload step completed in 5.26 seconds.
[2025-07-09 19:23:20,695] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-09 19:23:22,583] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-09 19:23:22,584] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-09 19:23:23,821] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0x28750374f2d6a8c5d81059ae265218833bba8959da98fe2698c3653394ae857d
[2025-07-09 19:23:23,822] [INFO] [routes.watermark_routes] Blockchain logging step completed in 3.13 seconds.
[2025-07-09 19:23:23,822] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e5ee1592638447e69e9feb99f801ccdc_wm.png to base64
[2025-07-09 19:23:23,822] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e5ee1592638447e69e9feb99f801ccdc_wm.png
[2025-07-09 19:23:23,822] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 19:23:23,822] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 19:23:23,822] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 19:23:23,823] [INFO] [__main__] App context teardown complete.
[2025-07-09 19:24:48,595] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:24:48,595] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-09 19:24:48,597] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=e5ee1592638447e69e9feb99f801ccdc_wm.png
[2025-07-09 19:24:48,597] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 19:24:48,598] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (166, 484, 3)
[2025-07-09 19:24:48,598] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(166, 484, 3), dtype=uint8
[2025-07-09 19:24:48,598] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-09 19:24:48,609] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1]
[2025-07-09 19:24:48,609] [DEBUG] [core.dwt_engine] Total bits extracted: 80344
[2025-07-09 19:24:48,609] [INFO] [routes.watermark_routes] Extracted total bitstream length: 80344 bits
[2025-07-09 19:24:48,609] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1]
[2025-07-09 19:24:48,610] [INFO] [routes.watermark_routes] Extracted SHA256 hash: dce6a735a32c2c0064399ce60ad25311b1bbc901935edb70e9a2a32d0076ccd9
[2025-07-09 19:24:50,443] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-09 19:24:50,443] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 19:41:42 ==========


========== New Session: 2025-07-09 19:41:42 ==========


========== New Session: 2025-07-09 19:41:44 ==========


========== New Session: 2025-07-09 19:41:44 ==========


========== New Session: 2025-07-09 19:41:44 ==========
[2025-07-09 19:41:44,319] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:41:44,319] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:41:44,320] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:41:44 ==========


========== New Session: 2025-07-09 19:41:44 ==========


========== New Session: 2025-07-09 19:41:45 ==========


========== New Session: 2025-07-09 19:41:45 ==========


========== New Session: 2025-07-09 19:41:45 ==========
[2025-07-09 19:41:45,513] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:41:45,513] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:41:45,514] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 19:43:47,796] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:43:47,796] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 19:44:55 ==========


========== New Session: 2025-07-09 19:44:55 ==========


========== New Session: 2025-07-09 19:44:57 ==========


========== New Session: 2025-07-09 19:44:57 ==========


========== New Session: 2025-07-09 19:44:57 ==========
[2025-07-09 19:44:57,254] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:44:57,255] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:44:57,255] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:45:15 ==========


========== New Session: 2025-07-09 19:45:15 ==========


========== New Session: 2025-07-09 19:45:16 ==========


========== New Session: 2025-07-09 19:45:16 ==========


========== New Session: 2025-07-09 19:45:16 ==========
[2025-07-09 19:45:16,507] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:45:16,507] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:45:16,508] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:45:16 ==========


========== New Session: 2025-07-09 19:45:16 ==========


========== New Session: 2025-07-09 19:45:18 ==========


========== New Session: 2025-07-09 19:45:18 ==========


========== New Session: 2025-07-09 19:45:18 ==========
[2025-07-09 19:45:18,151] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:45:18,151] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:45:18,152] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 19:46:19,142] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:46:19,142] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 19:47:36 ==========


========== New Session: 2025-07-09 19:47:36 ==========


========== New Session: 2025-07-09 19:47:38 ==========


========== New Session: 2025-07-09 19:47:38 ==========


========== New Session: 2025-07-09 19:47:38 ==========
[2025-07-09 19:47:38,449] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:47:38,449] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:47:38,450] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:47:58 ==========


========== New Session: 2025-07-09 19:47:58 ==========


========== New Session: 2025-07-09 19:47:59 ==========


========== New Session: 2025-07-09 19:47:59 ==========


========== New Session: 2025-07-09 19:47:59 ==========
[2025-07-09 19:47:59,544] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:47:59,544] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:47:59,545] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:47:59 ==========


========== New Session: 2025-07-09 19:47:59 ==========


========== New Session: 2025-07-09 19:48:01 ==========


========== New Session: 2025-07-09 19:48:01 ==========


========== New Session: 2025-07-09 19:48:01 ==========
[2025-07-09 19:48:01,088] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:48:01,089] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:48:01,090] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:49:45 ==========


========== New Session: 2025-07-09 19:49:45 ==========


========== New Session: 2025-07-09 19:49:46 ==========


========== New Session: 2025-07-09 19:49:46 ==========


========== New Session: 2025-07-09 19:49:46 ==========
[2025-07-09 19:49:46,689] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:49:46,689] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:49:46,690] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:49:46 ==========


========== New Session: 2025-07-09 19:49:46 ==========


========== New Session: 2025-07-09 19:49:48 ==========


========== New Session: 2025-07-09 19:49:48 ==========


========== New Session: 2025-07-09 19:49:48 ==========
[2025-07-09 19:49:48,762] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:49:48,762] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:49:48,763] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 19:50:04,405] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:50:10,508] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 19:52:00 ==========


========== New Session: 2025-07-09 19:52:00 ==========


========== New Session: 2025-07-09 19:52:01 ==========


========== New Session: 2025-07-09 19:52:01 ==========


========== New Session: 2025-07-09 19:52:01 ==========
[2025-07-09 19:52:01,694] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:52:01,694] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:52:01,695] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 19:52:12,244] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:52:22,153] [INFO] [__main__] App context teardown complete.
[2025-07-09 19:53:20,665] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:53:30,328] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 19:53:46 ==========


========== New Session: 2025-07-09 19:53:46 ==========


========== New Session: 2025-07-09 19:53:48 ==========


========== New Session: 2025-07-09 19:53:48 ==========


========== New Session: 2025-07-09 19:53:48 ==========
[2025-07-09 19:53:48,867] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:53:48,867] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:53:48,868] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:53:49 ==========


========== New Session: 2025-07-09 19:53:49 ==========


========== New Session: 2025-07-09 19:53:50 ==========


========== New Session: 2025-07-09 19:53:50 ==========


========== New Session: 2025-07-09 19:53:50 ==========
[2025-07-09 19:53:50,407] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:53:50,408] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:53:50,408] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 19:53:50,424] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:54:01,248] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-09 19:55:27 ==========


========== New Session: 2025-07-09 19:55:27 ==========


========== New Session: 2025-07-09 19:55:30 ==========


========== New Session: 2025-07-09 19:55:30 ==========


========== New Session: 2025-07-09 19:55:30 ==========
[2025-07-09 19:55:30,743] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:55:30,743] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:55:30,744] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-09 19:55:30 ==========


========== New Session: 2025-07-09 19:55:30 ==========


========== New Session: 2025-07-09 19:55:32 ==========


========== New Session: 2025-07-09 19:55:32 ==========


========== New Session: 2025-07-09 19:55:32 ==========
[2025-07-09 19:55:32,381] [INFO] [__main__] Launching Flask server...
[2025-07-09 19:55:32,381] [INFO] [__main__] Creating Flask app...
[2025-07-09 19:55:32,381] [INFO] [__main__] Registering watermark blueprint...
[2025-07-09 19:56:47,237] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:56:47,237] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 19:56:47,242] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-24 15-26-09.png, content_type=image/png
[2025-07-09 19:56:47,242] [DEBUG] [routes.watermark_routes] Received message of length 3 characters
[2025-07-09 19:56:47,242] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 19:56:47,242] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 19:56:47,260] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 19:56:47,260] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 19:56:47,260] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-09 19:56:47,326] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-09 19:56:47,327] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 19:56:47,327] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-09 19:56:47,327] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-09 19:56:47,327] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 19:56:47,329] [INFO] [routes.watermark_routes] Combined bitstream length: 296 bits
[2025-07-09 19:56:47,329] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 19:56:47,350] [DEBUG] [core.dwt_engine] Embedding 296 bits in Y channel parity
[2025-07-09 19:56:47,351] [DEBUG] [core.dwt_engine] Y-parity embed check: 296 bits embedded, 0 mismatches
[2025-07-09 19:56:47,352] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 19:56:47,352] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/4bf24350ecdf4e3db9c8729e73c63424_orig.png
[2025-07-09 19:56:47,352] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/4bf24350ecdf4e3db9c8729e73c63424_orig.png
[2025-07-09 19:56:47,372] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 19:56:47,372] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 19:56:47,372] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/4bf24350ecdf4e3db9c8729e73c63424_wm.png
[2025-07-09 19:56:47,372] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/4bf24350ecdf4e3db9c8729e73c63424_wm.png
[2025-07-09 19:56:47,390] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 19:56:47,391] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 19:56:47,391] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-09 19:56:47,391] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/4bf24350ecdf4e3db9c8729e73c63424_orig.png to Pinata Cloud...
[2025-07-09 19:57:01,566] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmZM2wA35w4Zrj9vXwdwgttbMuLVeFy7DyBbktxaRVjQEJ
[2025-07-09 19:57:01,566] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmZM2wA35w4Zrj9vXwdwgttbMuLVeFy7DyBbktxaRVjQEJ
[2025-07-09 19:57:01,566] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/4bf24350ecdf4e3db9c8729e73c63424_wm.png to Pinata Cloud...
[2025-07-09 19:57:12,701] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmcArcyro2HytHurTKsweafUSyHLWfEZF8TVj5h6PnU8yU
[2025-07-09 19:57:12,701] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmcArcyro2HytHurTKsweafUSyHLWfEZF8TVj5h6PnU8yU
[2025-07-09 19:57:12,701] [INFO] [routes.watermark_routes] IPFS upload step completed in 25.31 seconds.
[2025-07-09 19:57:12,701] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-09 19:57:14,753] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-09 19:57:14,754] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-09 19:57:15,985] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0xd2b5dd2cd80cdd1ca5eb3d26faee9762b21a0cbfb35821291a6e167e70242462
[2025-07-09 19:57:15,985] [INFO] [routes.watermark_routes] Blockchain logging step completed in 3.28 seconds.
[2025-07-09 19:57:15,985] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/4bf24350ecdf4e3db9c8729e73c63424_wm.png to base64
[2025-07-09 19:57:15,985] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/4bf24350ecdf4e3db9c8729e73c63424_wm.png
[2025-07-09 19:57:15,987] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 19:57:15,987] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 19:57:15,987] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 19:57:15,992] [INFO] [__main__] App context teardown complete.
[2025-07-09 19:57:28,598] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:57:28,599] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-09 19:57:28,603] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=4bf24350ecdf4e3db9c8729e73c63424_wm.png
[2025-07-09 19:57:28,603] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 19:57:28,614] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 19:57:28,614] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 19:57:28,614] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-09 19:57:28,676] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0]
[2025-07-09 19:57:28,676] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 19:57:28,676] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-09 19:57:28,676] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0]
[2025-07-09 19:57:28,676] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 9eed54f2e77ad288363908d9c16eded400f5bbf9ab9483531fc449beb5a0e7b7
[2025-07-09 19:57:30,129] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-09 19:57:30,131] [INFO] [__main__] App context teardown complete.
[2025-07-09 19:57:56,997] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:57:56,997] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-09 19:57:57,001] [DEBUG] [routes.watermark_routes] Received file: filename=4bf24350ecdf4e3db9c8729e73c63424_wm.png, content_type=image/png
[2025-07-09 19:57:57,001] [DEBUG] [routes.watermark_routes] Received message of length 3 characters
[2025-07-09 19:57:57,001] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-09 19:57:57,001] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 19:57:57,013] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 19:57:57,014] [INFO] [routes.watermark_routes] Original image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 19:57:57,014] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-09 19:57:57,077] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0]
[2025-07-09 19:57:57,077] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 19:57:57,078] [INFO] [routes.watermark_routes] Found existing watermark with 1 messages. Appending new message.
[2025-07-09 19:57:57,078] [INFO] [routes.watermark_routes] Total messages to embed: 2
[2025-07-09 19:57:57,078] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-09 19:57:57,079] [INFO] [routes.watermark_routes] Combined bitstream length: 336 bits
[2025-07-09 19:57:57,079] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-09 19:57:57,094] [DEBUG] [core.dwt_engine] Embedding 336 bits in Y channel parity
[2025-07-09 19:57:57,094] [DEBUG] [core.dwt_engine] Y-parity embed check: 336 bits embedded, 0 mismatches
[2025-07-09 19:57:57,094] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-09 19:57:57,095] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/323dcbfdea4d42919c88ac2e2c8185fb_orig.png
[2025-07-09 19:57:57,095] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/323dcbfdea4d42919c88ac2e2c8185fb_orig.png
[2025-07-09 19:57:57,114] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 19:57:57,114] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-09 19:57:57,114] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/323dcbfdea4d42919c88ac2e2c8185fb_wm.png
[2025-07-09 19:57:57,114] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/323dcbfdea4d42919c88ac2e2c8185fb_wm.png
[2025-07-09 19:57:57,134] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-09 19:57:57,134] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-09 19:57:57,134] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-09 19:57:57,134] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/323dcbfdea4d42919c88ac2e2c8185fb_orig.png to Pinata Cloud...
[2025-07-09 19:58:14,951] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmcArcyro2HytHurTKsweafUSyHLWfEZF8TVj5h6PnU8yU
[2025-07-09 19:58:14,952] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmcArcyro2HytHurTKsweafUSyHLWfEZF8TVj5h6PnU8yU
[2025-07-09 19:58:14,952] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/323dcbfdea4d42919c88ac2e2c8185fb_wm.png to Pinata Cloud...
[2025-07-09 19:58:26,634] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: Qmbt8gEWhjXQYCnDanUJb3mhDzkGH29G6GAxfc89RrePQh
[2025-07-09 19:58:26,634] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: Qmbt8gEWhjXQYCnDanUJb3mhDzkGH29G6GAxfc89RrePQh
[2025-07-09 19:58:26,634] [INFO] [routes.watermark_routes] IPFS upload step completed in 29.50 seconds.
[2025-07-09 19:58:26,634] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-09 19:58:28,271] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-09 19:58:28,272] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-09 19:58:29,294] [ERROR] [routes.watermark_routes] Blockchain logging failed: Failed to log to blockchain: {'code': -32000, 'message': 'INTERNAL_ERROR: could not replace existing tx'}
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 54, in log_to_chain
    tx_hash = w3.eth.send_raw_transaction(signed_txn.raw_transaction)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/eth/eth.py", line 397, in send_raw_transaction
    return self._send_raw_transaction(transaction)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/module.py", line 112, in caller
    result = w3.manager.request_blocking(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/manager.py", line 232, in request_blocking
    return self.formatted_response(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/manager.py", line 198, in formatted_response
    validate_rpc_response_and_raise_if_error(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/validation.py", line 401, in validate_rpc_response_and_raise_if_error
    raise web3_rpc_error
web3.exceptions.Web3RPCError: {'code': -32000, 'message': 'INTERNAL_ERROR: could not replace existing tx'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 160, in watermark_image
    tx_hash = log_to_chain(orig_hash_hex, wm_hash_hex, full_message, orig_cid, wm_cid, crc, parent_hash)
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 58, in log_to_chain
    raise RuntimeError(f"Failed to log to blockchain: {str(e)}")
RuntimeError: Failed to log to blockchain: {'code': -32000, 'message': 'INTERNAL_ERROR: could not replace existing tx'}
[2025-07-09 19:58:29,295] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.66 seconds.
[2025-07-09 19:58:29,295] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/323dcbfdea4d42919c88ac2e2c8185fb_wm.png to base64
[2025-07-09 19:58:29,295] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/323dcbfdea4d42919c88ac2e2c8185fb_wm.png
[2025-07-09 19:58:29,296] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-09 19:58:29,296] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-09 19:58:29,296] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-09 19:58:29,300] [INFO] [__main__] App context teardown complete.
[2025-07-09 19:58:37,697] [DEBUG] [__main__] Received a new request.
[2025-07-09 19:58:37,697] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-09 19:58:37,701] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=323dcbfdea4d42919c88ac2e2c8185fb_wm.png
[2025-07-09 19:58:37,701] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-09 19:58:37,712] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (840, 700, 3)
[2025-07-09 19:58:37,713] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(840, 700, 3), dtype=uint8
[2025-07-09 19:58:37,713] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-09 19:58:37,777] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1]
[2025-07-09 19:58:37,777] [DEBUG] [core.dwt_engine] Total bits extracted: 588000
[2025-07-09 19:58:37,777] [INFO] [routes.watermark_routes] Extracted total bitstream length: 588000 bits
[2025-07-09 19:58:37,777] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1]
[2025-07-09 19:58:37,778] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 943afa7304caf1eb488338286d91b0d894da137932086c5b7fec6264192cb43e
[2025-07-09 19:58:39,535] [INFO] [routes.watermark_routes] Extraction complete: 2 messages found
[2025-07-09 19:58:39,537] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 18:21:07 ==========


========== New Session: 2025-07-10 18:21:07 ==========


========== New Session: 2025-07-10 18:21:13 ==========


========== New Session: 2025-07-10 18:21:13 ==========


========== New Session: 2025-07-10 18:21:13 ==========
[2025-07-10 18:21:13,813] [INFO] [__main__] Launching Flask server...
[2025-07-10 18:21:13,813] [INFO] [__main__] Creating Flask app...
[2025-07-10 18:21:13,814] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 18:21:13 ==========


========== New Session: 2025-07-10 18:21:14 ==========


========== New Session: 2025-07-10 18:21:15 ==========


========== New Session: 2025-07-10 18:21:15 ==========


========== New Session: 2025-07-10 18:21:15 ==========
[2025-07-10 18:21:15,416] [INFO] [__main__] Launching Flask server...
[2025-07-10 18:21:15,417] [INFO] [__main__] Creating Flask app...
[2025-07-10 18:21:15,417] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 18:21:49,143] [DEBUG] [__main__] Received a new request.
[2025-07-10 18:21:49,143] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 18:21:49,145] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-09 16-50-49.png, content_type=image/png
[2025-07-10 18:21:49,145] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-10 18:21:49,145] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 18:21:49,145] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 18:21:49,158] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (328, 293, 3)
[2025-07-10 18:21:49,158] [INFO] [routes.watermark_routes] Original image loaded: shape=(328, 293, 3), dtype=uint8
[2025-07-10 18:21:49,158] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 18:21:49,173] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-10 18:21:49,173] [DEBUG] [core.dwt_engine] Total bits extracted: 96104
[2025-07-10 18:21:49,173] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 18:21:49,173] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 18:21:49,173] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 18:21:49,174] [INFO] [routes.watermark_routes] Combined bitstream length: 312 bits
[2025-07-10 18:21:49,174] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 18:21:49,177] [DEBUG] [core.dwt_engine] Embedding 312 bits in Y channel parity
[2025-07-10 18:21:49,178] [DEBUG] [core.dwt_engine] Y-parity embed check: 312 bits embedded, 0 mismatches
[2025-07-10 18:21:49,181] [ERROR] [routes.watermark_routes] Embedding failed due to unexpected error
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 79, in watermark_image
    watermarked_image = embed_bits_in_dwt(image, combined_stream)
  File "/home/gowtham/dwt-watermarking/backend/core/dwt_engine.py", line 53, in embed_bits_in_dwt
    merged = cv2.merge([modified_Y, Cr, Cb])
cv2.error: OpenCV(4.11.0) /io/opencv/modules/core/src/merge.dispatch.cpp:130: error: (-215:Assertion failed) mv[i].size == mv[0].size && mv[i].depth() == depth in function 'merge'

[2025-07-10 18:21:49,182] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 18:22:53 ==========


========== New Session: 2025-07-10 18:22:53 ==========


========== New Session: 2025-07-10 18:22:59 ==========


========== New Session: 2025-07-10 18:22:59 ==========


========== New Session: 2025-07-10 18:22:59 ==========
[2025-07-10 18:22:59,704] [INFO] [__main__] Launching Flask server...
[2025-07-10 18:22:59,704] [INFO] [__main__] Creating Flask app...
[2025-07-10 18:22:59,705] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 18:22:59 ==========


========== New Session: 2025-07-10 18:22:59 ==========


========== New Session: 2025-07-10 18:23:00 ==========


========== New Session: 2025-07-10 18:23:00 ==========


========== New Session: 2025-07-10 18:23:00 ==========
[2025-07-10 18:23:00,829] [INFO] [__main__] Launching Flask server...
[2025-07-10 18:23:00,830] [INFO] [__main__] Creating Flask app...
[2025-07-10 18:23:00,830] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 18:23:09,408] [DEBUG] [__main__] Received a new request.
[2025-07-10 18:23:09,408] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 18:23:09,409] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-30 19-12-30.png, content_type=image/png
[2025-07-10 18:23:09,409] [DEBUG] [routes.watermark_routes] Received message of length 6 characters
[2025-07-10 18:23:09,409] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 18:23:09,410] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 18:23:09,414] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (368, 507, 3)
[2025-07-10 18:23:09,414] [INFO] [routes.watermark_routes] Original image loaded: shape=(368, 507, 3), dtype=uint8
[2025-07-10 18:23:09,414] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 18:23:09,445] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-10 18:23:09,446] [DEBUG] [core.dwt_engine] Total bits extracted: 186576
[2025-07-10 18:23:09,446] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 18:23:09,446] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 18:23:09,446] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 18:23:09,447] [INFO] [routes.watermark_routes] Combined bitstream length: 320 bits
[2025-07-10 18:23:09,447] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 18:23:09,454] [DEBUG] [core.dwt_engine] Embedding 320 bits in Y channel parity
[2025-07-10 18:23:09,454] [DEBUG] [core.dwt_engine] Y-parity embed check: 320 bits embedded, 0 mismatches
[2025-07-10 18:23:09,454] [ERROR] [routes.watermark_routes] Embedding failed due to unexpected error
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 79, in watermark_image
    watermarked_image = embed_bits_in_dwt(image, combined_stream)
  File "/home/gowtham/dwt-watermarking/backend/core/dwt_engine.py", line 53, in embed_bits_in_dwt
    merged = cv2.merge([modified_Y, Cr, Cb])
cv2.error: OpenCV(4.11.0) /io/opencv/modules/core/src/merge.dispatch.cpp:130: error: (-215:Assertion failed) mv[i].size == mv[0].size && mv[i].depth() == depth in function 'merge'

[2025-07-10 18:23:09,456] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 18:25:41 ==========


========== New Session: 2025-07-10 18:25:41 ==========


========== New Session: 2025-07-10 18:25:42 ==========


========== New Session: 2025-07-10 18:25:42 ==========


========== New Session: 2025-07-10 18:25:42 ==========
[2025-07-10 18:25:42,726] [INFO] [__main__] Launching Flask server...
[2025-07-10 18:25:42,727] [INFO] [__main__] Creating Flask app...
[2025-07-10 18:25:42,728] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 18:27:15 ==========


========== New Session: 2025-07-10 18:27:16 ==========


========== New Session: 2025-07-10 18:27:17 ==========


========== New Session: 2025-07-10 18:27:17 ==========


========== New Session: 2025-07-10 18:27:17 ==========
[2025-07-10 18:27:17,718] [INFO] [__main__] Launching Flask server...
[2025-07-10 18:27:17,718] [INFO] [__main__] Creating Flask app...
[2025-07-10 18:27:17,719] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 18:27:17 ==========


========== New Session: 2025-07-10 18:27:17 ==========


========== New Session: 2025-07-10 18:27:19 ==========


========== New Session: 2025-07-10 18:27:19 ==========


========== New Session: 2025-07-10 18:27:19 ==========
[2025-07-10 18:27:19,323] [INFO] [__main__] Launching Flask server...
[2025-07-10 18:27:19,323] [INFO] [__main__] Creating Flask app...
[2025-07-10 18:27:19,324] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 18:27:33,235] [DEBUG] [__main__] Received a new request.
[2025-07-10 18:27:33,235] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 18:27:33,237] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-29 23-41-36.png, content_type=image/png
[2025-07-10 18:27:33,237] [DEBUG] [routes.watermark_routes] Received message of length 6 characters
[2025-07-10 18:27:33,237] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 18:27:33,237] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 18:27:33,248] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (670, 791, 3)
[2025-07-10 18:27:33,248] [INFO] [routes.watermark_routes] Original image loaded: shape=(670, 791, 3), dtype=uint8
[2025-07-10 18:27:33,248] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 18:27:33,308] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-10 18:27:33,308] [DEBUG] [core.dwt_engine] Total bits extracted: 529970
[2025-07-10 18:27:33,309] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 18:27:33,309] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 18:27:33,309] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 18:27:33,310] [INFO] [routes.watermark_routes] Combined bitstream length: 320 bits
[2025-07-10 18:27:33,310] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 18:27:33,332] [DEBUG] [core.dwt_engine] Embedding 320 bits in Y channel parity
[2025-07-10 18:27:33,332] [DEBUG] [core.dwt_engine] Y-parity embed check: 320 bits embedded, 0 mismatches
[2025-07-10 18:27:33,332] [WARNING] [core.dwt_engine] Resizing Cr from (670, 791) to (670, 792)
[2025-07-10 18:27:33,342] [WARNING] [core.dwt_engine] Resizing Cb from (670, 791) to (670, 792)
[2025-07-10 18:27:33,342] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 18:27:33,342] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/fd3c39aeb91149f5b6fa47381bff4631_orig.png
[2025-07-10 18:27:33,343] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/fd3c39aeb91149f5b6fa47381bff4631_orig.png
[2025-07-10 18:27:33,350] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 18:27:33,351] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 18:27:33,351] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/fd3c39aeb91149f5b6fa47381bff4631_wm.png
[2025-07-10 18:27:33,351] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/fd3c39aeb91149f5b6fa47381bff4631_wm.png
[2025-07-10 18:27:33,356] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 18:27:33,356] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 18:27:33,356] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 18:27:33,356] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/fd3c39aeb91149f5b6fa47381bff4631_orig.png to Pinata Cloud...
[2025-07-10 18:27:37,906] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmT3AUkoxo2ombuqqNbBNdqN2AHCBTCZ9Qusi6zQ34fEWH
[2025-07-10 18:27:37,907] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmT3AUkoxo2ombuqqNbBNdqN2AHCBTCZ9Qusi6zQ34fEWH
[2025-07-10 18:27:37,907] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/fd3c39aeb91149f5b6fa47381bff4631_wm.png to Pinata Cloud...
[2025-07-10 18:27:40,475] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmcZGWb18SLHcMUoLN8Pm4Q8fmc5aUJj8GUxSPerHpBjk3
[2025-07-10 18:27:40,475] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmcZGWb18SLHcMUoLN8Pm4Q8fmc5aUJj8GUxSPerHpBjk3
[2025-07-10 18:27:40,475] [INFO] [routes.watermark_routes] IPFS upload step completed in 7.12 seconds.
[2025-07-10 18:27:40,475] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 18:27:42,082] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 18:27:42,082] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 18:27:43,406] [ERROR] [routes.watermark_routes] Blockchain logging failed: Failed to log to blockchain: {'code': -32000, 'message': 'INTERNAL_ERROR: could not replace existing tx'}
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 54, in log_to_chain
    tx_hash = w3.eth.send_raw_transaction(signed_txn.raw_transaction)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/eth/eth.py", line 397, in send_raw_transaction
    return self._send_raw_transaction(transaction)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/module.py", line 112, in caller
    result = w3.manager.request_blocking(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/manager.py", line 232, in request_blocking
    return self.formatted_response(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/manager.py", line 198, in formatted_response
    validate_rpc_response_and_raise_if_error(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/validation.py", line 401, in validate_rpc_response_and_raise_if_error
    raise web3_rpc_error
web3.exceptions.Web3RPCError: {'code': -32000, 'message': 'INTERNAL_ERROR: could not replace existing tx'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 160, in watermark_image
    tx_hash = log_to_chain(orig_hash_hex, wm_hash_hex, full_message, orig_cid, wm_cid, crc, parent_hash)
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 58, in log_to_chain
    raise RuntimeError(f"Failed to log to blockchain: {str(e)}")
RuntimeError: Failed to log to blockchain: {'code': -32000, 'message': 'INTERNAL_ERROR: could not replace existing tx'}
[2025-07-10 18:27:43,407] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.93 seconds.
[2025-07-10 18:27:43,407] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/fd3c39aeb91149f5b6fa47381bff4631_wm.png to base64
[2025-07-10 18:27:43,407] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/fd3c39aeb91149f5b6fa47381bff4631_wm.png
[2025-07-10 18:27:43,407] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 18:27:43,407] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 18:27:43,408] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 18:27:43,409] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 18:34:58 ==========


========== New Session: 2025-07-10 18:34:58 ==========


========== New Session: 2025-07-10 18:34:59 ==========


========== New Session: 2025-07-10 18:34:59 ==========


========== New Session: 2025-07-10 18:34:59 ==========
[2025-07-10 18:34:59,616] [INFO] [__main__] Launching Flask server...
[2025-07-10 18:34:59,616] [INFO] [__main__] Creating Flask app...
[2025-07-10 18:34:59,617] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 18:34:59 ==========


========== New Session: 2025-07-10 18:34:59 ==========


========== New Session: 2025-07-10 18:35:00 ==========


========== New Session: 2025-07-10 18:35:00 ==========


========== New Session: 2025-07-10 18:35:00 ==========
[2025-07-10 18:35:00,791] [INFO] [__main__] Launching Flask server...
[2025-07-10 18:35:00,791] [INFO] [__main__] Creating Flask app...
[2025-07-10 18:35:00,792] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 18:35:13,445] [DEBUG] [__main__] Received a new request.
[2025-07-10 18:35:13,445] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 18:35:13,449] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-06-06 19-15-49.png, content_type=image/png
[2025-07-10 18:35:13,449] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-10 18:35:13,450] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 18:35:13,450] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 18:35:13,487] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-07-10 18:35:13,488] [INFO] [routes.watermark_routes] Original image loaded: shape=(1080, 1920, 3), dtype=uint8
[2025-07-10 18:35:13,488] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 18:35:13,725] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-10 18:35:13,725] [DEBUG] [core.dwt_engine] Total bits extracted: 2073600
[2025-07-10 18:35:13,727] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 18:35:13,727] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 18:35:13,727] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 18:35:13,732] [INFO] [routes.watermark_routes] Combined bitstream length: 304 bits
[2025-07-10 18:35:13,732] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 18:35:13,806] [DEBUG] [core.dwt_engine] Embedding 304 bits in Y channel parity
[2025-07-10 18:35:13,806] [DEBUG] [core.dwt_engine] Y-parity embed check: 304 bits embedded, 0 mismatches
[2025-07-10 18:35:13,807] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 18:35:13,807] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/0d128960b56e440a8667d35760d5e7a6_orig.png
[2025-07-10 18:35:13,808] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/0d128960b56e440a8667d35760d5e7a6_orig.png
[2025-07-10 18:35:13,852] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 18:35:13,852] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 18:35:13,852] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/0d128960b56e440a8667d35760d5e7a6_wm.png
[2025-07-10 18:35:13,852] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/0d128960b56e440a8667d35760d5e7a6_wm.png
[2025-07-10 18:35:13,897] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 18:35:13,897] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 18:35:13,897] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 18:35:13,897] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/0d128960b56e440a8667d35760d5e7a6_orig.png to Pinata Cloud...
[2025-07-10 18:35:32,928] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmSqW1udLapkFHYGvVjHyZ9zUQQvZRXYrh2yzjn87eqXtd
[2025-07-10 18:35:32,929] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmSqW1udLapkFHYGvVjHyZ9zUQQvZRXYrh2yzjn87eqXtd
[2025-07-10 18:35:32,929] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/0d128960b56e440a8667d35760d5e7a6_wm.png to Pinata Cloud...
[2025-07-10 18:35:44,803] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmThagjnYmgYcAf3h68nu5CgLt8fdVvNm8NBHNVtvaNQRm
[2025-07-10 18:35:44,804] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmThagjnYmgYcAf3h68nu5CgLt8fdVvNm8NBHNVtvaNQRm
[2025-07-10 18:35:44,804] [INFO] [routes.watermark_routes] IPFS upload step completed in 30.91 seconds.
[2025-07-10 18:35:44,804] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 18:35:46,242] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 18:35:46,242] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 18:35:47,043] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0x261043b9dd3b8f8b288ad44f7da03ef98c63996250464c3ec563bdbe713fcf50
[2025-07-10 18:35:47,043] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.24 seconds.
[2025-07-10 18:35:47,043] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/0d128960b56e440a8667d35760d5e7a6_wm.png to base64
[2025-07-10 18:35:47,043] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/0d128960b56e440a8667d35760d5e7a6_wm.png
[2025-07-10 18:35:47,045] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 18:35:47,045] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 18:35:47,045] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 18:35:47,056] [INFO] [__main__] App context teardown complete.
[2025-07-10 18:47:21,108] [DEBUG] [__main__] Received a new request.
[2025-07-10 18:47:21,108] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-10 18:47:21,112] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=0d128960b56e440a8667d35760d5e7a6_wm.png
[2025-07-10 18:47:21,112] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 18:47:21,139] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-07-10 18:47:21,139] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(1080, 1920, 3), dtype=uint8
[2025-07-10 18:47:21,139] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-10 18:47:21,359] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1]
[2025-07-10 18:47:21,359] [DEBUG] [core.dwt_engine] Total bits extracted: 2073600
[2025-07-10 18:47:21,359] [INFO] [routes.watermark_routes] Extracted total bitstream length: 2073600 bits
[2025-07-10 18:47:21,359] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1]
[2025-07-10 18:47:21,359] [INFO] [routes.watermark_routes] Extracted SHA256 hash: a15cfdc70b27d51e9d74f3b8bf42cb3086c8a2e980802581755974cb4d5ed0a0
[2025-07-10 18:47:22,474] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-10 18:47:22,479] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 19:07:47 ==========


========== New Session: 2025-07-10 19:07:47 ==========


========== New Session: 2025-07-10 19:07:48 ==========


========== New Session: 2025-07-10 19:07:48 ==========


========== New Session: 2025-07-10 19:07:48 ==========
[2025-07-10 19:07:48,604] [INFO] [__main__] Launching Flask server...
[2025-07-10 19:07:48,605] [INFO] [__main__] Creating Flask app...
[2025-07-10 19:07:48,605] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 19:07:48 ==========


========== New Session: 2025-07-10 19:07:48 ==========


========== New Session: 2025-07-10 19:07:49 ==========


========== New Session: 2025-07-10 19:07:49 ==========


========== New Session: 2025-07-10 19:07:49 ==========
[2025-07-10 19:07:49,655] [INFO] [__main__] Launching Flask server...
[2025-07-10 19:07:49,655] [INFO] [__main__] Creating Flask app...
[2025-07-10 19:07:49,655] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 19:07:59 ==========


========== New Session: 2025-07-10 19:07:59 ==========


========== New Session: 2025-07-10 19:07:59 ==========


========== New Session: 2025-07-10 19:07:59 ==========


========== New Session: 2025-07-10 19:07:59 ==========
[2025-07-10 19:07:59,871] [INFO] [__main__] Launching Flask server...
[2025-07-10 19:07:59,871] [INFO] [__main__] Creating Flask app...
[2025-07-10 19:07:59,872] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 19:08:15 ==========


========== New Session: 2025-07-10 19:08:15 ==========


========== New Session: 2025-07-10 19:08:16 ==========


========== New Session: 2025-07-10 19:08:16 ==========


========== New Session: 2025-07-10 19:08:16 ==========
[2025-07-10 19:08:16,601] [INFO] [__main__] Launching Flask server...
[2025-07-10 19:08:16,601] [INFO] [__main__] Creating Flask app...
[2025-07-10 19:08:16,602] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 19:08:16 ==========


========== New Session: 2025-07-10 19:08:16 ==========


========== New Session: 2025-07-10 19:08:17 ==========


========== New Session: 2025-07-10 19:08:17 ==========


========== New Session: 2025-07-10 19:08:17 ==========
[2025-07-10 19:08:17,639] [INFO] [__main__] Launching Flask server...
[2025-07-10 19:08:17,639] [INFO] [__main__] Creating Flask app...
[2025-07-10 19:08:17,639] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 19:08:53,255] [DEBUG] [__main__] Received a new request.
[2025-07-10 19:08:53,255] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 19:08:53,256] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-30 03-16-43.png, content_type=image/png
[2025-07-10 19:08:53,256] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-10 19:08:53,257] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 19:08:53,257] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 19:08:53,264] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (412, 817, 3)
[2025-07-10 19:08:53,264] [INFO] [routes.watermark_routes] Original image loaded: shape=(412, 817, 3), dtype=uint8
[2025-07-10 19:08:53,264] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 19:08:53,305] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-10 19:08:53,305] [DEBUG] [core.dwt_engine] Total bits extracted: 336604
[2025-07-10 19:08:53,306] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 19:08:53,306] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 19:08:53,306] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 19:08:53,307] [INFO] [routes.watermark_routes] Combined bitstream length: 304 bits
[2025-07-10 19:08:53,307] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 19:08:53,319] [DEBUG] [core.dwt_engine] Embedding 304 bits in Y channel parity
[2025-07-10 19:08:53,319] [DEBUG] [core.dwt_engine] Y-parity embed check: 304 bits embedded, 0 mismatches
[2025-07-10 19:08:53,319] [WARNING] [core.dwt_engine] Resizing Cr from (412, 817) to (412, 818)
[2025-07-10 19:08:53,319] [WARNING] [core.dwt_engine] Resizing Cb from (412, 817) to (412, 818)
[2025-07-10 19:08:53,320] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 19:08:53,320] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/26a5e748786d49849e99abc68d340a2c_orig.png
[2025-07-10 19:08:53,320] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/26a5e748786d49849e99abc68d340a2c_orig.png
[2025-07-10 19:08:53,323] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 19:08:53,323] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 19:08:53,323] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/26a5e748786d49849e99abc68d340a2c_wm.png
[2025-07-10 19:08:53,323] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/26a5e748786d49849e99abc68d340a2c_wm.png
[2025-07-10 19:08:53,326] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 19:08:53,326] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 19:08:53,326] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 19:08:53,327] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/26a5e748786d49849e99abc68d340a2c_orig.png to Pinata Cloud...
[2025-07-10 19:08:55,225] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmT8Ybkyi4sfdrQfpA9DFXzRxBN8Rx4qvWpDvjmX9Q24Qe
[2025-07-10 19:08:55,225] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmT8Ybkyi4sfdrQfpA9DFXzRxBN8Rx4qvWpDvjmX9Q24Qe
[2025-07-10 19:08:55,225] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/26a5e748786d49849e99abc68d340a2c_wm.png to Pinata Cloud...
[2025-07-10 19:08:57,565] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmcUYWi9Di3tND6GtVxDWhVPjFyzSyjkizQEKxh7fbNPet
[2025-07-10 19:08:57,566] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmcUYWi9Di3tND6GtVxDWhVPjFyzSyjkizQEKxh7fbNPet
[2025-07-10 19:08:57,566] [INFO] [routes.watermark_routes] IPFS upload step completed in 4.24 seconds.
[2025-07-10 19:08:57,566] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 19:08:58,619] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 19:08:58,619] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 19:08:59,807] [ERROR] [routes.watermark_routes] Blockchain logging failed: Failed to log to blockchain: {'code': -32000, 'message': 'INTERNAL_ERROR: could not replace existing tx'}
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 63, in log_to_chain
    tx_hash = w3.eth.send_raw_transaction(signed_txn.raw_transaction)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/eth/eth.py", line 397, in send_raw_transaction
    return self._send_raw_transaction(transaction)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/module.py", line 112, in caller
    result = w3.manager.request_blocking(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/manager.py", line 232, in request_blocking
    return self.formatted_response(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/manager.py", line 198, in formatted_response
    validate_rpc_response_and_raise_if_error(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/validation.py", line 401, in validate_rpc_response_and_raise_if_error
    raise web3_rpc_error
web3.exceptions.Web3RPCError: {'code': -32000, 'message': 'INTERNAL_ERROR: could not replace existing tx'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 160, in watermark_image
    tx_hash = log_to_chain(orig_hash_hex, wm_hash_hex, full_message, orig_cid, wm_cid, crc, parent_hash)
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 67, in log_to_chain
    raise RuntimeError(f"Failed to log to blockchain: {str(e)}")
RuntimeError: Failed to log to blockchain: {'code': -32000, 'message': 'INTERNAL_ERROR: could not replace existing tx'}
[2025-07-10 19:08:59,808] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.24 seconds.
[2025-07-10 19:08:59,808] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/26a5e748786d49849e99abc68d340a2c_wm.png to base64
[2025-07-10 19:08:59,808] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/26a5e748786d49849e99abc68d340a2c_wm.png
[2025-07-10 19:08:59,808] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 19:08:59,808] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 19:08:59,808] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 19:08:59,809] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 19:12:10 ==========


========== New Session: 2025-07-10 19:12:11 ==========


========== New Session: 2025-07-10 19:12:11 ==========


========== New Session: 2025-07-10 19:12:11 ==========


========== New Session: 2025-07-10 19:12:11 ==========
[2025-07-10 19:12:11,820] [INFO] [__main__] Launching Flask server...
[2025-07-10 19:12:11,820] [INFO] [__main__] Creating Flask app...
[2025-07-10 19:12:11,820] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 19:12:34 ==========


========== New Session: 2025-07-10 19:12:34 ==========


========== New Session: 2025-07-10 19:12:35 ==========


========== New Session: 2025-07-10 19:12:35 ==========


========== New Session: 2025-07-10 19:12:35 ==========
[2025-07-10 19:12:35,007] [INFO] [__main__] Launching Flask server...
[2025-07-10 19:12:35,007] [INFO] [__main__] Creating Flask app...
[2025-07-10 19:12:35,008] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 19:12:35 ==========


========== New Session: 2025-07-10 19:12:35 ==========


========== New Session: 2025-07-10 19:12:35 ==========


========== New Session: 2025-07-10 19:12:35 ==========


========== New Session: 2025-07-10 19:12:35 ==========
[2025-07-10 19:12:35,988] [INFO] [__main__] Launching Flask server...
[2025-07-10 19:12:35,988] [INFO] [__main__] Creating Flask app...
[2025-07-10 19:12:35,989] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 19:24:31,569] [DEBUG] [__main__] Received a new request.
[2025-07-10 19:24:31,570] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 19:24:31,571] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-30 03-16-43.png, content_type=image/png
[2025-07-10 19:24:31,572] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-10 19:24:31,572] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 19:24:31,572] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 19:24:31,579] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (412, 817, 3)
[2025-07-10 19:24:31,579] [INFO] [routes.watermark_routes] Original image loaded: shape=(412, 817, 3), dtype=uint8
[2025-07-10 19:24:31,579] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 19:24:31,625] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-10 19:24:31,626] [DEBUG] [core.dwt_engine] Total bits extracted: 336604
[2025-07-10 19:24:31,626] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 19:24:31,626] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 19:24:31,626] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 19:24:31,628] [INFO] [routes.watermark_routes] Combined bitstream length: 304 bits
[2025-07-10 19:24:31,628] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 19:24:31,646] [DEBUG] [core.dwt_engine] Embedding 304 bits in Y channel parity
[2025-07-10 19:24:31,646] [DEBUG] [core.dwt_engine] Y-parity embed check: 304 bits embedded, 0 mismatches
[2025-07-10 19:24:31,646] [WARNING] [core.dwt_engine] Resizing Cr from (412, 817) to (412, 818)
[2025-07-10 19:24:31,647] [WARNING] [core.dwt_engine] Resizing Cb from (412, 817) to (412, 818)
[2025-07-10 19:24:31,647] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 19:24:31,647] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/d3df88bdd1bb4540953a70f50aefb64f_orig.png
[2025-07-10 19:24:31,647] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/d3df88bdd1bb4540953a70f50aefb64f_orig.png
[2025-07-10 19:24:31,651] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 19:24:31,651] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 19:24:31,651] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/d3df88bdd1bb4540953a70f50aefb64f_wm.png
[2025-07-10 19:24:31,651] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/d3df88bdd1bb4540953a70f50aefb64f_wm.png
[2025-07-10 19:24:31,656] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 19:24:31,656] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 19:24:31,656] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 19:24:31,657] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/d3df88bdd1bb4540953a70f50aefb64f_orig.png to Pinata Cloud...
[2025-07-10 19:24:33,499] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmT8Ybkyi4sfdrQfpA9DFXzRxBN8Rx4qvWpDvjmX9Q24Qe
[2025-07-10 19:24:33,500] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmT8Ybkyi4sfdrQfpA9DFXzRxBN8Rx4qvWpDvjmX9Q24Qe
[2025-07-10 19:24:33,500] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/d3df88bdd1bb4540953a70f50aefb64f_wm.png to Pinata Cloud...
[2025-07-10 19:24:35,052] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmdsG2d2ykuTMghg76kzKZJe6ATesUPCfh6W7fTck8c2So
[2025-07-10 19:24:35,053] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmdsG2d2ykuTMghg76kzKZJe6ATesUPCfh6W7fTck8c2So
[2025-07-10 19:24:35,053] [INFO] [routes.watermark_routes] IPFS upload step completed in 3.40 seconds.
[2025-07-10 19:24:35,053] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 19:24:36,141] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 19:24:36,141] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 19:24:37,289] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0xb67660a9a8fc7e32bf2ec96f7e84fc913f725590c60fc8d2fb6d617b7c73f5dc
[2025-07-10 19:24:37,289] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.24 seconds.
[2025-07-10 19:24:37,289] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/d3df88bdd1bb4540953a70f50aefb64f_wm.png to base64
[2025-07-10 19:24:37,289] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/d3df88bdd1bb4540953a70f50aefb64f_wm.png
[2025-07-10 19:24:37,290] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 19:24:37,290] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 19:24:37,290] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 19:24:37,292] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 19:38:11 ==========


========== New Session: 2025-07-10 19:38:11 ==========


========== New Session: 2025-07-10 19:38:12 ==========


========== New Session: 2025-07-10 19:38:12 ==========


========== New Session: 2025-07-10 19:38:12 ==========
[2025-07-10 19:38:12,665] [INFO] [__main__] Launching Flask server...
[2025-07-10 19:38:12,665] [INFO] [__main__] Creating Flask app...
[2025-07-10 19:38:12,666] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 19:38:12 ==========


========== New Session: 2025-07-10 19:38:12 ==========


========== New Session: 2025-07-10 19:38:13 ==========


========== New Session: 2025-07-10 19:38:13 ==========


========== New Session: 2025-07-10 19:38:13 ==========
[2025-07-10 19:38:13,620] [INFO] [__main__] Launching Flask server...
[2025-07-10 19:38:13,621] [INFO] [__main__] Creating Flask app...
[2025-07-10 19:38:13,621] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 19:38:25,576] [DEBUG] [__main__] Received a new request.
[2025-07-10 19:38:25,576] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 19:38:25,581] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-30 22-01-14.png, content_type=image/png
[2025-07-10 19:38:25,581] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-10 19:38:25,581] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 19:38:25,581] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 19:38:25,603] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (687, 996, 3)
[2025-07-10 19:38:25,603] [INFO] [routes.watermark_routes] Original image loaded: shape=(687, 996, 3), dtype=uint8
[2025-07-10 19:38:25,604] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 19:38:25,684] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0]
[2025-07-10 19:38:25,684] [DEBUG] [core.dwt_engine] Total bits extracted: 684252
[2025-07-10 19:38:25,685] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 19:38:25,685] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 19:38:25,685] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 19:38:25,687] [INFO] [routes.watermark_routes] Combined bitstream length: 312 bits
[2025-07-10 19:38:25,687] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 19:38:25,713] [DEBUG] [core.dwt_engine] Embedding 312 bits in Y channel parity
[2025-07-10 19:38:25,714] [DEBUG] [core.dwt_engine] Y-parity embed check: 312 bits embedded, 0 mismatches
[2025-07-10 19:38:25,714] [WARNING] [core.dwt_engine] Resizing Cr from (687, 996) to (688, 996)
[2025-07-10 19:38:25,714] [WARNING] [core.dwt_engine] Resizing Cb from (687, 996) to (688, 996)
[2025-07-10 19:38:25,716] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 19:38:25,716] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/9702a5313dc9435bb5796212a6278fc5_orig.png
[2025-07-10 19:38:25,716] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/9702a5313dc9435bb5796212a6278fc5_orig.png
[2025-07-10 19:38:25,738] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 19:38:25,739] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 19:38:25,739] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/9702a5313dc9435bb5796212a6278fc5_wm.png
[2025-07-10 19:38:25,739] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/9702a5313dc9435bb5796212a6278fc5_wm.png
[2025-07-10 19:38:25,760] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 19:38:25,760] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 19:38:25,760] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 19:38:25,760] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/9702a5313dc9435bb5796212a6278fc5_orig.png to Pinata Cloud...
[2025-07-10 19:38:29,360] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmQerWyuNjtu3MZa16FsDVkhJAjACVbf4GN1BpUM6qYTHX
[2025-07-10 19:38:29,360] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmQerWyuNjtu3MZa16FsDVkhJAjACVbf4GN1BpUM6qYTHX
[2025-07-10 19:38:29,360] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/9702a5313dc9435bb5796212a6278fc5_wm.png to Pinata Cloud...
[2025-07-10 19:38:32,962] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmY94w2NrEJZKgi7tYZJytxLjYo4rqCc4USnRVRAiCsnP2
[2025-07-10 19:38:32,963] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmY94w2NrEJZKgi7tYZJytxLjYo4rqCc4USnRVRAiCsnP2
[2025-07-10 19:38:32,963] [INFO] [routes.watermark_routes] IPFS upload step completed in 7.20 seconds.
[2025-07-10 19:38:32,963] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 19:38:34,217] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 19:38:34,217] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 19:38:35,312] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0x84c44d528a24251cb26351313aa2be163b3063b96aaf3afa37e928d8fe6a9f09
[2025-07-10 19:38:35,313] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.35 seconds.
[2025-07-10 19:38:35,313] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/9702a5313dc9435bb5796212a6278fc5_wm.png to base64
[2025-07-10 19:38:35,313] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/9702a5313dc9435bb5796212a6278fc5_wm.png
[2025-07-10 19:38:35,314] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 19:38:35,314] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 19:38:35,314] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 19:38:35,322] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 20:21:05 ==========


========== New Session: 2025-07-10 20:21:06 ==========


========== New Session: 2025-07-10 20:21:07 ==========


========== New Session: 2025-07-10 20:21:07 ==========


========== New Session: 2025-07-10 20:21:07 ==========
[2025-07-10 20:21:07,632] [INFO] [__main__] Launching Flask server...
[2025-07-10 20:21:07,632] [INFO] [__main__] Creating Flask app...
[2025-07-10 20:21:07,633] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 20:21:07 ==========


========== New Session: 2025-07-10 20:21:07 ==========


========== New Session: 2025-07-10 20:21:08 ==========


========== New Session: 2025-07-10 20:21:08 ==========


========== New Session: 2025-07-10 20:21:08 ==========
[2025-07-10 20:21:08,663] [INFO] [__main__] Launching Flask server...
[2025-07-10 20:21:08,663] [INFO] [__main__] Creating Flask app...
[2025-07-10 20:21:08,664] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 20:21:35 ==========


========== New Session: 2025-07-10 20:21:35 ==========


========== New Session: 2025-07-10 20:21:35 ==========


========== New Session: 2025-07-10 20:21:35 ==========


========== New Session: 2025-07-10 20:21:35 ==========
[2025-07-10 20:21:35,965] [INFO] [__main__] Launching Flask server...
[2025-07-10 20:21:35,965] [INFO] [__main__] Creating Flask app...
[2025-07-10 20:21:35,966] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 20:21:36 ==========


========== New Session: 2025-07-10 20:21:36 ==========


========== New Session: 2025-07-10 20:21:37 ==========


========== New Session: 2025-07-10 20:21:37 ==========


========== New Session: 2025-07-10 20:21:37 ==========
[2025-07-10 20:21:37,073] [INFO] [__main__] Launching Flask server...
[2025-07-10 20:21:37,073] [INFO] [__main__] Creating Flask app...
[2025-07-10 20:21:37,074] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 20:22:07,000] [DEBUG] [__main__] Received a new request.
[2025-07-10 20:22:07,000] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 20:22:07,004] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-30 22-00-04.png, content_type=image/png
[2025-07-10 20:22:07,004] [DEBUG] [routes.watermark_routes] Received message of length 3 characters
[2025-07-10 20:22:07,004] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 20:22:07,005] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 20:22:07,006] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (105, 496, 3)
[2025-07-10 20:22:07,006] [INFO] [routes.watermark_routes] Original image loaded: shape=(105, 496, 3), dtype=uint8
[2025-07-10 20:22:07,006] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 20:22:07,016] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-10 20:22:07,016] [DEBUG] [core.dwt_engine] Total bits extracted: 52080
[2025-07-10 20:22:07,016] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 20:22:07,016] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 20:22:07,017] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 20:22:07,017] [INFO] [routes.watermark_routes] Combined bitstream length: 296 bits
[2025-07-10 20:22:07,017] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 20:22:07,019] [DEBUG] [core.dwt_engine] Embedding 296 bits in Y channel parity
[2025-07-10 20:22:07,020] [DEBUG] [core.dwt_engine] Y-parity embed check: 296 bits embedded, 0 mismatches
[2025-07-10 20:22:07,020] [WARNING] [core.dwt_engine] Resizing Cr from (105, 496) to (106, 496)
[2025-07-10 20:22:07,020] [WARNING] [core.dwt_engine] Resizing Cb from (105, 496) to (106, 496)
[2025-07-10 20:22:07,020] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 20:22:07,020] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/1bb28dea605d4f9fbdc389f941e175d1_orig.png
[2025-07-10 20:22:07,020] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/1bb28dea605d4f9fbdc389f941e175d1_orig.png
[2025-07-10 20:22:07,021] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 20:22:07,021] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 20:22:07,021] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/1bb28dea605d4f9fbdc389f941e175d1_wm.png
[2025-07-10 20:22:07,021] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/1bb28dea605d4f9fbdc389f941e175d1_wm.png
[2025-07-10 20:22:07,022] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 20:22:07,022] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 20:22:07,022] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 20:22:07,023] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/1bb28dea605d4f9fbdc389f941e175d1_orig.png to Pinata Cloud...
[2025-07-10 20:22:09,080] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmbkbQNBzrENQZz2jVSw4CTSXSZsAq5BWTptrh5xDFChoh
[2025-07-10 20:22:09,080] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmbkbQNBzrENQZz2jVSw4CTSXSZsAq5BWTptrh5xDFChoh
[2025-07-10 20:22:09,080] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/1bb28dea605d4f9fbdc389f941e175d1_wm.png to Pinata Cloud...
[2025-07-10 20:22:10,200] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmQCM7Y86bhXMUqdaFdrKaxDJqF5nFBcRwvvXddg91YS25
[2025-07-10 20:22:10,200] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmQCM7Y86bhXMUqdaFdrKaxDJqF5nFBcRwvvXddg91YS25
[2025-07-10 20:22:10,200] [INFO] [routes.watermark_routes] IPFS upload step completed in 3.18 seconds.
[2025-07-10 20:22:10,201] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 20:22:11,209] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 20:22:11,209] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 20:22:12,321] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0x4de33f4a06bd7649709d98116d69db827fbbe4ec3d9b3d7459848d08a06cf9ab
[2025-07-10 20:22:12,321] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.12 seconds.
[2025-07-10 20:22:12,321] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/1bb28dea605d4f9fbdc389f941e175d1_wm.png to base64
[2025-07-10 20:22:12,321] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/1bb28dea605d4f9fbdc389f941e175d1_wm.png
[2025-07-10 20:22:12,321] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 20:22:12,321] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 20:22:12,322] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 20:22:12,323] [INFO] [__main__] App context teardown complete.
[2025-07-10 20:22:44,894] [DEBUG] [__main__] Received a new request.
[2025-07-10 20:22:44,894] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-10 20:22:44,895] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=1bb28dea605d4f9fbdc389f941e175d1_wm.png
[2025-07-10 20:22:44,895] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 20:22:44,896] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (106, 496, 3)
[2025-07-10 20:22:44,896] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(106, 496, 3), dtype=uint8
[2025-07-10 20:22:44,896] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-10 20:22:44,907] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0]
[2025-07-10 20:22:44,907] [DEBUG] [core.dwt_engine] Total bits extracted: 52576
[2025-07-10 20:22:44,907] [INFO] [routes.watermark_routes] Extracted total bitstream length: 52576 bits
[2025-07-10 20:22:44,907] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0]
[2025-07-10 20:22:44,907] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 8afd80aa632fc8becdfab89cd50974619c8871b66c6125e2a3eb595f0e686d81
[2025-07-10 20:22:45,849] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-10 20:22:45,849] [INFO] [__main__] App context teardown complete.
[2025-07-10 20:23:48,082] [DEBUG] [__main__] Received a new request.
[2025-07-10 20:23:48,082] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 20:23:48,083] [DEBUG] [routes.watermark_routes] Received file: filename=1bb28dea605d4f9fbdc389f941e175d1_wm.png, content_type=image/png
[2025-07-10 20:23:48,083] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-10 20:23:48,083] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 20:23:48,083] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 20:23:48,084] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (106, 496, 3)
[2025-07-10 20:23:48,085] [INFO] [routes.watermark_routes] Original image loaded: shape=(106, 496, 3), dtype=uint8
[2025-07-10 20:23:48,085] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 20:23:48,091] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0]
[2025-07-10 20:23:48,091] [DEBUG] [core.dwt_engine] Total bits extracted: 52576
[2025-07-10 20:23:48,091] [INFO] [routes.watermark_routes] Found existing watermark with 1 messages. Appending new message.
[2025-07-10 20:23:48,091] [INFO] [routes.watermark_routes] Total messages to embed: 2
[2025-07-10 20:23:48,091] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 20:23:48,092] [INFO] [routes.watermark_routes] Combined bitstream length: 344 bits
[2025-07-10 20:23:48,092] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 20:23:48,094] [DEBUG] [core.dwt_engine] Embedding 344 bits in Y channel parity
[2025-07-10 20:23:48,094] [DEBUG] [core.dwt_engine] Y-parity embed check: 344 bits embedded, 0 mismatches
[2025-07-10 20:23:48,094] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 20:23:48,095] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/8132c0fd90c548228dcc71f61dc40d67_orig.png
[2025-07-10 20:23:48,095] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/8132c0fd90c548228dcc71f61dc40d67_orig.png
[2025-07-10 20:23:48,095] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 20:23:48,095] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 20:23:48,095] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/8132c0fd90c548228dcc71f61dc40d67_wm.png
[2025-07-10 20:23:48,095] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/8132c0fd90c548228dcc71f61dc40d67_wm.png
[2025-07-10 20:23:48,096] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 20:23:48,097] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 20:23:48,097] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 20:23:48,097] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/8132c0fd90c548228dcc71f61dc40d67_orig.png to Pinata Cloud...
[2025-07-10 20:23:49,490] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmQCM7Y86bhXMUqdaFdrKaxDJqF5nFBcRwvvXddg91YS25
[2025-07-10 20:23:49,490] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmQCM7Y86bhXMUqdaFdrKaxDJqF5nFBcRwvvXddg91YS25
[2025-07-10 20:23:49,490] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/8132c0fd90c548228dcc71f61dc40d67_wm.png to Pinata Cloud...
[2025-07-10 20:23:50,722] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmcaFQibHuboW3aJAUQNng9JA1D3cP7V2sLuex3SsGo7Cm
[2025-07-10 20:23:50,723] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmcaFQibHuboW3aJAUQNng9JA1D3cP7V2sLuex3SsGo7Cm
[2025-07-10 20:23:50,723] [INFO] [routes.watermark_routes] IPFS upload step completed in 2.63 seconds.
[2025-07-10 20:23:50,723] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 20:23:51,632] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 20:23:51,632] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 20:23:52,745] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0xb5caedbdda39d18e0431399b427c63b69205c8a6fb2ad85b9b98b0eadc43f859
[2025-07-10 20:23:52,745] [INFO] [routes.watermark_routes] Blockchain logging step completed in 2.02 seconds.
[2025-07-10 20:23:52,745] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/8132c0fd90c548228dcc71f61dc40d67_wm.png to base64
[2025-07-10 20:23:52,745] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/8132c0fd90c548228dcc71f61dc40d67_wm.png
[2025-07-10 20:23:52,745] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 20:23:52,745] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 20:23:52,745] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 20:23:52,746] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 20:25:26 ==========


========== New Session: 2025-07-10 20:25:26 ==========


========== New Session: 2025-07-10 20:25:27 ==========


========== New Session: 2025-07-10 20:25:27 ==========


========== New Session: 2025-07-10 20:25:27 ==========
[2025-07-10 20:25:27,395] [INFO] [__main__] Launching Flask server...
[2025-07-10 20:25:27,395] [INFO] [__main__] Creating Flask app...
[2025-07-10 20:25:27,396] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 20:25:27 ==========


========== New Session: 2025-07-10 20:25:27 ==========


========== New Session: 2025-07-10 20:25:28 ==========


========== New Session: 2025-07-10 20:25:28 ==========


========== New Session: 2025-07-10 20:25:28 ==========
[2025-07-10 20:25:28,373] [INFO] [__main__] Launching Flask server...
[2025-07-10 20:25:28,374] [INFO] [__main__] Creating Flask app...
[2025-07-10 20:25:28,374] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 20:25:29,403] [DEBUG] [__main__] Received a new request.
[2025-07-10 20:25:29,403] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-10 20:25:29,405] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=8132c0fd90c548228dcc71f61dc40d67_wm.png
[2025-07-10 20:25:29,405] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 20:25:29,406] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (106, 496, 3)
[2025-07-10 20:25:29,406] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(106, 496, 3), dtype=uint8
[2025-07-10 20:25:29,406] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-10 20:25:29,413] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0]
[2025-07-10 20:25:29,413] [DEBUG] [core.dwt_engine] Total bits extracted: 52576
[2025-07-10 20:25:29,413] [INFO] [routes.watermark_routes] Extracted total bitstream length: 52576 bits
[2025-07-10 20:25:29,413] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0]
[2025-07-10 20:25:29,413] [INFO] [routes.watermark_routes] Extracted SHA256 hash: c324ddc6ab0ba0dbb11d7da628de90ff786c00bfa3ad94da5aeca3712a957459
[2025-07-10 20:25:30,388] [INFO] [routes.watermark_routes] Extraction complete: 2 messages found
[2025-07-10 20:25:30,389] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 20:26:16 ==========


========== New Session: 2025-07-10 20:26:16 ==========


========== New Session: 2025-07-10 20:26:25 ==========


========== New Session: 2025-07-10 20:26:25 ==========


========== New Session: 2025-07-10 20:26:25 ==========
[2025-07-10 20:26:25,360] [INFO] [__main__] Launching Flask server...
[2025-07-10 20:26:25,361] [INFO] [__main__] Creating Flask app...
[2025-07-10 20:26:25,361] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 20:26:25 ==========


========== New Session: 2025-07-10 20:26:25 ==========


========== New Session: 2025-07-10 20:26:26 ==========


========== New Session: 2025-07-10 20:26:26 ==========


========== New Session: 2025-07-10 20:26:26 ==========
[2025-07-10 20:26:26,305] [INFO] [__main__] Launching Flask server...
[2025-07-10 20:26:26,305] [INFO] [__main__] Creating Flask app...
[2025-07-10 20:26:26,306] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 20:26:30,594] [DEBUG] [__main__] Received a new request.
[2025-07-10 20:26:30,594] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 20:26:30,596] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-05-30 19-12-43.png, content_type=image/png
[2025-07-10 20:26:30,597] [DEBUG] [routes.watermark_routes] Received message of length 3 characters
[2025-07-10 20:26:30,597] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 20:26:30,597] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 20:26:30,603] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (686, 457, 3)
[2025-07-10 20:26:30,604] [INFO] [routes.watermark_routes] Original image loaded: shape=(686, 457, 3), dtype=uint8
[2025-07-10 20:26:30,604] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 20:26:30,643] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-10 20:26:30,643] [DEBUG] [core.dwt_engine] Total bits extracted: 313502
[2025-07-10 20:26:30,643] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 20:26:30,644] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 20:26:30,644] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 20:26:30,645] [INFO] [routes.watermark_routes] Combined bitstream length: 296 bits
[2025-07-10 20:26:30,645] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 20:26:30,658] [DEBUG] [core.dwt_engine] Embedding 296 bits in Y channel parity
[2025-07-10 20:26:30,659] [DEBUG] [core.dwt_engine] Y-parity embed check: 296 bits embedded, 0 mismatches
[2025-07-10 20:26:30,659] [WARNING] [core.dwt_engine] Resizing Cr from (686, 457) to (686, 458)
[2025-07-10 20:26:30,659] [WARNING] [core.dwt_engine] Resizing Cb from (686, 457) to (686, 458)
[2025-07-10 20:26:30,660] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 20:26:30,660] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/0806a09cbdd84248a5c5401b7028700a_orig.png
[2025-07-10 20:26:30,660] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/0806a09cbdd84248a5c5401b7028700a_orig.png
[2025-07-10 20:26:30,665] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 20:26:30,665] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 20:26:30,665] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/0806a09cbdd84248a5c5401b7028700a_wm.png
[2025-07-10 20:26:30,665] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/0806a09cbdd84248a5c5401b7028700a_wm.png
[2025-07-10 20:26:30,670] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 20:26:30,670] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 20:26:30,671] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 20:26:30,671] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/0806a09cbdd84248a5c5401b7028700a_orig.png to Pinata Cloud...
[2025-07-10 20:26:33,133] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: Qmcugv399oCBAb2t3dxdXNGe8AFZR5MxJpPvd7kQwQzdTc
[2025-07-10 20:26:33,134] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: Qmcugv399oCBAb2t3dxdXNGe8AFZR5MxJpPvd7kQwQzdTc
[2025-07-10 20:26:33,134] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/0806a09cbdd84248a5c5401b7028700a_wm.png to Pinata Cloud...
[2025-07-10 20:26:35,090] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmXUn323V1BydYiqR959eTwBKADwsiUD8Bm62AvKVZejLe
[2025-07-10 20:26:35,090] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmXUn323V1BydYiqR959eTwBKADwsiUD8Bm62AvKVZejLe
[2025-07-10 20:26:35,090] [INFO] [routes.watermark_routes] IPFS upload step completed in 4.42 seconds.
[2025-07-10 20:26:35,090] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 20:26:36,007] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 20:26:36,007] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 20:26:37,072] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0x8c362a3e2bf51f208eadced2c56daa4ca3847f067e195756102229966120f71d
[2025-07-10 20:26:37,072] [INFO] [routes.watermark_routes] Blockchain logging step completed in 1.98 seconds.
[2025-07-10 20:26:37,072] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/0806a09cbdd84248a5c5401b7028700a_wm.png to base64
[2025-07-10 20:26:37,072] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/0806a09cbdd84248a5c5401b7028700a_wm.png
[2025-07-10 20:26:37,073] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 20:26:37,073] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 20:26:37,073] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 20:26:37,075] [INFO] [__main__] App context teardown complete.
[2025-07-10 20:26:48,230] [DEBUG] [__main__] Received a new request.
[2025-07-10 20:26:48,230] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 20:26:48,232] [DEBUG] [routes.watermark_routes] Received file: filename=0806a09cbdd84248a5c5401b7028700a_wm.png, content_type=image/png
[2025-07-10 20:26:48,232] [DEBUG] [routes.watermark_routes] Received message of length 5 characters
[2025-07-10 20:26:48,232] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 20:26:48,232] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 20:26:48,235] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (686, 458, 3)
[2025-07-10 20:26:48,236] [INFO] [routes.watermark_routes] Original image loaded: shape=(686, 458, 3), dtype=uint8
[2025-07-10 20:26:48,236] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 20:26:48,279] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1]
[2025-07-10 20:26:48,279] [DEBUG] [core.dwt_engine] Total bits extracted: 314188
[2025-07-10 20:26:48,279] [INFO] [routes.watermark_routes] Found existing watermark with 1 messages. Appending new message.
[2025-07-10 20:26:48,279] [INFO] [routes.watermark_routes] Total messages to embed: 2
[2025-07-10 20:26:48,279] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 20:26:48,280] [INFO] [routes.watermark_routes] Combined bitstream length: 352 bits
[2025-07-10 20:26:48,280] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 20:26:48,291] [DEBUG] [core.dwt_engine] Embedding 352 bits in Y channel parity
[2025-07-10 20:26:48,291] [DEBUG] [core.dwt_engine] Y-parity embed check: 352 bits embedded, 0 mismatches
[2025-07-10 20:26:48,292] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 20:26:48,292] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/b8c3d8963e9746099044e51d1984907d_orig.png
[2025-07-10 20:26:48,292] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/b8c3d8963e9746099044e51d1984907d_orig.png
[2025-07-10 20:26:48,298] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 20:26:48,298] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 20:26:48,298] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/b8c3d8963e9746099044e51d1984907d_wm.png
[2025-07-10 20:26:48,298] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/b8c3d8963e9746099044e51d1984907d_wm.png
[2025-07-10 20:26:48,304] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 20:26:48,304] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 20:26:48,304] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 20:26:48,304] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/b8c3d8963e9746099044e51d1984907d_orig.png to Pinata Cloud...
[2025-07-10 20:26:49,691] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmXUn323V1BydYiqR959eTwBKADwsiUD8Bm62AvKVZejLe
[2025-07-10 20:26:49,691] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmXUn323V1BydYiqR959eTwBKADwsiUD8Bm62AvKVZejLe
[2025-07-10 20:26:49,691] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/b8c3d8963e9746099044e51d1984907d_wm.png to Pinata Cloud...
[2025-07-10 20:26:51,589] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmcJ8dPZHzeoeLRQkwzNwL7LhRWyrewzVKAxmguBKX8Zf1
[2025-07-10 20:26:51,589] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmcJ8dPZHzeoeLRQkwzNwL7LhRWyrewzVKAxmguBKX8Zf1
[2025-07-10 20:26:51,589] [INFO] [routes.watermark_routes] IPFS upload step completed in 3.29 seconds.
[2025-07-10 20:26:51,589] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 20:26:52,459] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 20:26:52,459] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 20:26:53,539] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0x693d46aec6221fbda917de1dd2da5ec2dcfc0b863fb56c94cda668548f6f11dd
[2025-07-10 20:26:53,539] [INFO] [routes.watermark_routes] Blockchain logging step completed in 1.95 seconds.
[2025-07-10 20:26:53,540] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/b8c3d8963e9746099044e51d1984907d_wm.png to base64
[2025-07-10 20:26:53,540] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/b8c3d8963e9746099044e51d1984907d_wm.png
[2025-07-10 20:26:53,540] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 20:26:53,540] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 20:26:53,540] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 20:26:53,542] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 21:22:15 ==========


========== New Session: 2025-07-10 21:22:16 ==========


========== New Session: 2025-07-10 21:22:16 ==========


========== New Session: 2025-07-10 21:22:16 ==========


========== New Session: 2025-07-10 21:22:16 ==========
[2025-07-10 21:22:16,954] [INFO] [__main__] Launching Flask server...
[2025-07-10 21:22:16,954] [INFO] [__main__] Creating Flask app...
[2025-07-10 21:22:16,955] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 21:23:23 ==========


========== New Session: 2025-07-10 21:23:23 ==========


========== New Session: 2025-07-10 21:23:24 ==========


========== New Session: 2025-07-10 21:23:24 ==========


========== New Session: 2025-07-10 21:23:24 ==========
[2025-07-10 21:23:24,284] [INFO] [__main__] Launching Flask server...
[2025-07-10 21:23:24,284] [INFO] [__main__] Creating Flask app...
[2025-07-10 21:23:24,285] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 21:23:24 ==========


========== New Session: 2025-07-10 21:23:24 ==========


========== New Session: 2025-07-10 21:23:25 ==========


========== New Session: 2025-07-10 21:23:25 ==========


========== New Session: 2025-07-10 21:23:25 ==========
[2025-07-10 21:23:25,300] [INFO] [__main__] Launching Flask server...
[2025-07-10 21:23:25,300] [INFO] [__main__] Creating Flask app...
[2025-07-10 21:23:25,301] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 21:24:45,346] [DEBUG] [__main__] Received a new request.
[2025-07-10 21:24:45,346] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 21:24:45,348] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-06-26 21-04-40.png, content_type=image/png
[2025-07-10 21:24:45,348] [DEBUG] [routes.watermark_routes] Received message of length 3 characters
[2025-07-10 21:24:45,348] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 21:24:45,348] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 21:24:45,359] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (488, 1050, 3)
[2025-07-10 21:24:45,359] [INFO] [routes.watermark_routes] Original image loaded: shape=(488, 1050, 3), dtype=uint8
[2025-07-10 21:24:45,359] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 21:24:45,419] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-10 21:24:45,419] [DEBUG] [core.dwt_engine] Total bits extracted: 512400
[2025-07-10 21:24:45,420] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 21:24:45,420] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 21:24:45,420] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 21:24:45,422] [INFO] [routes.watermark_routes] Combined bitstream length: 296 bits
[2025-07-10 21:24:45,422] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 21:24:45,447] [DEBUG] [core.dwt_engine] Embedding 296 bits in Y channel parity
[2025-07-10 21:24:45,448] [DEBUG] [core.dwt_engine] Y-parity embed check: 296 bits embedded, 0 mismatches
[2025-07-10 21:24:45,449] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 21:24:45,449] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/ca9f52a981e7420e86cfa7786f453917_orig.png
[2025-07-10 21:24:45,450] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/ca9f52a981e7420e86cfa7786f453917_orig.png
[2025-07-10 21:24:45,455] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 21:24:45,455] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 21:24:45,455] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ca9f52a981e7420e86cfa7786f453917_wm.png
[2025-07-10 21:24:45,455] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ca9f52a981e7420e86cfa7786f453917_wm.png
[2025-07-10 21:24:45,460] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 21:24:45,461] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 21:24:45,461] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 21:24:45,461] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/ca9f52a981e7420e86cfa7786f453917_orig.png to Pinata Cloud...
[2025-07-10 21:24:48,148] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmamV8D5BCMy3qDbDCXAp8rP4W7KMqLfXWPdyHpFnucJLA
[2025-07-10 21:24:48,149] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmamV8D5BCMy3qDbDCXAp8rP4W7KMqLfXWPdyHpFnucJLA
[2025-07-10 21:24:48,149] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ca9f52a981e7420e86cfa7786f453917_wm.png to Pinata Cloud...
[2025-07-10 21:24:49,636] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: Qmb3R7RgfhdF55mypBhzWG1sCKumnkJxiWByd2n8yoVrQo
[2025-07-10 21:24:49,636] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: Qmb3R7RgfhdF55mypBhzWG1sCKumnkJxiWByd2n8yoVrQo
[2025-07-10 21:24:49,636] [INFO] [routes.watermark_routes] IPFS upload step completed in 4.18 seconds.
[2025-07-10 21:24:49,636] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 21:24:49,639] [DEBUG] [routes.watermark_routes] Extracted orig_hash_hex for parent lookup: 5f95ce5f45069e2b4319000cdeda97b501d5dacf127a5da5354d3aee297a5709
[2025-07-10 21:24:56,345] [WARNING] [routes.watermark_routes] Failed to fetch all on-chain logs for debug: Failed to fetch blockchain logs: 400 Client Error: Bad Request for url: https://polygon-amoy.g.alchemy.com/v2/Wb71Ag7VLvZ7k_8CWTvDY
[2025-07-10 21:24:57,249] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 21:24:57,249] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 21:24:58,312] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0x80908d3a8fc245a6f5aeac6136d5bb79b65f69f67c75b38f26d3af776cb9c4ab
[2025-07-10 21:24:58,312] [INFO] [routes.watermark_routes] Blockchain logging step completed in 8.68 seconds.
[2025-07-10 21:24:58,312] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ca9f52a981e7420e86cfa7786f453917_wm.png to base64
[2025-07-10 21:24:58,312] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/ca9f52a981e7420e86cfa7786f453917_wm.png
[2025-07-10 21:24:58,312] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 21:24:58,312] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 21:24:58,312] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 21:24:58,316] [INFO] [__main__] App context teardown complete.
[2025-07-10 21:25:15,447] [DEBUG] [__main__] Received a new request.
[2025-07-10 21:25:15,447] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-10 21:25:15,449] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=ca9f52a981e7420e86cfa7786f453917_wm.png
[2025-07-10 21:25:15,449] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 21:25:15,458] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (488, 1050, 3)
[2025-07-10 21:25:15,458] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(488, 1050, 3), dtype=uint8
[2025-07-10 21:25:15,458] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-10 21:25:15,524] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1]
[2025-07-10 21:25:15,524] [DEBUG] [core.dwt_engine] Total bits extracted: 512400
[2025-07-10 21:25:15,524] [INFO] [routes.watermark_routes] Extracted total bitstream length: 512400 bits
[2025-07-10 21:25:15,524] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1]
[2025-07-10 21:25:15,525] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 5f95ce5f45069e2b4319000cdeda97b501d5dacf127a5da5354d3aee297a5709
[2025-07-10 21:25:16,406] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-10 21:25:16,408] [INFO] [__main__] App context teardown complete.
[2025-07-10 21:25:23,614] [DEBUG] [__main__] Received a new request.
[2025-07-10 21:25:23,615] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 21:25:23,616] [DEBUG] [routes.watermark_routes] Received file: filename=ca9f52a981e7420e86cfa7786f453917_wm.png, content_type=image/png
[2025-07-10 21:25:23,616] [DEBUG] [routes.watermark_routes] Received message of length 6 characters
[2025-07-10 21:25:23,616] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 21:25:23,616] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 21:25:23,621] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (488, 1050, 3)
[2025-07-10 21:25:23,621] [INFO] [routes.watermark_routes] Original image loaded: shape=(488, 1050, 3), dtype=uint8
[2025-07-10 21:25:23,621] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 21:25:23,683] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1]
[2025-07-10 21:25:23,683] [DEBUG] [core.dwt_engine] Total bits extracted: 512400
[2025-07-10 21:25:23,683] [INFO] [routes.watermark_routes] Found existing watermark with 1 messages. Appending new message.
[2025-07-10 21:25:23,684] [INFO] [routes.watermark_routes] Total messages to embed: 2
[2025-07-10 21:25:23,684] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 21:25:23,685] [INFO] [routes.watermark_routes] Combined bitstream length: 360 bits
[2025-07-10 21:25:23,685] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 21:25:23,703] [DEBUG] [core.dwt_engine] Embedding 360 bits in Y channel parity
[2025-07-10 21:25:23,704] [DEBUG] [core.dwt_engine] Y-parity embed check: 360 bits embedded, 0 mismatches
[2025-07-10 21:25:23,704] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 21:25:23,704] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/2752cbae749c4c0ea4bea901684c9948_orig.png
[2025-07-10 21:25:23,704] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/2752cbae749c4c0ea4bea901684c9948_orig.png
[2025-07-10 21:25:23,711] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 21:25:23,711] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 21:25:23,711] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2752cbae749c4c0ea4bea901684c9948_wm.png
[2025-07-10 21:25:23,711] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2752cbae749c4c0ea4bea901684c9948_wm.png
[2025-07-10 21:25:23,716] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 21:25:23,716] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 21:25:23,716] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 21:25:23,716] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/2752cbae749c4c0ea4bea901684c9948_orig.png to Pinata Cloud...
[2025-07-10 21:25:24,905] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: Qmb3R7RgfhdF55mypBhzWG1sCKumnkJxiWByd2n8yoVrQo
[2025-07-10 21:25:24,905] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: Qmb3R7RgfhdF55mypBhzWG1sCKumnkJxiWByd2n8yoVrQo
[2025-07-10 21:25:24,905] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2752cbae749c4c0ea4bea901684c9948_wm.png to Pinata Cloud...
[2025-07-10 21:25:26,360] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmevJ17dxDk17xbRjwsaJHtjW9MFRjGsD1ZugaqBVscE4W
[2025-07-10 21:25:26,360] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmevJ17dxDk17xbRjwsaJHtjW9MFRjGsD1ZugaqBVscE4W
[2025-07-10 21:25:26,360] [INFO] [routes.watermark_routes] IPFS upload step completed in 2.64 seconds.
[2025-07-10 21:25:26,360] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 21:25:26,364] [DEBUG] [routes.watermark_routes] Extracted orig_hash_hex for parent lookup: 088171ff31dd6eb5602607c807d8888a5e08ef5ecfd8b8e5ca486d2666f9cf33
[2025-07-10 21:25:32,915] [WARNING] [routes.watermark_routes] Failed to fetch all on-chain logs for debug: Failed to fetch blockchain logs: 400 Client Error: Bad Request for url: https://polygon-amoy.g.alchemy.com/v2/Wb71Ag7VLvZ7k_8CWTvDY
[2025-07-10 21:25:33,808] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 21:25:33,809] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 21:25:35,042] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0x4c87df050f9d52bcd3edc13498a3d320f6efddf805228047f99b9fd26e8b1a77
[2025-07-10 21:25:35,042] [INFO] [routes.watermark_routes] Blockchain logging step completed in 8.68 seconds.
[2025-07-10 21:25:35,043] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2752cbae749c4c0ea4bea901684c9948_wm.png to base64
[2025-07-10 21:25:35,043] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/2752cbae749c4c0ea4bea901684c9948_wm.png
[2025-07-10 21:25:35,043] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 21:25:35,043] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 21:25:35,043] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 21:25:35,046] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 22:06:05 ==========


========== New Session: 2025-07-10 22:06:05 ==========


========== New Session: 2025-07-10 22:06:06 ==========


========== New Session: 2025-07-10 22:06:06 ==========


========== New Session: 2025-07-10 22:06:06 ==========
[2025-07-10 22:06:06,069] [INFO] [__main__] Launching Flask server...
[2025-07-10 22:06:06,069] [INFO] [__main__] Creating Flask app...
[2025-07-10 22:06:06,070] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 22:06:06 ==========


========== New Session: 2025-07-10 22:06:06 ==========


========== New Session: 2025-07-10 22:06:07 ==========


========== New Session: 2025-07-10 22:06:07 ==========


========== New Session: 2025-07-10 22:06:07 ==========
[2025-07-10 22:06:07,108] [INFO] [__main__] Launching Flask server...
[2025-07-10 22:06:07,108] [INFO] [__main__] Creating Flask app...
[2025-07-10 22:06:07,109] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 22:06:25,530] [DEBUG] [__main__] Received a new request.
[2025-07-10 22:06:25,530] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 22:06:25,532] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-07-03 15-09-32.png, content_type=image/png
[2025-07-10 22:06:25,532] [DEBUG] [routes.watermark_routes] Received message of length 2 characters
[2025-07-10 22:06:25,532] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 22:06:25,532] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 22:06:25,535] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (258, 343, 3)
[2025-07-10 22:06:25,535] [INFO] [routes.watermark_routes] Original image loaded: shape=(258, 343, 3), dtype=uint8
[2025-07-10 22:06:25,535] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 22:06:25,547] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-10 22:06:25,547] [DEBUG] [core.dwt_engine] Total bits extracted: 88494
[2025-07-10 22:06:25,547] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 22:06:25,547] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 22:06:25,547] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 22:06:25,547] [INFO] [routes.watermark_routes] Combined bitstream length: 288 bits
[2025-07-10 22:06:25,547] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 22:06:25,551] [DEBUG] [core.dwt_engine] Embedding 288 bits in Y channel parity
[2025-07-10 22:06:25,551] [DEBUG] [core.dwt_engine] Y-parity embed check: 288 bits embedded, 0 mismatches
[2025-07-10 22:06:25,551] [WARNING] [core.dwt_engine] Resizing Cr from (258, 343) to (258, 344)
[2025-07-10 22:06:25,551] [WARNING] [core.dwt_engine] Resizing Cb from (258, 343) to (258, 344)
[2025-07-10 22:06:25,552] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 22:06:25,552] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/15b88167412549bbb7424455386dd5b8_orig.png
[2025-07-10 22:06:25,552] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/15b88167412549bbb7424455386dd5b8_orig.png
[2025-07-10 22:06:25,553] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 22:06:25,553] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 22:06:25,553] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/15b88167412549bbb7424455386dd5b8_wm.png
[2025-07-10 22:06:25,553] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/15b88167412549bbb7424455386dd5b8_wm.png
[2025-07-10 22:06:25,554] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 22:06:25,554] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 22:06:25,554] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 22:06:25,555] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/15b88167412549bbb7424455386dd5b8_orig.png to Pinata Cloud...
[2025-07-10 22:06:27,290] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmbwkdnQTc7sGQG8hgxe2QBoordZtaMaEi9BPDKtjYbfTA
[2025-07-10 22:06:27,290] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmbwkdnQTc7sGQG8hgxe2QBoordZtaMaEi9BPDKtjYbfTA
[2025-07-10 22:06:27,290] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/15b88167412549bbb7424455386dd5b8_wm.png to Pinata Cloud...
[2025-07-10 22:06:28,525] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmZFLS5r2foVs5xQh471aLuHReryRHV8WDngETLDqfHEwQ
[2025-07-10 22:06:28,525] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmZFLS5r2foVs5xQh471aLuHReryRHV8WDngETLDqfHEwQ
[2025-07-10 22:06:28,526] [INFO] [routes.watermark_routes] IPFS upload step completed in 2.97 seconds.
[2025-07-10 22:06:28,526] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 22:06:28,526] [DEBUG] [routes.watermark_routes] Extracted orig_hash_hex for parent lookup: a69166c9f6f2bd9983d8483d19273d5c2b89ef9dbaae76ae9be983c2147460e3
[2025-07-10 22:06:35,348] [WARNING] [routes.watermark_routes] Failed to fetch all on-chain logs for debug: Failed to fetch blockchain logs: 400 Client Error: Bad Request for url: https://polygon-amoy.g.alchemy.com/v2/Wb71Ag7VLvZ7k_8CWTvDY
[2025-07-10 22:06:36,310] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 22:06:36,310] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 22:08:38,568] [ERROR] [routes.watermark_routes] Blockchain logging failed: Failed to log to blockchain: Insufficient MATIC for bumped gas price: balance=0.1084126118409 MATIC
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/eth/eth.py", line 508, in wait_for_transaction_receipt
    _timeout.sleep(poll_latency)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/threads.py", line 101, in sleep
    self.check()
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/threads.py", line 94, in check
    raise self
web3._utils.threads.Timeout: 60 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 82, in log_to_chain
    receipt = w3.eth.wait_for_transaction_receipt(tx_hash, timeout=60)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/eth/eth.py", line 512, in wait_for_transaction_receipt
    raise TimeExhausted(
web3.exceptions.TimeExhausted: Transaction HexBytes('0x7ade6218fe23721ee6fee1c4ca1dfc6edc26eb5c2a0d8f1672f191b1eb1aee1c') is not in the chain after 60 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 98, in log_to_chain
    raise RuntimeError(f"Insufficient MATIC for bumped gas price: balance={w3.from_wei(est_cost, 'ether')} MATIC")
RuntimeError: Insufficient MATIC for bumped gas price: balance=0.1084126118409 MATIC

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 168, in watermark_image
    tx_hash = log_to_chain(orig_hash_hex, wm_hash_hex, full_message, orig_cid, wm_cid, crc, parent_hash)
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 121, in log_to_chain
    raise RuntimeError(f"Failed to log to blockchain: {str(e)}")
RuntimeError: Failed to log to blockchain: Insufficient MATIC for bumped gas price: balance=0.1084126118409 MATIC
[2025-07-10 22:08:38,568] [INFO] [routes.watermark_routes] Blockchain logging step completed in 130.04 seconds.
[2025-07-10 22:08:38,568] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/15b88167412549bbb7424455386dd5b8_wm.png to base64
[2025-07-10 22:08:38,569] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/15b88167412549bbb7424455386dd5b8_wm.png
[2025-07-10 22:08:38,569] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 22:08:38,569] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 22:08:38,569] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 22:08:38,570] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 22:16:11 ==========


========== New Session: 2025-07-10 22:16:11 ==========


========== New Session: 2025-07-10 22:16:12 ==========


========== New Session: 2025-07-10 22:16:12 ==========


========== New Session: 2025-07-10 22:16:12 ==========
[2025-07-10 22:16:12,632] [INFO] [__main__] Launching Flask server...
[2025-07-10 22:16:12,632] [INFO] [__main__] Creating Flask app...
[2025-07-10 22:16:12,633] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 22:16:12 ==========


========== New Session: 2025-07-10 22:16:12 ==========


========== New Session: 2025-07-10 22:16:13 ==========


========== New Session: 2025-07-10 22:16:13 ==========


========== New Session: 2025-07-10 22:16:13 ==========
[2025-07-10 22:16:13,646] [INFO] [__main__] Launching Flask server...
[2025-07-10 22:16:13,646] [INFO] [__main__] Creating Flask app...
[2025-07-10 22:16:13,647] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 22:16:23,185] [DEBUG] [__main__] Received a new request.
[2025-07-10 22:16:23,185] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 22:16:23,187] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-07-10 18-42-45.png, content_type=image/png
[2025-07-10 22:16:23,187] [DEBUG] [routes.watermark_routes] Received message of length 3 characters
[2025-07-10 22:16:23,187] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 22:16:23,187] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 22:16:23,192] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (438, 496, 3)
[2025-07-10 22:16:23,193] [INFO] [routes.watermark_routes] Original image loaded: shape=(438, 496, 3), dtype=uint8
[2025-07-10 22:16:23,193] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 22:16:23,220] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-10 22:16:23,220] [DEBUG] [core.dwt_engine] Total bits extracted: 217248
[2025-07-10 22:16:23,221] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 22:16:23,221] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 22:16:23,221] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 22:16:23,221] [INFO] [routes.watermark_routes] Combined bitstream length: 296 bits
[2025-07-10 22:16:23,221] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 22:16:23,229] [DEBUG] [core.dwt_engine] Embedding 296 bits in Y channel parity
[2025-07-10 22:16:23,229] [DEBUG] [core.dwt_engine] Y-parity embed check: 296 bits embedded, 0 mismatches
[2025-07-10 22:16:23,230] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 22:16:23,230] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/db586ec9919f47f2a0b3c1304916e079_orig.png
[2025-07-10 22:16:23,230] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/db586ec9919f47f2a0b3c1304916e079_orig.png
[2025-07-10 22:16:23,232] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 22:16:23,232] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 22:16:23,232] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/db586ec9919f47f2a0b3c1304916e079_wm.png
[2025-07-10 22:16:23,232] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/db586ec9919f47f2a0b3c1304916e079_wm.png
[2025-07-10 22:16:23,235] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 22:16:23,235] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 22:16:23,235] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 22:16:23,235] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/db586ec9919f47f2a0b3c1304916e079_orig.png to Pinata Cloud...
[2025-07-10 22:16:25,115] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmNTZG9HnuPtqafG2wqYXbt6jTffxFMk6Z2y3SSAYfEzbS
[2025-07-10 22:16:25,115] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmNTZG9HnuPtqafG2wqYXbt6jTffxFMk6Z2y3SSAYfEzbS
[2025-07-10 22:16:25,116] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/db586ec9919f47f2a0b3c1304916e079_wm.png to Pinata Cloud...
[2025-07-10 22:16:26,526] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmbxgGTjAJ3JiF3nDHCPydPuDC54DLNZ88tvZQBvffqr7N
[2025-07-10 22:16:26,526] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmbxgGTjAJ3JiF3nDHCPydPuDC54DLNZ88tvZQBvffqr7N
[2025-07-10 22:16:26,526] [INFO] [routes.watermark_routes] IPFS upload step completed in 3.29 seconds.
[2025-07-10 22:16:26,526] [INFO] [routes.watermark_routes] Starting blockchain logging of watermark metadata...
[2025-07-10 22:16:26,527] [DEBUG] [routes.watermark_routes] Extracted orig_hash_hex for parent lookup: 42eac8a140e5c44f48b63d9a450bad080fe9c1f40530de7cc1f0b3c80943821e
[2025-07-10 22:16:33,179] [WARNING] [routes.watermark_routes] Failed to fetch all on-chain logs for debug: Failed to fetch blockchain logs: 400 Client Error: Bad Request for url: https://polygon-amoy.g.alchemy.com/v2/Wb71Ag7VLvZ7k_8CWTvDY
[2025-07-10 22:16:34,081] [INFO] [routes.watermark_routes] No parent hash found in blockchain, using zero hash.
[2025-07-10 22:16:34,082] [INFO] [routes.watermark_routes] Submitting watermark metadata to blockchain via log_to_chain...
[2025-07-10 22:19:36,979] [ERROR] [routes.watermark_routes] Blockchain logging failed: Failed to log to blockchain: Transaction not mined after 3 attempts.
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/eth/eth.py", line 508, in wait_for_transaction_receipt
    _timeout.sleep(poll_latency)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/threads.py", line 101, in sleep
    self.check()
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/threads.py", line 94, in check
    raise self
web3._utils.threads.Timeout: 60 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 82, in log_to_chain
    receipt = w3.eth.wait_for_transaction_receipt(tx_hash, timeout=60)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/eth/eth.py", line 512, in wait_for_transaction_receipt
    raise TimeExhausted(
web3.exceptions.TimeExhausted: Transaction HexBytes('0x332bb929ef441a1722bc7aff62228679810fd4f590938be6270be42f05c924c3') is not in the chain after 60 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 103, in log_to_chain
    raise RuntimeError(f"Transaction not mined after {max_retries+1} attempts.")
RuntimeError: Transaction not mined after 3 attempts.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 168, in watermark_image
    tx_hash = log_to_chain(orig_hash_hex, wm_hash_hex, full_message, orig_cid, wm_cid, crc, parent_hash)
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 121, in log_to_chain
    raise RuntimeError(f"Failed to log to blockchain: {str(e)}")
RuntimeError: Failed to log to blockchain: Transaction not mined after 3 attempts.
[2025-07-10 22:19:36,980] [INFO] [routes.watermark_routes] Blockchain logging step completed in 190.45 seconds.
[2025-07-10 22:19:36,980] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/db586ec9919f47f2a0b3c1304916e079_wm.png to base64
[2025-07-10 22:19:36,980] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/db586ec9919f47f2a0b3c1304916e079_wm.png
[2025-07-10 22:19:36,980] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 22:19:36,980] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 22:19:36,980] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 22:19:36,981] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 22:27:47 ==========


========== New Session: 2025-07-10 22:27:47 ==========


========== New Session: 2025-07-10 22:27:47 ==========


========== New Session: 2025-07-10 22:27:47 ==========


========== New Session: 2025-07-10 22:27:47 ==========
[2025-07-10 22:27:47,368] [INFO] [__main__] Launching Flask server...
[2025-07-10 22:27:47,368] [INFO] [__main__] Creating Flask app...
[2025-07-10 22:27:47,369] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-10 22:27:47 ==========


========== New Session: 2025-07-10 22:27:47 ==========


========== New Session: 2025-07-10 22:27:47 ==========


========== New Session: 2025-07-10 22:27:47 ==========


========== New Session: 2025-07-10 22:27:47 ==========
[2025-07-10 22:27:47,601] [INFO] [__main__] Launching Flask server...
[2025-07-10 22:27:47,602] [INFO] [__main__] Creating Flask app...
[2025-07-10 22:27:47,602] [INFO] [__main__] Registering watermark blueprint...
[2025-07-10 22:28:01,623] [DEBUG] [__main__] Received a new request.
[2025-07-10 22:28:01,623] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 22:28:01,625] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-07-09 17-18-40.png, content_type=image/png
[2025-07-10 22:28:01,625] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-10 22:28:01,625] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 22:28:01,625] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 22:28:01,658] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-07-10 22:28:01,658] [INFO] [routes.watermark_routes] Original image loaded: shape=(1080, 1920, 3), dtype=uint8
[2025-07-10 22:28:01,659] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 22:28:01,913] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-10 22:28:01,913] [DEBUG] [core.dwt_engine] Total bits extracted: 2073600
[2025-07-10 22:28:01,915] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-10 22:28:01,915] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-10 22:28:01,915] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 22:28:01,920] [INFO] [routes.watermark_routes] Combined bitstream length: 304 bits
[2025-07-10 22:28:01,920] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 22:28:02,000] [DEBUG] [core.dwt_engine] Embedding 304 bits in Y channel parity
[2025-07-10 22:28:02,000] [DEBUG] [core.dwt_engine] Y-parity embed check: 304 bits embedded, 0 mismatches
[2025-07-10 22:28:02,002] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 22:28:02,003] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/adc0050045f0444d967846ae7db2746b_orig.png
[2025-07-10 22:28:02,003] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/adc0050045f0444d967846ae7db2746b_orig.png
[2025-07-10 22:28:02,021] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 22:28:02,021] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 22:28:02,021] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/adc0050045f0444d967846ae7db2746b_wm.png
[2025-07-10 22:28:02,021] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/adc0050045f0444d967846ae7db2746b_wm.png
[2025-07-10 22:28:02,039] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 22:28:02,039] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 22:28:02,039] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 22:28:02,039] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/adc0050045f0444d967846ae7db2746b_orig.png to Pinata Cloud...
[2025-07-10 22:28:04,838] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmSoHwGy27CeqNVC36ew1AdcPoG6HtSn5T3MiwKPjH4gGQ
[2025-07-10 22:28:04,838] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmSoHwGy27CeqNVC36ew1AdcPoG6HtSn5T3MiwKPjH4gGQ
[2025-07-10 22:28:04,838] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/adc0050045f0444d967846ae7db2746b_wm.png to Pinata Cloud...
[2025-07-10 22:28:06,739] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmaQ3z1sPxySeiVQ5164Nev5Euo9fNHnvxj7yYbMYu4div
[2025-07-10 22:28:06,739] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmaQ3z1sPxySeiVQ5164Nev5Euo9fNHnvxj7yYbMYu4div
[2025-07-10 22:28:06,739] [INFO] [routes.watermark_routes] IPFS upload step completed in 4.70 seconds.
[2025-07-10 22:28:06,740] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/adc0050045f0444d967846ae7db2746b_wm.png to base64
[2025-07-10 22:28:06,740] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/adc0050045f0444d967846ae7db2746b_wm.png
[2025-07-10 22:28:06,740] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 22:28:06,740] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 22:28:06,740] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 22:28:06,745] [INFO] [__main__] App context teardown complete.
[2025-07-10 22:28:14,637] [DEBUG] [__main__] Received a new request.
[2025-07-10 22:28:14,637] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-10 22:28:14,639] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=adc0050045f0444d967846ae7db2746b_wm.png
[2025-07-10 22:28:14,639] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 22:28:14,660] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-07-10 22:28:14,660] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(1080, 1920, 3), dtype=uint8
[2025-07-10 22:28:14,660] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-10 22:28:14,871] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0]
[2025-07-10 22:28:14,871] [DEBUG] [core.dwt_engine] Total bits extracted: 2073600
[2025-07-10 22:28:14,871] [INFO] [routes.watermark_routes] Extracted total bitstream length: 2073600 bits
[2025-07-10 22:28:14,871] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0]
[2025-07-10 22:28:14,871] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 4815cc34f47bf84d5ec8a0a28e1b45deacfc8c8696e99a76c5e1d5c8cbf47dc5
[2025-07-10 22:28:14,871] [WARNING] [routes.watermark_routes] Blockchain query failed: name 'contract' is not defined
[2025-07-10 22:28:14,871] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-10 22:28:14,873] [INFO] [__main__] App context teardown complete.
[2025-07-10 22:28:27,492] [DEBUG] [__main__] Received a new request.
[2025-07-10 22:28:27,493] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-10 22:28:27,494] [DEBUG] [routes.watermark_routes] Received file: filename=adc0050045f0444d967846ae7db2746b_wm.png, content_type=image/png
[2025-07-10 22:28:27,494] [DEBUG] [routes.watermark_routes] Received message of length 6 characters
[2025-07-10 22:28:27,494] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-10 22:28:27,494] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 22:28:27,516] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-07-10 22:28:27,516] [INFO] [routes.watermark_routes] Original image loaded: shape=(1080, 1920, 3), dtype=uint8
[2025-07-10 22:28:27,516] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-10 22:28:27,745] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0]
[2025-07-10 22:28:27,745] [DEBUG] [core.dwt_engine] Total bits extracted: 2073600
[2025-07-10 22:28:27,746] [INFO] [routes.watermark_routes] Found existing watermark with 1 messages. Appending new message.
[2025-07-10 22:28:27,746] [INFO] [routes.watermark_routes] Total messages to embed: 2
[2025-07-10 22:28:27,746] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-10 22:28:27,749] [INFO] [routes.watermark_routes] Combined bitstream length: 368 bits
[2025-07-10 22:28:27,749] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-10 22:28:27,821] [DEBUG] [core.dwt_engine] Embedding 368 bits in Y channel parity
[2025-07-10 22:28:27,821] [DEBUG] [core.dwt_engine] Y-parity embed check: 368 bits embedded, 0 mismatches
[2025-07-10 22:28:27,829] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-10 22:28:27,829] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/e7e96f35eb354b35b32a42690d1d7154_orig.png
[2025-07-10 22:28:27,829] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/e7e96f35eb354b35b32a42690d1d7154_orig.png
[2025-07-10 22:28:27,846] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 22:28:27,846] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-10 22:28:27,846] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e7e96f35eb354b35b32a42690d1d7154_wm.png
[2025-07-10 22:28:27,846] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e7e96f35eb354b35b32a42690d1d7154_wm.png
[2025-07-10 22:28:27,863] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-10 22:28:27,863] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-10 22:28:27,863] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-10 22:28:27,863] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/e7e96f35eb354b35b32a42690d1d7154_orig.png to Pinata Cloud...
[2025-07-10 22:28:30,148] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmaQ3z1sPxySeiVQ5164Nev5Euo9fNHnvxj7yYbMYu4div
[2025-07-10 22:28:30,148] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmaQ3z1sPxySeiVQ5164Nev5Euo9fNHnvxj7yYbMYu4div
[2025-07-10 22:28:30,148] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e7e96f35eb354b35b32a42690d1d7154_wm.png to Pinata Cloud...
[2025-07-10 22:28:32,458] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmbKkkASudyQHtyiwqbZSo4FVdyLNVXJfi3zFZLt9ogNXe
[2025-07-10 22:28:32,459] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmbKkkASudyQHtyiwqbZSo4FVdyLNVXJfi3zFZLt9ogNXe
[2025-07-10 22:28:32,459] [INFO] [routes.watermark_routes] IPFS upload step completed in 4.60 seconds.
[2025-07-10 22:28:32,459] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e7e96f35eb354b35b32a42690d1d7154_wm.png to base64
[2025-07-10 22:28:32,459] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/e7e96f35eb354b35b32a42690d1d7154_wm.png
[2025-07-10 22:28:32,459] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-10 22:28:32,459] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-10 22:28:32,459] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-10 22:28:32,462] [INFO] [__main__] App context teardown complete.
[2025-07-10 22:28:37,645] [DEBUG] [__main__] Received a new request.
[2025-07-10 22:28:37,646] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-10 22:28:37,647] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=e7e96f35eb354b35b32a42690d1d7154_wm.png
[2025-07-10 22:28:37,648] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-10 22:28:37,670] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-07-10 22:28:37,670] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(1080, 1920, 3), dtype=uint8
[2025-07-10 22:28:37,670] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-10 22:28:37,894] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1]
[2025-07-10 22:28:37,894] [DEBUG] [core.dwt_engine] Total bits extracted: 2073600
[2025-07-10 22:28:37,894] [INFO] [routes.watermark_routes] Extracted total bitstream length: 2073600 bits
[2025-07-10 22:28:37,894] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1]
[2025-07-10 22:28:37,894] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 16388815362fe673d4b0a49420a8c10a8ec697db4a98dbaebedc9866977c71f4
[2025-07-10 22:28:37,894] [WARNING] [routes.watermark_routes] Blockchain query failed: name 'contract' is not defined
[2025-07-10 22:28:37,894] [INFO] [routes.watermark_routes] Extraction complete: 2 messages found
[2025-07-10 22:28:37,896] [INFO] [__main__] App context teardown complete.


========== New Session: 2025-07-10 22:33:24 ==========


========== New Session: 2025-07-10 22:33:24 ==========


========== New Session: 2025-07-10 22:33:24 ==========


========== New Session: 2025-07-10 22:33:24 ==========


========== New Session: 2025-07-10 22:33:24 ==========
[2025-07-10 22:33:24,876] [INFO] [__main__] Launching Flask server...
[2025-07-10 22:33:24,876] [INFO] [__main__] Creating Flask app...
[2025-07-10 22:33:24,877] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-11 21:49:45 ==========


========== New Session: 2025-07-11 21:49:45 ==========


========== New Session: 2025-07-11 21:49:45 ==========


========== New Session: 2025-07-11 21:50:23 ==========


========== New Session: 2025-07-11 21:50:23 ==========


========== New Session: 2025-07-11 21:50:23 ==========


========== New Session: 2025-07-11 21:50:58 ==========


========== New Session: 2025-07-11 21:50:58 ==========


========== New Session: 2025-07-11 21:50:58 ==========


========== New Session: 2025-07-11 21:50:58 ==========


========== New Session: 2025-07-11 21:50:58 ==========
[2025-07-11 21:50:58,992] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:50:58,993] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:50:58,993] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-11 21:50:59 ==========


========== New Session: 2025-07-11 21:50:59 ==========


========== New Session: 2025-07-11 21:50:59 ==========


========== New Session: 2025-07-11 21:50:59 ==========


========== New Session: 2025-07-11 21:50:59 ==========
[2025-07-11 21:50:59,558] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:50:59,558] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:50:59,559] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-11 21:52:12 ==========


========== New Session: 2025-07-11 21:52:12 ==========


========== New Session: 2025-07-11 21:52:12 ==========


========== New Session: 2025-07-11 21:52:12 ==========


========== New Session: 2025-07-11 21:52:12 ==========
[2025-07-11 21:52:12,559] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:52:12,559] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:52:12,559] [INFO] [__main__] Registering watermark blueprint...


========== New Session: 2025-07-11 21:52:12 ==========


========== New Session: 2025-07-11 21:52:12 ==========


========== New Session: 2025-07-11 21:52:12 ==========


========== New Session: 2025-07-11 21:52:13 ==========


========== New Session: 2025-07-11 21:52:13 ==========
[2025-07-11 21:52:13,108] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:52:13,108] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:52:13,108] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 21:52:55,864] [DEBUG] [__main__] Received a new request.
[2025-07-11 21:52:55,864] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-11 21:52:55,866] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-07-08 13-26-13.png, content_type=image/png
[2025-07-11 21:52:55,866] [DEBUG] [routes.watermark_routes] Received message of length 3 characters
[2025-07-11 21:52:55,866] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-11 21:52:55,866] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-11 21:52:55,879] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (595, 365, 3)
[2025-07-11 21:52:55,879] [INFO] [routes.watermark_routes] Original image loaded: shape=(595, 365, 3), dtype=uint8
[2025-07-11 21:52:55,879] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-11 21:52:55,932] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-11 21:52:55,933] [DEBUG] [core.dwt_engine] Total bits extracted: 217175
[2025-07-11 21:52:55,933] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-11 21:52:55,933] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-11 21:52:55,934] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-11 21:52:55,934] [INFO] [routes.watermark_routes] Combined bitstream length: 296 bits
[2025-07-11 21:52:55,934] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-11 21:52:55,954] [DEBUG] [core.dwt_engine] Embedding 296 bits in Y channel parity
[2025-07-11 21:52:55,954] [DEBUG] [core.dwt_engine] Y-parity embed check: 296 bits embedded, 0 mismatches
[2025-07-11 21:52:55,954] [WARNING] [core.dwt_engine] Resizing Cr from (595, 365) to (596, 366)
[2025-07-11 21:52:55,956] [WARNING] [core.dwt_engine] Resizing Cb from (595, 365) to (596, 366)
[2025-07-11 21:52:55,956] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-11 21:52:55,956] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/5a0e4e866b814d06972d9fcd20deb493_orig.png
[2025-07-11 21:52:55,956] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/5a0e4e866b814d06972d9fcd20deb493_orig.png
[2025-07-11 21:52:55,960] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-11 21:52:55,960] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-11 21:52:55,960] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/5a0e4e866b814d06972d9fcd20deb493_wm.png
[2025-07-11 21:52:55,960] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/5a0e4e866b814d06972d9fcd20deb493_wm.png
[2025-07-11 21:52:55,962] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-11 21:52:55,962] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-11 21:52:55,962] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-11 21:52:55,962] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/5a0e4e866b814d06972d9fcd20deb493_orig.png to Pinata Cloud...
[2025-07-11 21:52:57,722] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmPqDjj7PAFvGp3TYmFdeBuLgssD6xWKRXFADkaXnLLRiB
[2025-07-11 21:52:57,722] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmPqDjj7PAFvGp3TYmFdeBuLgssD6xWKRXFADkaXnLLRiB
[2025-07-11 21:52:57,722] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/5a0e4e866b814d06972d9fcd20deb493_wm.png to Pinata Cloud...
[2025-07-11 21:52:59,049] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmNNajHsqJNrVi9Kv82iruuZJsvD8PSswijjkTJ4DAHk8b
[2025-07-11 21:52:59,049] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmNNajHsqJNrVi9Kv82iruuZJsvD8PSswijjkTJ4DAHk8b
[2025-07-11 21:52:59,049] [INFO] [routes.watermark_routes] IPFS upload step completed in 3.09 seconds.
[2025-07-11 21:52:59,051] [INFO] [routes.watermark_routes] Original image SHA256 hash: 15a088fa34f46bbba3edbbc35ae7527ad5dc73dfd6e9d5bab186066c6a043b03
[2025-07-11 21:52:59,051] [INFO] [routes.watermark_routes] Watermarked image SHA256 hash: fc7d12493722567bd54f0a925b92f86a2720b54627343572855dcd17081211c2
[2025-07-11 21:52:59,051] [INFO] [routes.watermark_routes] Combined message string: sds
[2025-07-11 21:52:59,051] [INFO] [routes.watermark_routes] CRC value: 33086
[2025-07-11 21:52:59,051] [INFO] [routes.watermark_routes] Parent hash (hex): 0000000000000000000000000000000000000000000000000000000000000000
[2025-07-11 21:52:59,053] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: None
[2025-07-11 21:52:59,054] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/5a0e4e866b814d06972d9fcd20deb493_wm.png to base64
[2025-07-11 21:52:59,054] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/5a0e4e866b814d06972d9fcd20deb493_wm.png
[2025-07-11 21:52:59,054] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-11 21:52:59,054] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-11 21:52:59,054] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-11 21:52:59,056] [INFO] [__main__] App context teardown complete.
[2025-07-11 21:57:05,868] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:57:05,868] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:57:05,869] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 21:57:05,870] [INFO] [__main__] b" * Serving Flask app 'app'"
[2025-07-11 21:57:05,870] [INFO] [__main__] b' * Debug mode: on'
[2025-07-11 21:57:05,876] [ERROR] [__main__] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-07-11 21:57:05,876] [ERROR] [__main__] [33mPress CTRL+C to quit[0m
[2025-07-11 21:57:05,876] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 21:57:06,463] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:57:06,463] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:57:06,464] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 21:57:06,472] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 21:57:06,473] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 21:57:25,905] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:57:25,905] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:57:25,906] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 21:57:25,907] [INFO] [__main__] b" * Serving Flask app 'app'"
[2025-07-11 21:57:25,908] [INFO] [__main__] b' * Debug mode: on'
[2025-07-11 21:57:25,913] [ERROR] [__main__] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-07-11 21:57:25,913] [ERROR] [__main__] [33mPress CTRL+C to quit[0m
[2025-07-11 21:57:25,914] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 21:57:26,445] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:57:26,445] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:57:26,446] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 21:57:26,453] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 21:57:26,453] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 21:57:52,349] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:57:52,349] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:57:52,350] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 21:57:52,351] [INFO] [__main__] b" * Serving Flask app 'app'"
[2025-07-11 21:57:52,351] [INFO] [__main__] b' * Debug mode: on'
[2025-07-11 21:57:52,357] [ERROR] [__main__] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-07-11 21:57:52,357] [ERROR] [__main__] [33mPress CTRL+C to quit[0m
[2025-07-11 21:57:52,357] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 21:57:52,874] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:57:52,874] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:57:52,875] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 21:57:52,881] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 21:57:52,881] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 21:59:23,709] [ERROR] [__main__]  * Detected change in '/home/gowtham/dwt-watermarking/backend/utils/logger.py', reloading
[2025-07-11 21:59:23,817] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 21:59:24,355] [INFO] [__main__] Launching Flask server...
[2025-07-11 21:59:24,355] [INFO] [__main__] Creating Flask app...
[2025-07-11 21:59:24,356] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 21:59:24,363] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 21:59:24,364] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:00:10,781] [ERROR] [__main__]  * Detected change in '/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py', reloading
[2025-07-11 22:00:10,908] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:00:11,451] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:00:11,451] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:00:11,452] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:00:11,459] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 22:00:11,459] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:00:52,817] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:00:52,817] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:00:52,818] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:00:52,820] [INFO] [__main__] b" * Serving Flask app 'app'"
[2025-07-11 22:00:52,820] [INFO] [__main__] b' * Debug mode: on'
[2025-07-11 22:00:52,826] [ERROR] [__main__] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-07-11 22:00:52,826] [ERROR] [__main__] [33mPress CTRL+C to quit[0m
[2025-07-11 22:00:52,826] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:00:53,362] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:00:53,362] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:00:53,363] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:00:53,369] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 22:00:53,369] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:01:06,515] [DEBUG] [__main__] Received a new request.
[2025-07-11 22:01:06,515] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-11 22:01:06,517] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-07-09 17-18-40.png, content_type=image/png
[2025-07-11 22:01:06,517] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-11 22:01:06,517] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-11 22:01:06,517] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-11 22:01:06,552] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-07-11 22:01:06,552] [INFO] [routes.watermark_routes] Original image loaded: shape=(1080, 1920, 3), dtype=uint8
[2025-07-11 22:01:06,552] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-11 22:01:06,799] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-11 22:01:06,799] [DEBUG] [core.dwt_engine] Total bits extracted: 2073600
[2025-07-11 22:01:06,801] [ERROR] [__main__] Bit length is not a multiple of 8.
[2025-07-11 22:01:06,801] [ERROR] [__main__] Failed to decode message at cursor 272: Bit length must be a multiple of 8 to convert to string.. Stopping parse.
[2025-07-11 22:01:06,801] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-11 22:01:06,801] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-11 22:01:06,801] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-11 22:01:06,806] [INFO] [routes.watermark_routes] Combined bitstream length: 304 bits
[2025-07-11 22:01:06,807] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-11 22:01:06,906] [DEBUG] [core.dwt_engine] Embedding 304 bits in Y channel parity
[2025-07-11 22:01:06,906] [DEBUG] [core.dwt_engine] Y-parity embed check: 304 bits embedded, 0 mismatches
[2025-07-11 22:01:06,909] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-11 22:01:06,909] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/7e2e2b1542a54a99a696fa9b7042b5ac_orig.png
[2025-07-11 22:01:06,909] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/7e2e2b1542a54a99a696fa9b7042b5ac_orig.png
[2025-07-11 22:01:06,930] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-11 22:01:06,931] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-11 22:01:06,931] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/7e2e2b1542a54a99a696fa9b7042b5ac_wm.png
[2025-07-11 22:01:06,931] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/7e2e2b1542a54a99a696fa9b7042b5ac_wm.png
[2025-07-11 22:01:06,951] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-11 22:01:06,951] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-11 22:01:06,951] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-11 22:01:06,951] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/7e2e2b1542a54a99a696fa9b7042b5ac_orig.png to Pinata Cloud...
[2025-07-11 22:01:09,076] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmSoHwGy27CeqNVC36ew1AdcPoG6HtSn5T3MiwKPjH4gGQ
[2025-07-11 22:01:09,077] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmSoHwGy27CeqNVC36ew1AdcPoG6HtSn5T3MiwKPjH4gGQ
[2025-07-11 22:01:09,077] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/7e2e2b1542a54a99a696fa9b7042b5ac_wm.png to Pinata Cloud...
[2025-07-11 22:01:11,061] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: Qmc4DLeu4tAfbnFZkBof1zNbytc1VUC2EmN6JNbtdj6boA
[2025-07-11 22:01:11,061] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: Qmc4DLeu4tAfbnFZkBof1zNbytc1VUC2EmN6JNbtdj6boA
[2025-07-11 22:01:11,062] [INFO] [routes.watermark_routes] IPFS upload step completed in 4.11 seconds.
[2025-07-11 22:01:11,075] [INFO] [routes.watermark_routes] Original image SHA256 hash: 4815cc34f47bf84d5ec8a0a28e1b45deacfc8c8696e99a76c5e1d5c8cbf47dc5
[2025-07-11 22:01:11,075] [INFO] [routes.watermark_routes] Watermarked image SHA256 hash: 414b421a681c9b387c743e0c1c3589aa3fe928f6cc5778909d42e1a9a18204a1
[2025-07-11 22:01:11,075] [INFO] [routes.watermark_routes] Combined message string: sada
[2025-07-11 22:01:11,075] [INFO] [routes.watermark_routes] CRC value: 36372
[2025-07-11 22:01:11,075] [INFO] [routes.watermark_routes] Parent hash (hex): 0000000000000000000000000000000000000000000000000000000000000000
[2025-07-11 22:01:11,077] [ERROR] [__main__] Error in store_watermark_on_chain: Address None must be provided as a string
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 40, in store_watermark_on_chain
    nonce = w3.eth.get_transaction_count(PUBLIC_ADDRESS, 'pending')
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/eth/eth.py", line 485, in get_transaction_count
    return self._get_transaction_count(account, block_identifier)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/module.py", line 101, in caller
    (method_str, params), response_formatters = method.process_params(
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/method.py", line 237, in process_params
    _apply_request_formatters(params, self.request_formatters(method)),
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/eth_utils/functional.py", line 47, in inner
    return callback(fn(*args, **kwargs))
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/method.py", line 64, in _apply_request_formatters
    formatted_params = pipe(params, request_formatters)
  File "cytoolz/functoolz.pyx", line 685, in cytoolz.functoolz.pipe
  File "cytoolz/functoolz.pyx", line 660, in cytoolz.functoolz.c_pipe
  File "cytoolz/functoolz.pyx", line 523, in cytoolz.functoolz.Compose.__call__
  File "cytoolz/functoolz.pyx", line 272, in cytoolz.functoolz.curry.__call__
  File "cytoolz/functoolz.pyx", line 268, in cytoolz.functoolz.curry.__call__
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/abi.py", line 613, in map_abi_data
    return pipe(
  File "cytoolz/functoolz.pyx", line 685, in cytoolz.functoolz.pipe
  File "cytoolz/functoolz.pyx", line 660, in cytoolz.functoolz.c_pipe
  File "cytoolz/functoolz.pyx", line 272, in cytoolz.functoolz.curry.__call__
  File "cytoolz/functoolz.pyx", line 268, in cytoolz.functoolz.curry.__call__
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/abi.py", line 655, in data_tree_map
    return recursive_map(map_to_typed_data, data_tree)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/decorators.py", line 38, in wrapped
    return to_wrap(*args)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/formatters.py", line 89, in recursive_map
    items_mapped = map_collection(recurse, data)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/formatters.py", line 73, in map_collection
    return datatype(map(func, collection))
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/formatters.py", line 87, in recurse
    return recursive_map(func, item)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/decorators.py", line 38, in wrapped
    return to_wrap(*args)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/formatters.py", line 90, in recursive_map
    return func(items_mapped)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/abi.py", line 651, in map_to_typed_data
    return ABITypedData(func(*elements))
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/normalizers.py", line 79, in wrapper
    modified = to_wrap(type_str, data)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/normalizers.py", line 202, in abi_address_to_hex
    validate_address(data)
  File "/home/gowtham/dwt-watermarking/backend/venv/lib/python3.10/site-packages/web3/_utils/validation.py", line 194, in validate_address
    raise Web3TypeError(f"Address {value} must be provided as a string")
web3.exceptions.Web3TypeError: Address None must be provided as a string
[2025-07-11 22:01:11,077] [INFO] [__main__] Error in store_watermark_on_chain: Address None must be provided as a string
[2025-07-11 22:01:11,077] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: None
[2025-07-11 22:01:11,077] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/7e2e2b1542a54a99a696fa9b7042b5ac_wm.png to base64
[2025-07-11 22:01:11,077] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/7e2e2b1542a54a99a696fa9b7042b5ac_wm.png
[2025-07-11 22:01:11,078] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-11 22:01:11,078] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-11 22:01:11,078] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-11 22:01:11,086] [INFO] [__main__] App context teardown complete.
[2025-07-11 22:01:11,086] [ERROR] [__main__] 127.0.0.1 - - [11/Jul/2025 22:01:11] "POST /watermark HTTP/1.1" 200 -
[2025-07-11 22:04:10,028] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:04:10,028] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:04:10,029] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:04:10,030] [INFO] [__main__] b" * Serving Flask app 'app'"
[2025-07-11 22:04:10,030] [INFO] [__main__] b' * Debug mode: on'
[2025-07-11 22:04:10,036] [ERROR] [__main__] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-07-11 22:04:10,036] [ERROR] [__main__] [33mPress CTRL+C to quit[0m
[2025-07-11 22:04:10,037] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:04:10,547] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:04:10,547] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:04:10,547] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:04:10,554] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 22:04:10,555] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:04:22,628] [DEBUG] [__main__] Received a new request.
[2025-07-11 22:04:22,628] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-11 22:04:22,629] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-07-08 13-26-13.png, content_type=image/png
[2025-07-11 22:04:22,629] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-11 22:04:22,629] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-11 22:04:22,629] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-11 22:04:22,633] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (595, 365, 3)
[2025-07-11 22:04:22,633] [INFO] [routes.watermark_routes] Original image loaded: shape=(595, 365, 3), dtype=uint8
[2025-07-11 22:04:22,634] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-11 22:04:22,664] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[2025-07-11 22:04:22,664] [DEBUG] [core.dwt_engine] Total bits extracted: 217175
[2025-07-11 22:04:22,664] [ERROR] [__main__] Bit length is not a multiple of 8.
[2025-07-11 22:04:22,664] [ERROR] [__main__] Failed to decode message at cursor 272: Bit length must be a multiple of 8 to convert to string.. Stopping parse.
[2025-07-11 22:04:22,664] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-11 22:04:22,665] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-11 22:04:22,665] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-11 22:04:22,665] [INFO] [routes.watermark_routes] Combined bitstream length: 304 bits
[2025-07-11 22:04:22,666] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-11 22:04:22,674] [DEBUG] [core.dwt_engine] Embedding 304 bits in Y channel parity
[2025-07-11 22:04:22,674] [DEBUG] [core.dwt_engine] Y-parity embed check: 304 bits embedded, 0 mismatches
[2025-07-11 22:04:22,674] [WARNING] [core.dwt_engine] Resizing Cr from (595, 365) to (596, 366)
[2025-07-11 22:04:22,675] [WARNING] [core.dwt_engine] Resizing Cb from (595, 365) to (596, 366)
[2025-07-11 22:04:22,675] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-11 22:04:22,675] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/321a64bc787b4fccbd194ae179ee1f20_orig.png
[2025-07-11 22:04:22,675] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/321a64bc787b4fccbd194ae179ee1f20_orig.png
[2025-07-11 22:04:22,678] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-11 22:04:22,678] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-11 22:04:22,678] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/321a64bc787b4fccbd194ae179ee1f20_wm.png
[2025-07-11 22:04:22,678] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/321a64bc787b4fccbd194ae179ee1f20_wm.png
[2025-07-11 22:04:22,680] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-11 22:04:22,681] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-11 22:04:22,681] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-11 22:04:22,681] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/321a64bc787b4fccbd194ae179ee1f20_orig.png to Pinata Cloud...
[2025-07-11 22:04:24,261] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmPqDjj7PAFvGp3TYmFdeBuLgssD6xWKRXFADkaXnLLRiB
[2025-07-11 22:04:24,261] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: QmPqDjj7PAFvGp3TYmFdeBuLgssD6xWKRXFADkaXnLLRiB
[2025-07-11 22:04:24,262] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/321a64bc787b4fccbd194ae179ee1f20_wm.png to Pinata Cloud...
[2025-07-11 22:04:25,629] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmQqrejyc9coavCSjK7nnWfy4XNsgDwykFkB5XVjxJs5nV
[2025-07-11 22:04:25,630] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmQqrejyc9coavCSjK7nnWfy4XNsgDwykFkB5XVjxJs5nV
[2025-07-11 22:04:25,630] [INFO] [routes.watermark_routes] IPFS upload step completed in 2.95 seconds.
[2025-07-11 22:04:25,632] [INFO] [routes.watermark_routes] Original image SHA256 hash: 15a088fa34f46bbba3edbbc35ae7527ad5dc73dfd6e9d5bab186066c6a043b03
[2025-07-11 22:04:25,632] [INFO] [routes.watermark_routes] Watermarked image SHA256 hash: 6ed6d12a257eb7846c24042c7f64be7d4ab51a2c8ca04a7d34eb106929da42ba
[2025-07-11 22:04:25,632] [INFO] [routes.watermark_routes] Combined message string: wqww
[2025-07-11 22:04:25,632] [INFO] [routes.watermark_routes] CRC value: 20208
[2025-07-11 22:04:25,632] [INFO] [routes.watermark_routes] Parent hash (hex): 0000000000000000000000000000000000000000000000000000000000000000
[2025-07-11 22:04:27,694] [ERROR] [__main__] Error in store_watermark_on_chain: 'SignedTransaction' object has no attribute 'rawTransaction'
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 76, in store_watermark_on_chain
    tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
AttributeError: 'SignedTransaction' object has no attribute 'rawTransaction'
[2025-07-11 22:04:27,694] [INFO] [__main__] Error in store_watermark_on_chain: 'SignedTransaction' object has no attribute 'rawTransaction'
[2025-07-11 22:04:27,694] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: None
[2025-07-11 22:04:27,694] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/321a64bc787b4fccbd194ae179ee1f20_wm.png to base64
[2025-07-11 22:04:27,694] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/321a64bc787b4fccbd194ae179ee1f20_wm.png
[2025-07-11 22:04:27,694] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-11 22:04:27,695] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-11 22:04:27,695] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-11 22:04:27,697] [INFO] [__main__] App context teardown complete.
[2025-07-11 22:04:27,697] [ERROR] [__main__] 127.0.0.1 - - [11/Jul/2025 22:04:27] "POST /watermark HTTP/1.1" 200 -
[2025-07-11 22:06:21,750] [ERROR] [__main__]  * Detected change in '/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py', reloading
[2025-07-11 22:06:21,940] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:06:22,530] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:06:22,530] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:06:22,531] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:06:22,538] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 22:06:22,539] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:06:41,482] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:06:41,482] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:06:41,483] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:06:41,485] [INFO] [__main__] b" * Serving Flask app 'app'"
[2025-07-11 22:06:41,485] [INFO] [__main__] b' * Debug mode: on'
[2025-07-11 22:06:41,491] [ERROR] [__main__] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-07-11 22:06:41,491] [ERROR] [__main__] [33mPress CTRL+C to quit[0m
[2025-07-11 22:06:41,491] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:06:42,039] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:06:42,039] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:06:42,040] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:06:42,046] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 22:06:42,047] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:06:51,532] [DEBUG] [__main__] Received a new request.
[2025-07-11 22:06:51,532] [INFO] [routes.watermark_routes] POST /watermark called
[2025-07-11 22:06:51,533] [DEBUG] [routes.watermark_routes] Received file: filename=Screenshot from 2025-07-01 14-34-54.png, content_type=image/png
[2025-07-11 22:06:51,533] [DEBUG] [routes.watermark_routes] Received message of length 4 characters
[2025-07-11 22:06:51,533] [DEBUG] [routes.watermark_routes] Loading original image from uploaded file
[2025-07-11 22:06:51,533] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-11 22:06:51,534] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (105, 461, 3)
[2025-07-11 22:06:51,534] [INFO] [routes.watermark_routes] Original image loaded: shape=(105, 461, 3), dtype=uint8
[2025-07-11 22:06:51,534] [DEBUG] [routes.watermark_routes] Attempting to extract existing hash and messages for appending support
[2025-07-11 22:06:51,541] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[2025-07-11 22:06:51,541] [DEBUG] [core.dwt_engine] Total bits extracted: 48405
[2025-07-11 22:06:51,546] [ERROR] [__main__] Failed to decode bytes to string: 'utf-8' codec can't decode byte 0xc6 in position 0: invalid continuation byte
[2025-07-11 22:06:51,546] [ERROR] [__main__] Failed to decode message at cursor 272: Invalid byte sequence; cannot decode.. Stopping parse.
[2025-07-11 22:06:51,546] [INFO] [routes.watermark_routes] Found existing watermark with 0 messages. Appending new message.
[2025-07-11 22:06:51,547] [INFO] [routes.watermark_routes] Total messages to embed: 1
[2025-07-11 22:06:51,547] [DEBUG] [routes.watermark_routes] Preparing bitstream with SHA256 hash and multi-message framing
[2025-07-11 22:06:51,547] [INFO] [routes.watermark_routes] Combined bitstream length: 304 bits
[2025-07-11 22:06:51,547] [DEBUG] [routes.watermark_routes] Embedding combined bitstream into image via DWT parity
[2025-07-11 22:06:51,549] [DEBUG] [core.dwt_engine] Embedding 304 bits in Y channel parity
[2025-07-11 22:06:51,549] [DEBUG] [core.dwt_engine] Y-parity embed check: 304 bits embedded, 0 mismatches
[2025-07-11 22:06:51,549] [WARNING] [core.dwt_engine] Resizing Cr from (105, 461) to (106, 462)
[2025-07-11 22:06:51,549] [WARNING] [core.dwt_engine] Resizing Cb from (105, 461) to (106, 462)
[2025-07-11 22:06:51,550] [INFO] [routes.watermark_routes] Embedding complete without mismatches
[2025-07-11 22:06:51,550] [DEBUG] [routes.watermark_routes] Saving original image to /home/gowtham/dwt-watermarking/backend/uploads/original/6fd72ff8d8c8468d859517fa6f8123ba_orig.png
[2025-07-11 22:06:51,550] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/6fd72ff8d8c8468d859517fa6f8123ba_orig.png
[2025-07-11 22:06:51,551] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-11 22:06:51,551] [INFO] [routes.watermark_routes] Original image saved successfully
[2025-07-11 22:06:51,551] [DEBUG] [routes.watermark_routes] Saving watermarked image to /home/gowtham/dwt-watermarking/backend/uploads/watermarked/6fd72ff8d8c8468d859517fa6f8123ba_wm.png
[2025-07-11 22:06:51,551] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/6fd72ff8d8c8468d859517fa6f8123ba_wm.png
[2025-07-11 22:06:51,552] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-07-11 22:06:51,553] [INFO] [routes.watermark_routes] Watermarked image saved successfully
[2025-07-11 22:06:51,553] [INFO] [routes.watermark_routes] Starting upload of original and watermarked images to Pinata Cloud (IPFS)...
[2025-07-11 22:06:51,553] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/original/6fd72ff8d8c8468d859517fa6f8123ba_orig.png to Pinata Cloud...
[2025-07-11 22:06:53,339] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: Qmazwew3nC6KuSTHrdfqGrjy9Fn9nUsN6azq9TBQuYFyGU
[2025-07-11 22:06:53,339] [INFO] [routes.watermark_routes] Original image uploaded to Pinata. CID: Qmazwew3nC6KuSTHrdfqGrjy9Fn9nUsN6azq9TBQuYFyGU
[2025-07-11 22:06:53,340] [INFO] [utils.ipfs_utils] Uploading /home/gowtham/dwt-watermarking/backend/uploads/watermarked/6fd72ff8d8c8468d859517fa6f8123ba_wm.png to Pinata Cloud...
[2025-07-11 22:06:54,638] [INFO] [utils.ipfs_utils] File uploaded successfully to Pinata. CID: QmXkDxiaRwzod2AvEzweTuvZHh4xzYK7iA5pUjaDiAmPvo
[2025-07-11 22:06:54,638] [INFO] [routes.watermark_routes] Watermarked image uploaded to Pinata. CID: QmXkDxiaRwzod2AvEzweTuvZHh4xzYK7iA5pUjaDiAmPvo
[2025-07-11 22:06:54,638] [INFO] [routes.watermark_routes] IPFS upload step completed in 3.09 seconds.
[2025-07-11 22:06:54,639] [INFO] [routes.watermark_routes] Original image SHA256 hash: 894d8a6092ba240583c788e6544f74d8834989536c510a3dfdd3b8b41adb7650
[2025-07-11 22:06:54,639] [INFO] [routes.watermark_routes] Watermarked image SHA256 hash: 976c4ac63c5f51d10df3226881da78b20c150ca1286aeb1856f9def70d57e3dd
[2025-07-11 22:06:54,639] [INFO] [routes.watermark_routes] Combined message string: sdsd
[2025-07-11 22:06:54,639] [INFO] [routes.watermark_routes] CRC value: 15590
[2025-07-11 22:06:54,639] [INFO] [routes.watermark_routes] Parent hash (hex): 0000000000000000000000000000000000000000000000000000000000000000
[2025-07-11 22:06:57,056] [INFO] [__main__] Transaction sent. Hash: 0xb609204cb1116fecaf5a7bf96f72dd91b7708edaba2c727db0070f1c282a1af3
[2025-07-11 22:06:57,438] [INFO] [__main__] Transaction mined in block 23787360 with status 1
[2025-07-11 22:06:57,439] [INFO] [routes.watermark_routes] Logged watermark to blockchain. Tx hash: 0xb609204cb1116fecaf5a7bf96f72dd91b7708edaba2c727db0070f1c282a1af3
[2025-07-11 22:06:57,439] [DEBUG] [routes.watermark_routes] Encoding watermarked image at /home/gowtham/dwt-watermarking/backend/uploads/watermarked/6fd72ff8d8c8468d859517fa6f8123ba_wm.png to base64
[2025-07-11 22:06:57,439] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/6fd72ff8d8c8468d859517fa6f8123ba_wm.png
[2025-07-11 22:06:57,439] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-07-11 22:06:57,439] [INFO] [routes.watermark_routes] Base64 encoding complete
[2025-07-11 22:06:57,439] [INFO] [routes.watermark_routes] POST /watermark completed successfully
[2025-07-11 22:06:57,440] [INFO] [__main__] App context teardown complete.
[2025-07-11 22:06:57,440] [ERROR] [__main__] 127.0.0.1 - - [11/Jul/2025 22:06:57] "POST /watermark HTTP/1.1" 200 -
[2025-07-11 22:08:03,368] [DEBUG] [__main__] Received a new request.
[2025-07-11 22:08:03,368] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-11 22:08:03,370] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=6fd72ff8d8c8468d859517fa6f8123ba_wm.png
[2025-07-11 22:08:03,370] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-11 22:08:03,370] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (106, 462, 3)
[2025-07-11 22:08:03,371] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(106, 462, 3), dtype=uint8
[2025-07-11 22:08:03,371] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-11 22:08:03,377] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0]
[2025-07-11 22:08:03,377] [DEBUG] [core.dwt_engine] Total bits extracted: 48972
[2025-07-11 22:08:03,377] [INFO] [routes.watermark_routes] Extracted total bitstream length: 48972 bits
[2025-07-11 22:08:03,377] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0]
[2025-07-11 22:08:03,384] [ERROR] [__main__] Failed to decode bytes to string: 'utf-8' codec can't decode byte 0x80 in position 12: invalid start byte
[2025-07-11 22:08:03,384] [ERROR] [__main__] Failed to decode message at cursor 320: Invalid byte sequence; cannot decode.. Stopping parse.
[2025-07-11 22:08:03,384] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 894d8a6092ba240583c788e6544f74d8834989536c510a3dfdd3b8b41adb7650
[2025-07-11 22:08:03,384] [WARNING] [routes.watermark_routes] Blockchain query failed: name 'contract' is not defined
[2025-07-11 22:08:03,384] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-11 22:08:03,385] [INFO] [__main__] App context teardown complete.
[2025-07-11 22:08:03,385] [ERROR] [__main__] 127.0.0.1 - - [11/Jul/2025 22:08:03] "POST /extract HTTP/1.1" 200 -
[2025-07-11 22:12:23,121] [ERROR] [__main__]  * Detected change in '/home/gowtham/dwt-watermarking/backend/utils/bit_utils.py', reloading
[2025-07-11 22:12:23,253] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:12:23,799] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:12:23,799] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:12:23,799] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:12:23,806] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 22:12:23,806] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:12:54,240] [DEBUG] [__main__] Received a new request.
[2025-07-11 22:12:54,240] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-11 22:12:54,242] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=6fd72ff8d8c8468d859517fa6f8123ba_wm.png
[2025-07-11 22:12:54,242] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-11 22:12:54,243] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (106, 462, 3)
[2025-07-11 22:12:54,243] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(106, 462, 3), dtype=uint8
[2025-07-11 22:12:54,243] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-11 22:12:54,251] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0]
[2025-07-11 22:12:54,251] [DEBUG] [core.dwt_engine] Total bits extracted: 48972
[2025-07-11 22:12:54,251] [INFO] [routes.watermark_routes] Extracted total bitstream length: 48972 bits
[2025-07-11 22:12:54,251] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0]
[2025-07-11 22:12:54,251] [ERROR] [__main__] Invalid or out-of-bounds message length at cursor 304: 36864. Stopping parse.
[2025-07-11 22:12:54,251] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 894d8a6092ba240583c788e6544f74d8834989536c510a3dfdd3b8b41adb7650
[2025-07-11 22:12:54,251] [WARNING] [routes.watermark_routes] Blockchain query failed: name 'contract' is not defined
[2025-07-11 22:12:54,251] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-11 22:12:54,252] [INFO] [__main__] App context teardown complete.
[2025-07-11 22:12:54,252] [ERROR] [__main__] 127.0.0.1 - - [11/Jul/2025 22:12:54] "POST /extract HTTP/1.1" 200 -
[2025-07-11 22:18:44,164] [ERROR] [__main__]  * Detected change in '/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py', reloading
[2025-07-11 22:18:44,296] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:18:44,534] [ERROR] [core.dwt_engine] Uncaught exception
Traceback (most recent call last):
  File "/home/gowtham/dwt-watermarking/backend/app.py", line 3, in <module>
    from routes.watermark_routes import watermark_bp
  File "/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py", line 22, in <module>
    from utils.blockchain_utils import store_watermark_on_chain, get_watermark_from_chain
  File "/home/gowtham/dwt-watermarking/backend/utils/blockchain_utils.py", line 5, in <module>
    from backend.web3config import web3, CHAIN_ID  # Import web3 and CHAIN_ID
ModuleNotFoundError: No module named 'backend'
[2025-07-11 22:19:05,981] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:19:05,981] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:19:05,982] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:19:05,983] [INFO] [__main__] b" * Serving Flask app 'app'"
[2025-07-11 22:19:05,983] [INFO] [__main__] b' * Debug mode: on'
[2025-07-11 22:19:05,989] [ERROR] [__main__] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-07-11 22:19:05,989] [ERROR] [__main__] [33mPress CTRL+C to quit[0m
[2025-07-11 22:19:05,989] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:19:06,680] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:19:06,680] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:19:06,681] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:19:06,689] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 22:19:06,689] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:29:34,039] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:29:34,039] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:29:34,040] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:29:34,041] [INFO] [__main__] b" * Serving Flask app 'app'"
[2025-07-11 22:29:34,041] [INFO] [__main__] b' * Debug mode: on'
[2025-07-11 22:29:34,047] [ERROR] [__main__] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-07-11 22:29:34,047] [ERROR] [__main__] [33mPress CTRL+C to quit[0m
[2025-07-11 22:29:34,047] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:29:34,576] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:29:34,576] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:29:34,577] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:29:34,584] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 22:29:34,584] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:29:36,987] [DEBUG] [__main__] Received a new request.
[2025-07-11 22:29:36,987] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-11 22:29:36,988] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=6fd72ff8d8c8468d859517fa6f8123ba_wm.png
[2025-07-11 22:29:36,988] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-11 22:29:36,989] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (106, 462, 3)
[2025-07-11 22:29:36,989] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(106, 462, 3), dtype=uint8
[2025-07-11 22:29:36,989] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-11 22:29:36,995] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0]
[2025-07-11 22:29:36,995] [DEBUG] [core.dwt_engine] Total bits extracted: 48972
[2025-07-11 22:29:36,995] [INFO] [routes.watermark_routes] Extracted total bitstream length: 48972 bits
[2025-07-11 22:29:36,995] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0]
[2025-07-11 22:29:36,996] [ERROR] [__main__] Invalid or out-of-bounds message length at cursor 304: 36864. Stopping parse.
[2025-07-11 22:29:36,996] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 894d8a6092ba240583c788e6544f74d8834989536c510a3dfdd3b8b41adb7650
[2025-07-11 22:29:36,996] [WARNING] [routes.watermark_routes] Blockchain query failed: name 'contract' is not defined
[2025-07-11 22:29:36,996] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-11 22:29:36,997] [INFO] [__main__] App context teardown complete.
[2025-07-11 22:29:36,997] [ERROR] [__main__] 127.0.0.1 - - [11/Jul/2025 22:29:36] "POST /extract HTTP/1.1" 200 -
[2025-07-11 22:31:30,632] [ERROR] [__main__]  * Detected change in '/home/gowtham/dwt-watermarking/backend/routes/watermark_routes.py', reloading
[2025-07-11 22:31:30,743] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:31:31,277] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:31:31,277] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:31:31,278] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:31:31,285] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 22:31:31,285] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:31:50,645] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:31:50,645] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:31:50,645] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:31:50,647] [INFO] [__main__] b" * Serving Flask app 'app'"
[2025-07-11 22:31:50,647] [INFO] [__main__] b' * Debug mode: on'
[2025-07-11 22:31:50,652] [ERROR] [__main__] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-07-11 22:31:50,653] [ERROR] [__main__] [33mPress CTRL+C to quit[0m
[2025-07-11 22:31:50,653] [ERROR] [__main__]  * Restarting with stat
[2025-07-11 22:31:51,209] [INFO] [__main__] Launching Flask server...
[2025-07-11 22:31:51,209] [INFO] [__main__] Creating Flask app...
[2025-07-11 22:31:51,210] [INFO] [__main__] Registering watermark blueprint...
[2025-07-11 22:31:51,219] [ERROR] [__main__]  * Debugger is active!
[2025-07-11 22:31:51,220] [ERROR] [__main__]  * Debugger PIN: 575-763-446
[2025-07-11 22:31:57,125] [DEBUG] [__main__] Received a new request.
[2025-07-11 22:31:57,125] [INFO] [routes.watermark_routes] POST /extract called
[2025-07-11 22:31:57,127] [DEBUG] [routes.watermark_routes] Loading watermarked image: filename=6fd72ff8d8c8468d859517fa6f8123ba_wm.png
[2025-07-11 22:31:57,127] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-07-11 22:31:57,128] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (106, 462, 3)
[2025-07-11 22:31:57,128] [INFO] [routes.watermark_routes] Watermarked image loaded: shape=(106, 462, 3), dtype=uint8
[2025-07-11 22:31:57,128] [DEBUG] [routes.watermark_routes] Extracting full parity bitstream via DWT engine
[2025-07-11 22:31:57,136] [DEBUG] [core.dwt_engine] Extracted first 32 bits: [1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0]
[2025-07-11 22:31:57,136] [DEBUG] [core.dwt_engine] Total bits extracted: 48972
[2025-07-11 22:31:57,136] [INFO] [routes.watermark_routes] Extracted total bitstream length: 48972 bits
[2025-07-11 22:31:57,136] [DEBUG] [routes.watermark_routes] First 32 bits of bitstream: [1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0]
[2025-07-11 22:31:57,136] [ERROR] [routes.watermark_routes] Invalid or out-of-bounds message length at cursor 304: 36864. Stopping parse.
[2025-07-11 22:31:57,137] [INFO] [routes.watermark_routes] Extracted SHA256 hash: 894d8a6092ba240583c788e6544f74d8834989536c510a3dfdd3b8b41adb7650
[2025-07-11 22:31:58,251] [INFO] [routes.watermark_routes] Blockchain metadata found for hash 894d8a6092ba240583c788e6544f74d8834989536c510a3dfdd3b8b41adb7650. CRC match: True
[2025-07-11 22:31:58,251] [INFO] [routes.watermark_routes] Extraction complete: 1 messages found
[2025-07-11 22:31:58,251] [INFO] [__main__] App context teardown complete.
[2025-07-11 22:31:58,252] [ERROR] [__main__] 127.0.0.1 - - [11/Jul/2025 22:31:58] "POST /extract HTTP/1.1" 200 -
