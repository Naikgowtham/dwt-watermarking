[2025-06-29 15:38:38,626] [INFO] [__main__] Launching Flask server...
[2025-06-29 15:38:38,626] [INFO] [__main__] Creating Flask app...
[2025-06-29 15:38:38,627] [INFO] [__main__] Registering watermark blueprint...
[2025-06-29 15:38:57,520] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:38:57,520] [INFO] [routes.watermark_routes] POST /watermark called
[2025-06-29 15:38:57,530] [DEBUG] [routes.watermark_routes] Loading image from request...
[2025-06-29 15:38:57,530] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:38:57,570] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-06-29 15:38:57,570] [DEBUG] [routes.watermark_routes] Converting message to bitstream...
[2025-06-29 15:38:57,570] [DEBUG] [utils.bit_utils] Converting string to bits: 'hoil'
[2025-06-29 15:38:57,570] [DEBUG] [utils.bit_utils] String converted to 32 bits.
[2025-06-29 15:38:57,570] [DEBUG] [utils.bit_utils] Adding header for message length: 32 bits
[2025-06-29 15:38:57,570] [DEBUG] [utils.bit_utils] Converted integer 32 to bits: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
[2025-06-29 15:38:57,570] [DEBUG] [utils.bit_utils] Total bitstream length after header = 48
[2025-06-29 15:38:57,570] [DEBUG] [routes.watermark_routes] Embedding bitstream into image using DWT...
[2025-06-29 15:38:57,570] [INFO] [core.dwt_engine] Starting DWT watermark embedding
[2025-06-29 15:38:57,570] [DEBUG] [core.dwt_engine] Image shape for DWT: (1080, 1920, 3)
[2025-06-29 15:38:57,612] [DEBUG] [core.dwt_engine] Embedding into band: LH, shape = (540, 960), coefficients = 518400
[2025-06-29 15:38:57,643] [INFO] [core.dwt_engine] Watermark embedding complete.
[2025-06-29 15:38:57,643] [DEBUG] [routes.watermark_routes] Saving original image to: /home/gowtham/dwt-watermarking/backend/uploads/original/bef12ac5-8dd7-4d76-92fc-cc860594a519_original.png
[2025-06-29 15:38:57,643] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/original/bef12ac5-8dd7-4d76-92fc-cc860594a519_original.png
[2025-06-29 15:38:57,687] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:38:57,687] [DEBUG] [routes.watermark_routes] Saving watermarked image to: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bef12ac5-8dd7-4d76-92fc-cc860594a519_watermarked.png
[2025-06-29 15:38:57,688] [DEBUG] [utils.image_utils] Attempting to save image to path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bef12ac5-8dd7-4d76-92fc-cc860594a519_watermarked.png
[2025-06-29 15:38:57,731] [DEBUG] [utils.image_utils] Image saved successfully.
[2025-06-29 15:38:57,731] [DEBUG] [routes.watermark_routes] Encoding watermarked image to base64...
[2025-06-29 15:38:57,731] [DEBUG] [utils.image_utils] Attempting to convert image to base64 from path: /home/gowtham/dwt-watermarking/backend/uploads/watermarked/bef12ac5-8dd7-4d76-92fc-cc860594a519_watermarked.png
[2025-06-29 15:38:57,733] [DEBUG] [utils.image_utils] Image successfully encoded to base64.
[2025-06-29 15:38:57,733] [INFO] [routes.watermark_routes] Watermark embedding successful.
[2025-06-29 15:38:57,740] [INFO] [__main__] App context teardown complete.
[2025-06-29 15:39:11,644] [DEBUG] [__main__] Received a new request.
[2025-06-29 15:39:11,644] [INFO] [routes.watermark_routes] POST /extract called
[2025-06-29 15:39:11,652] [DEBUG] [routes.watermark_routes] Loading watermarked image from request...
[2025-06-29 15:39:11,652] [DEBUG] [utils.image_utils] Attempting to load image from uploaded file...
[2025-06-29 15:39:11,679] [DEBUG] [utils.image_utils] Image successfully loaded. Shape: (1080, 1920, 3)
[2025-06-29 15:39:11,679] [DEBUG] [routes.watermark_routes] Extracting bits from DWT band...
[2025-06-29 15:39:11,679] [INFO] [core.dwt_engine] Starting DWT watermark extraction
[2025-06-29 15:39:11,715] [DEBUG] [core.dwt_engine] Extracting from band: LH, shape = (540, 960), total coefficients = 518400
[2025-06-29 15:39:11,715] [DEBUG] [utils.bit_utils] Converted bits to integer: 0
[2025-06-29 15:39:11,715] [DEBUG] [core.dwt_engine] Extracted message length from header: 0
[2025-06-29 15:39:11,715] [INFO] [core.dwt_engine] Watermark extraction complete.
[2025-06-29 15:39:11,715] [DEBUG] [routes.watermark_routes] Converting extracted bits back to string...
[2025-06-29 15:39:11,715] [DEBUG] [utils.bit_utils] Reconstructing string from bits. Bit length = 0
[2025-06-29 15:39:11,715] [DEBUG] [utils.bit_utils] Bits successfully converted to string: ''
[2025-06-29 15:39:11,715] [INFO] [routes.watermark_routes] Watermark extraction successful.
[2025-06-29 15:39:11,718] [INFO] [__main__] App context teardown complete.
